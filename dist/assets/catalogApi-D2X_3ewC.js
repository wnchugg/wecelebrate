import{w as i,ak as d,g,p as w}from"./index-CYlZQa06.js";const n=`https://${i}.supabase.co/functions/v1/make-server-6fcaeea3`;function e(){const a=d(),t=g();if(!a)throw new Error("Authentication required");return{Authorization:`Bearer ${w}`,"X-Access-Token":a,"X-Environment-ID":t.id,"Content-Type":"application/json"}}async function u(a){const t=new URLSearchParams;a!=null&&a.type&&t.append("type",a.type),a!=null&&a.status&&t.append("status",a.status),a!=null&&a.ownerId&&t.append("ownerId",a.ownerId);const o=`${n}/catalogs${t.toString()?"?"+t.toString():""}`,r=await fetch(o,{headers:e()});if(!r.ok){const c=await r.json();throw new Error(c.error||"Failed to fetch catalogs")}return(await r.json()).catalogs||[]}async function f(a){const t=await fetch(`${n}/catalogs/${a}`,{headers:e()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to fetch catalog")}return(await t.json()).catalog}async function p(a){const t=await fetch(`${n}/catalogs`,{method:"POST",headers:e(),body:JSON.stringify(a)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create catalog")}return(await t.json()).catalog}async function l(a,t){const o=await fetch(`${n}/catalogs/${a}`,{method:"PUT",headers:e(),body:JSON.stringify(t)});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to update catalog")}return(await o.json()).catalog}async function y(a){const t=await fetch(`${n}/catalogs/${a}`,{method:"DELETE",headers:e()});if(!t.ok){const o=await t.json();throw new Error(o.error||"Failed to delete catalog")}}async function j(a){const t=await fetch(`${n}/sites/${a}/catalog-config`,{headers:e()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to fetch site catalog configuration")}return(await t.json()).config}async function k(a,t){const o=await fetch(`${n}/sites/${a}/catalog-config`,{method:"POST",headers:e(),body:JSON.stringify(t)});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to create/update site catalog configuration")}return(await o.json()).config}async function m(){const a=await fetch(`${n}/migration/check`,{headers:e()});if(!a.ok){const t=await a.json();throw new Error(t.error||"Failed to check migration status")}return a.json()}async function $(){const a=await fetch(`${n}/migration/status`,{headers:e()});if(!a.ok){const o=await a.json();throw new Error(o.error||"Failed to get migration status")}return(await a.json()).status}async function E(){const a=await fetch(`${n}/migration/run`,{method:"POST",headers:e()});if(!a.ok){const t=await a.json();throw new Error(t.error||"Failed to run migration")}return a.json()}export{f as a,m as b,p as c,y as d,j as e,u as f,$ as g,k as h,E as r,l as u};
