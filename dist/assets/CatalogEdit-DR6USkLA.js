import{u as J,a as K,r as t,j as e,n as Q,D as _}from"./index-BKvtyMRF.js";import{a as ee,u as se,c as re}from"./catalogApi-CHHyiXPN.js";import{S as te}from"./save-CKwfZUrw.js";import{P as ae}from"./package-BIaJQQZf.js";import{F as ne}from"./file-text-B3_DQoej.js";import{E as ce}from"./external-link-D9OGhPh5.js";function xe(){const l=J(),{catalogId:c}=K(),a=!!c,[X,g]=t.useState(a),[i,p]=t.useState(!1),[h,n]=t.useState(null),[d,y]=t.useState(""),[f,b]=t.useState(""),[v,j]=t.useState("manual"),[N,C]=t.useState("active"),[S,k]=t.useState("manual"),[u,w]=t.useState(""),[m,D]=t.useState(""),[E,A]=t.useState(""),[o,I]=t.useState(!1),[P,q]=t.useState("manual"),[F,O]=t.useState("USD"),[x,M]=t.useState(0),[U,B]=t.useState(!0),[R,T]=t.useState(!0),[V,L]=t.useState(!1),[G,z]=t.useState(!1),[H,W]=t.useState(!0);t.useEffect(()=>{a&&c&&Y(c)},[c,a]);async function Y(s){try{g(!0),n(null);const r=await ee(s);y(r.name),b(r.description||""),j(r.type),C(r.status),k(r.source.type),w(r.source.sourceSystem),D(r.source.sourceId),A(r.source.sourceVersion||""),I(r.settings.autoSync),q(r.settings.syncFrequency||"manual"),O(r.settings.defaultCurrency),M(r.settings.priceMarkup||0),B(r.settings.allowSiteOverrides),T(r.settings.trackInventory),L(r.settings.requireApproval||!1),z(r.settings.notifyOnSync||!1),W(r.settings.notifyOnError!==!1)}catch(r){console.error("Error loading catalog:",r),n(r.message||"Failed to load catalog")}finally{g(!1)}}async function Z(s){if(s.preventDefault(),!d.trim()){n("Catalog name is required");return}if(!u.trim()){n("Source system is required");return}if(!m.trim()){n("Source ID is required");return}try{p(!0),n(null);const r={name:d.trim(),description:f.trim()||void 0,type:v,source:{type:S,sourceSystem:u.trim(),sourceId:m.trim(),sourceVersion:E.trim()||void 0},status:N,settings:{autoSync:o,syncFrequency:o?P:void 0,defaultCurrency:F,priceMarkup:x>0?x:void 0,allowSiteOverrides:U,trackInventory:R,requireApproval:V,notifyOnSync:G,notifyOnError:H}};a&&c?await se(c,r):await re(r),l("/admin/catalogs")}catch(r){console.error("Error saving catalog:",r),n(r.message||"Failed to save catalog"),p(!1)}}function $(s){switch(s){case"erp":return _;case"vendor":return ce;case"manual":return ne;case"dropship":return ae}}return X?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#D91C81] border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>l("/admin/catalogs"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(Q,{className:"w-4 h-4"}),"Back to Catalogs"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a?"Edit Catalog":"Create New Catalog"}),e.jsx("p",{className:"text-gray-600 mt-1",children:a?"Update catalog configuration":"Set up a new product catalog from an ERP or vendor"})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:h}),e.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Catalog Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d,onChange:s=>y(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"e.g., SAP Main Catalog, Vendor XYZ Products",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:f,onChange:s=>b(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",rows:3,placeholder:"Brief description of this catalog..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Catalog Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["erp","vendor","manual","dropship"].map(s=>{const r=$(s);return e.jsxs("button",{type:"button",onClick:()=>j(s),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-colors ${v===s?"border-[#D91C81] bg-pink-50 text-[#D91C81]":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:s})]},s)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N,onChange:s=>C(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Source Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Source Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:S,onChange:s=>k(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"api",children:"API"}),e.jsx("option",{value:"file",children:"File (FTP/SFTP)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Source System ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:u,onChange:s=>w(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"e.g., SAP, Oracle, Vendor Portal",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Source ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:m,onChange:s=>D(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"External system identifier",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source Version"}),e.jsx("input",{type:"text",value:E,onChange:s=>A(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"API version or file format version"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Default Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:F,onChange:s=>O(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"CAD",children:"CAD"}),e.jsx("option",{value:"AUD",children:"AUD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Markup (%)"}),e.jsx("input",{type:"number",value:x,onChange:s=>M(parseFloat(s.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"0",min:"0",step:"0.1"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:s=>I(s.target.checked),className:"w-5 h-5 text-[#D91C81] rounded focus:ring-2 focus:ring-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Enable Auto Sync"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Automatically sync products from source system"})]})]}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sync Frequency"}),e.jsxs("select",{value:P,onChange:s=>q(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:s=>B(s.target.checked),className:"w-5 h-5 text-[#D91C81] rounded focus:ring-2 focus:ring-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Allow Site Overrides"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sites can modify prices and descriptions"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:s=>T(s.target.checked),className:"w-5 h-5 text-[#D91C81] rounded focus:ring-2 focus:ring-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Track Inventory"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Monitor product availability"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:V,onChange:s=>L(s.target.checked),className:"w-5 h-5 text-[#D91C81] rounded focus:ring-2 focus:ring-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Require Approval for Sync Changes"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Review changes before applying them"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:s=>z(s.target.checked),className:"w-5 h-5 text-[#D91C81] rounded focus:ring-2 focus:ring-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Notify on Sync"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Send notification after each sync"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:H,onChange:s=>W(s.target.checked),className:"w-5 h-5 text-[#D91C81] rounded focus:ring-2 focus:ring-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Notify on Error"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Send notification when sync fails"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>l("/admin/catalogs"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:i,children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 px-6 py-2 bg-[#D91C81] text-white rounded-lg hover:bg-[#B91670] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(te,{className:"w-5 h-5"}),i?"Saving...":a?"Update Catalog":"Create Catalog"]})]})]})]})}export{xe as default};
