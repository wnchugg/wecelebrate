import{m as ne,u as ie,q as oe,r as m,a6 as I,l as ce,j as e,C as v,G as W,S as de,x as K,L as me,B as ee,X as ge}from"./index-dV4Uttrq.js";import{I as j}from"./input-DElxXLEL.js";import{L as g}from"./label-Cx_2PmZF.js";import{T as xe}from"./textarea-Ckytr8B0.js";import{S as ue}from"./switch-CBDky-vy.js";import{g as he}from"./url-v6iX-Vwj.js";import{D as pe,a as fe,b as ye,c as be,d as je}from"./dialog-BOcbCdZI.js";import{s as h,a as U}from"./errorHandling-CwdwM2Re.js";import{s as te}from"./supabase-CKmDi08e.js";import{P as se}from"./plus-DUZUgypq.js";import{S as ae}from"./square-pen-BiMIh-Tu.js";import{C as ve}from"./copy-CVf0oSKj.js";import{G as Ne}from"./gift-DL-mgK9C.js";import{E as we}from"./eye-CnbqyKZE.js";import{T as Ce}from"./trash-2-B2VV2ZDP.js";import{I as re}from"./image--TMiHwRd.js";import{C as Se}from"./circle-check-big-BTbhA0uw.js";import{U as Le}from"./upload-BBB967fQ.js";import"./index-DS1l-0-y.js";import"./index-Bnc4558u.js";import"./index-C8MzEdCL.js";import"./index-B7jEnDBu.js";import"./index-CkX5DTQg.js";import"./index-Ttf8ZMtO.js";import"./index-DJFIPDZ_.js";import"./index-BO2tctDo.js";import"./index-faiGe14u.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ke=ne("ellipsis-vertical",De);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],X=ne("power",Ae);async function Ie(x,B){const l=Date.now(),S=`logos/${`${B}-${l}.${x.name.split(".").pop()}`}`;try{const{data:a,error:i}=await te.storage.from("logos").upload(S,x,{upsert:!0});if(i)throw i;const{data:N}=te.storage.from("logos").getPublicUrl(a.path);return{url:N.publicUrl,path:a.path,publicUrl:N.publicUrl}}catch(a){throw console.error("Error uploading logo:",a),a}}const le=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"pl",name:"Polish"},{code:"sv",name:"Swedish"},{code:"da",name:"Danish"}],Ee=x=>{switch(x){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"draft":return"bg-amber-100 text-amber-800 border-amber-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ue=x=>{switch(x){case"email":return"Email Address";case"employeeId":return"Employee ID";case"serialCard":return"Serial Card";case"magicLink":return"Magic Link";default:return x}};function it(){const x=ie(),{setCurrentSite:B}=oe(),[l,T]=m.useState([]),[S,a]=m.useState([]),[i,N]=m.useState(!0),[b,$]=m.useState(""),[E,w]=m.useState(!1),[L,p]=m.useState(null),[u,_]=m.useState("all"),[D,J]=m.useState("all"),[H,O]=m.useState(null),[Y,Q]=m.useState(!1),[P,f]=m.useState(null);m.useEffect(()=>{C()},[]);const C=async()=>{N(!0);try{const[t,r]=await Promise.all([I("/v2/sites"),I("/v2/clients")]);T(t.data||[]),a(r.data||[])}catch(t){ce.error("[SiteManagement] Load error:",t instanceof Error?t.message:"Unknown error"),h(t,{operation:"load data"})}finally{N(!1)}},M=t=>S.find(r=>r.id===t),F=l.filter(t=>{var c;const r=M(t.clientId),d=(r==null?void 0:r.name)||"",s=t.name.toLowerCase().includes(b.toLowerCase())||d.toLowerCase().includes(b.toLowerCase())||((c=t.domain)==null?void 0:c.toLowerCase().includes(b.toLowerCase())),n=D==="all"||t.status===D,o=u==="all"||t.clientId===u;return s&&n&&o}),R=async t=>{let r;t.status==="draft"?r="active":t.status==="active"?r="inactive":r="active";try{await I(`/v2/sites/${t.id}`,{method:"PUT",body:JSON.stringify({...t,status:r})});let d="";t.status==="draft"&&r==="active"?d=`"${t.name}" published successfully`:r==="active"?d=`"${t.name}" activated successfully`:d=`"${t.name}" deactivated successfully`,U(d),C()}catch(d){h("Failed to update site status",d instanceof Error?d.message:"Unknown error")}},z=async t=>{try{const{id:r,createdAt:d,updatedAt:s,...n}=t,o={...n,name:`${t.name} (Copy)`,domain:t.domain?`${t.domain.split(".")[0]}-copy.jala.com`:void 0,status:"draft"};await I("/v2/sites",{method:"POST",body:JSON.stringify(o)}),U("Site duplicated successfully"),C()}catch(r){h("Failed to duplicate site",r instanceof Error?r.message:"Unknown error")}},V=async(t,r)=>{if(confirm(`Are you sure you want to delete "${r}"? This action cannot be undone.`)){O(t);try{await I(`/v2/sites/${t}`,{method:"DELETE"}),U(`"${r}" deleted successfully`),C()}catch(d){h("Failed to delete site",d instanceof Error?d.message:"Unknown error")}finally{O(null)}}},q=async t=>{try{L?(await I(`/v2/sites/${L.id}`,{method:"PUT",body:JSON.stringify(t)}),U("Site updated successfully")):(await I("/v2/sites",{method:"POST",body:JSON.stringify(t)}),U("Site created successfully")),w(!1),p(null),C()}catch(r){h(L?"Failed to update site":"Failed to create site",r instanceof Error?r.message:"Unknown error")}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D91C81] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading sites..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Site Management"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Manage client sites and configurations"})]}),e.jsxs(v,{onClick:()=>{p(null),w(!0)},className:"bg-[#D91C81] hover:bg-[#B01669] text-white w-full sm:w-auto",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Create New Site"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sites"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.filter(t=>t.status==="active").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(ae,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.filter(t=>t.status==="draft").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Draft"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.filter(t=>t.status==="inactive").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Inactive"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search sites by name, client, or domain...",value:b,onChange:t=>$(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none"})]}),e.jsxs("select",{value:D,onChange:t=>J(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"draft",children:"Draft"})]}),e.jsxs("select",{value:u,onChange:t=>_(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"all",children:"All Clients"}),S.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:F.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No sites found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:b||D||u?"Try adjusting your filters":"Create your first site to get started"}),!b&&D==="all"&&u==="all"&&e.jsxs(v,{onClick:()=>{p(null),w(!0)},className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Create Site"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Site Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Client"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Domain"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Validation"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Updated"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(t=>{var s,n;const r=M(t.clientId),d=(r==null?void 0:r.name)||"Unknown Client";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:((s=t.branding)==null?void 0:s.primaryColor)||"#D91C81"},children:d.substring(0,2).toUpperCase()}),e.jsx("div",{children:e.jsx("p",{className:"font-semibold text-gray-900",children:t.name})})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm text-gray-900",children:d})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 font-mono",children:t.domain||"N/A"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium border ${Ee(t.status)}`,children:t.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:Ue(((n=t.settings)==null?void 0:n.validationMethod)||"N/A")})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(t.updatedAt).toLocaleDateString()})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{B(t),x("/admin/site-configuration")},title:"Configure Site",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>f(P===t.id?null:t.id),title:"More actions",children:e.jsx(ke,{className:"w-4 h-4"})}),P===t.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(null)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20",children:[e.jsxs("button",{onClick:()=>{f(null),p(t),w(!0)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),"Edit Basic Info"]}),e.jsxs("button",{onClick:()=>{f(null),R(t)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),t.status==="draft"?"Publish Site":t.status==="active"?"Deactivate Site":"Activate Site"]}),e.jsxs("button",{onClick:()=>{f(null),z(t)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Duplicate Site"]}),e.jsxs(me,{to:`/admin/site-gift-assignment?siteId=${t.id}`,onClick:()=>f(null),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Manage Gifts"]}),e.jsxs("a",{href:he(t.id),target:"_blank",rel:"noopener noreferrer",onClick:()=>f(null),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),"View Public Site"]}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsxs("button",{onClick:()=>{f(null),V(t.id,t.name)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",disabled:H===t.id,children:[e.jsx(Ce,{className:"w-4 h-4"}),"Delete Site"]})]})]})]})]})})]},t.id)})})]})})}),e.jsx(Be,{open:E,onClose:()=>{w(!1),p(null)},site:L,clients:S,onSave:q})]})}function Be({open:x,onClose:B,site:l,clients:T,onSave:S}){var P,f,C,M,F,R,z,V,q,t,r,d;const[a,i]=m.useState({name:"",clientId:"",slug:"",domain:"",description:"",status:"draft",branding:{primaryColor:"#D91C81",secondaryColor:"#1B2A5E",tertiaryColor:"#00B4CC",logo:""},settings:{validationMethod:"email",allowGuestAccess:!1,defaultLanguage:"en",supportedLanguages:["en"]}}),[N,b]=m.useState(!1),[$,E]=m.useState(""),[w,L]=m.useState(!1),[p,u]=m.useState(1);m.useEffect(()=>{var s,n,o,c,y,k,A,G,Z;l?(i({name:l.name,clientId:l.clientId,slug:l.slug,domain:l.domain,description:l.description,status:l.status,branding:{primaryColor:((s=l.branding)==null?void 0:s.primaryColor)||"#D91C81",secondaryColor:((n=l.branding)==null?void 0:n.secondaryColor)||"#1B2A5E",tertiaryColor:((o=l.branding)==null?void 0:o.tertiaryColor)||"#00B4CC",logo:((c=l.branding)==null?void 0:c.logo)||""},settings:{validationMethod:((y=l.settings)==null?void 0:y.validationMethod)||"email",allowGuestAccess:((k=l.settings)==null?void 0:k.allowGuestAccess)||!1,defaultLanguage:((A=l.settings)==null?void 0:A.defaultLanguage)||"en",supportedLanguages:((G=l.settings)==null?void 0:G.supportedLanguages)||["en"]},siteUrl:l.siteUrl}),E(((Z=l.branding)==null?void 0:Z.logo)||"")):(i({name:"",clientId:"",slug:"",domain:"",description:"",status:"draft",branding:{primaryColor:"#D91C81",secondaryColor:"#1B2A5E",tertiaryColor:"#00B4CC",logo:""},settings:{validationMethod:"email",allowGuestAccess:!1,defaultLanguage:"en",supportedLanguages:["en"]}}),E("")),u(1)},[l,x]);const _=async s=>{var o;const n=(o=s.target.files)==null?void 0:o[0];if(n){if(!n.type.startsWith("image/")){h("Please select an image file");return}if(n.size>2*1024*1024){h("Image size must be less than 2MB");return}L(!0);try{const c=new FileReader;c.onload=k=>{var G;const A=(G=k.target)==null?void 0:G.result;E(A),i({...a,branding:{...a.branding,logo:A}})},c.readAsDataURL(n);const y=await Ie(n,a.slug||"temp");i({...a,branding:{...a.branding,logo:y.url}}),U("Logo uploaded successfully")}catch(c){h("Failed to upload logo",c instanceof Error?c.message:"Unknown error")}finally{L(!1)}}},D=()=>{E(""),i({...a,branding:{...a.branding,logo:""}})},J=s=>s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),H=s=>{i({...a,name:s,slug:a.slug||J(s)})},O=s=>{var y,k;const n=((y=a.settings)==null?void 0:y.supportedLanguages)||[],o=n.includes(s)?n.filter(A=>A!==s):[...n,s];if(o.length===0){h("At least one language must be selected");return}let c=(k=a.settings)==null?void 0:k.defaultLanguage;o.includes(c)||(c=o[0]),i({...a,settings:{...a.settings,supportedLanguages:o,defaultLanguage:c}})},Y=async s=>{var n,o;if(s.preventDefault(),!((n=a.name)!=null&&n.trim())){h("Please enter a site name");return}if(!a.clientId){h("Please select a client");return}if(!((o=a.slug)!=null&&o.trim())){h("Please enter a site slug");return}b(!0);try{S(a)}finally{b(!1)}},Q=[{number:1,title:"Basic Info",icon:ee},{number:2,title:"Branding",icon:re},{number:3,title:"Settings",icon:K}];return e.jsx(pe,{open:x,onOpenChange:B,children:e.jsxs(fe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ye,{children:[e.jsx(be,{children:l?"Edit Site":"Create New Site"}),e.jsx(je,{children:l?"Edit the details of this site.":"Create a new site for a client."})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 py-4 border-b border-gray-200",children:Q.map((s,n)=>{const o=s.icon,c=p===s.number,y=p>s.number;return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{type:"button",onClick:()=>u(s.number),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${c?"bg-[#D91C81] text-white":y?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[y?e.jsx(Se,{className:"w-4 h-4"}):e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:s.title})]}),n<Q.length-1&&e.jsx("div",{className:"w-8 h-px bg-gray-300 mx-2"})]},s.number)})}),e.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[p===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"Basic Information"]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",children:"Site Name *"}),e.jsx(j,{id:"name",value:a.name,onChange:s=>H(s.target.value),placeholder:"e.g., Holiday Gifts 2024",required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"slug",children:"Site Slug *"}),e.jsx(j,{id:"slug",value:a.slug,onChange:s=>i({...a,slug:s.target.value}),placeholder:"e.g., holiday-gifts-2024",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used in URLs: /site/",a.slug||"slug"]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"clientId",children:"Client *"}),e.jsxs("select",{id:"clientId",value:a.clientId,onChange:s=>i({...a,clientId:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select a client..."}),T.filter(s=>s.isActive).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"domain",children:"Custom Domain"}),e.jsx(j,{id:"domain",value:a.domain,onChange:s=>i({...a,domain:s.target.value}),placeholder:"e.g., gifts.company.com"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional. Leave blank to use default domain."})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"description",children:"Description"}),e.jsx(xe,{id:"description",value:a.description,onChange:s=>i({...a,description:s.target.value}),placeholder:"Brief description of this site...",rows:3})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(v,{type:"button",onClick:()=>u(2),className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:"Next: Branding"})})]}),p===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Branding & Appearance"]}),e.jsxs("div",{children:[e.jsx(g,{children:"Site Logo"}),e.jsxs("div",{className:"mt-2",children:[$?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:$,alt:"Logo preview",className:"h-24 w-auto max-w-xs rounded-lg border-2 border-gray-200"}),e.jsx("button",{type:"button",onClick:D,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(ge,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Le,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Click to upload logo"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG up to 2MB"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_,disabled:w})]}),w&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Uploading..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(j,{id:"primaryColor",type:"color",value:(P=a.branding)==null?void 0:P.primaryColor,onChange:s=>i({...a,branding:{...a.branding,primaryColor:s.target.value}}),className:"w-16 h-10 cursor-pointer"}),e.jsx(j,{type:"text",value:(f=a.branding)==null?void 0:f.primaryColor,onChange:s=>i({...a,branding:{...a.branding,primaryColor:s.target.value}}),placeholder:"#D91C81",className:"flex-1 font-mono text-sm"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Main accent color"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"secondaryColor",children:"Secondary Color"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(j,{id:"secondaryColor",type:"color",value:(C=a.branding)==null?void 0:C.secondaryColor,onChange:s=>i({...a,branding:{...a.branding,secondaryColor:s.target.value}}),className:"w-16 h-10 cursor-pointer"}),e.jsx(j,{type:"text",value:(M=a.branding)==null?void 0:M.secondaryColor,onChange:s=>i({...a,branding:{...a.branding,secondaryColor:s.target.value}}),placeholder:"#1B2A5E",className:"flex-1 font-mono text-sm"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Complementary color"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"tertiaryColor",children:"Tertiary Color"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(j,{id:"tertiaryColor",type:"color",value:(F=a.branding)==null?void 0:F.tertiaryColor,onChange:s=>i({...a,branding:{...a.branding,tertiaryColor:s.target.value}}),className:"w-16 h-10 cursor-pointer"}),e.jsx(j,{type:"text",value:(R=a.branding)==null?void 0:R.tertiaryColor,onChange:s=>i({...a,branding:{...a.branding,tertiaryColor:s.target.value}}),placeholder:"#00B4CC",className:"flex-1 font-mono text-sm"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional accent"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Color Preview:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:(z=a.branding)==null?void 0:z.primaryColor},title:"Primary"}),e.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:(V=a.branding)==null?void 0:V.secondaryColor},title:"Secondary"}),e.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:(q=a.branding)==null?void 0:q.tertiaryColor},title:"Tertiary"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>u(1),children:"Back"}),e.jsx(v,{type:"button",onClick:()=>u(3),className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:"Next: Settings"})]})]}),p===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Site Settings"]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"validationMethod",children:"Access Validation Method"}),e.jsxs("select",{id:"validationMethod",value:(t=a.settings)==null?void 0:t.validationMethod,onChange:s=>i({...a,settings:{...a.settings,validationMethod:s.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"email",children:"Email Address Validation"}),e.jsx("option",{value:"employeeId",children:"Employee ID Validation"}),e.jsx("option",{value:"serialCard",children:"Serial Card Number"}),e.jsx("option",{value:"magicLink",children:"Magic Link (Email)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How users will verify their eligibility to access this site"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"defaultLanguage",children:"Default Language"}),e.jsx("select",{id:"defaultLanguage",value:(r=a.settings)==null?void 0:r.defaultLanguage,onChange:s=>i({...a,settings:{...a.settings,defaultLanguage:s.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:le.filter(s=>{var n,o;return(o=(n=a.settings)==null?void 0:n.supportedLanguages)==null?void 0:o.includes(s.code)}).map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Supported Languages"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:le.map(s=>{var o,c;const n=(c=(o=a.settings)==null?void 0:o.supportedLanguages)==null?void 0:c.includes(s.code);return e.jsx("button",{type:"button",onClick:()=>O(s.code),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${n?"bg-[#D91C81] text-white border-[#D91C81]":"bg-white text-gray-700 border-gray-300 hover:border-[#D91C81]"}`,children:s.name},s.code)})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Users will be able to switch between these languages"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"allowGuestAccess",className:"font-semibold",children:"Allow Guest Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let users browse without validation"})]}),e.jsx(ue,{id:"allowGuestAccess",checked:(d=a.settings)==null?void 0:d.allowGuestAccess,onCheckedChange:s=>i({...a,settings:{...a.settings,allowGuestAccess:s}})})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"status",children:"Site Status"}),e.jsxs("select",{id:"status",value:a.status,onChange:s=>i({...a,status:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"draft",children:"Draft (Not visible to users)"}),e.jsx("option",{value:"active",children:"Active (Live and accessible)"}),e.jsx("option",{value:"inactive",children:"Inactive (Temporarily disabled)"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>u(2),children:"Back"}),e.jsx(v,{type:"submit",className:"bg-[#D91C81] hover:bg-[#B01669] text-white",disabled:N,children:N?"Saving...":l?"Update Site":"Create Site"})]})]})]})]})})}export{it as SiteManagement};
