import{r as t,l as D,j as e,L as g,S as F,D as E}from"./index-DAep3-17.js";import{f as k,d as R}from"./catalogApi-CvdQejWe.js";import{P}from"./plus-U3aaopYz.js";import{P as $}from"./pen-Cwjq4Pk6.js";import{T as B}from"./trash-2-orf3MXe6.js";import{P as V}from"./package-BYXKoKMr.js";import{F as G}from"./file-text-FCbbDMlz.js";import{E as U}from"./external-link-BkWXEGDv.js";function X(){const[d,u]=t.useState([]),[c,h]=t.useState(!0),[p,f]=t.useState(null),[i,b]=t.useState(""),[a,j]=t.useState(""),[l,y]=t.useState(""),[x,v]=t.useState(null),[N,C]=t.useState(null);t.useEffect(()=>{T()},[a,l]);async function T(){try{h(!0),f(null);const s={};a&&(s.type=a),l&&(s.status=l);const r=await k(s);u(r)}catch(s){const r=s instanceof Error?s.message:"Failed to load catalogs";D.error("[CatalogManagement] Error loading catalogs",{error:r}),f(r)}finally{h(!1)}}async function L(s){if(x!==s){v(s);return}try{C(s),await R(s),u(d.filter(r=>r.id!==s)),v(null)}catch(r){const n=r instanceof Error?r.message:"Failed to delete catalog";D.error("[CatalogManagement] Error deleting catalog",{catalogId:s,error:n}),alert(n)}finally{C(null)}}const m=d.filter(s=>{var n,o;if(!i)return!0;const r=i.toLowerCase();return s.name.toLowerCase().includes(r)||((n=s.description)==null?void 0:n.toLowerCase().includes(r))||s.type.toLowerCase().includes(r)||(((o=s.source)==null?void 0:o.sourceSystem)||"").toLowerCase().includes(r)});function M(s){switch(s){case"erp":return{icon:E,label:"ERP",color:"text-blue-600 bg-blue-50"};case"vendor":return{icon:U,label:"Vendor",color:"text-purple-600 bg-purple-50"};case"manual":return{icon:G,label:"Manual",color:"text-gray-600 bg-gray-50"};case"dropship":return{icon:V,label:"Dropship",color:"text-green-600 bg-green-50"}}}function A(s){const r={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",syncing:"bg-blue-100 text-blue-700",error:"bg-red-100 text-red-700"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)})}return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Catalog Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage product catalogs from different ERP systems and vendors"})]}),e.jsxs(g,{to:"/admin/catalogs/create",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#D91C81] text-white rounded-lg hover:bg-[#B91670] transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),"Create Catalog"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search catalogs...",value:i,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent"})]}),e.jsxs("select",{value:a,onChange:s=>j(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"erp",children:"ERP"}),e.jsx("option",{value:"vendor",children:"Vendor"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"dropship",children:"Dropship"})]}),e.jsxs("select",{value:l,onChange:s=>y(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"syncing",children:"Syncing"}),e.jsx("option",{value:"error",children:"Error"})]})]})}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:p}),c&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#D91C81] border-t-transparent rounded-full animate-spin"})}),!c&&e.jsx(e.Fragment,{children:m.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(E,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No catalogs found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:i||a||l?"Try adjusting your filters":"Get started by creating your first catalog"}),!i&&!a&&!l&&e.jsxs(g,{to:"/admin/catalogs/create",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#D91C81] text-white rounded-lg hover:bg-[#B91670] transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),"Create Catalog"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:m.map(s=>{var o,w,S;const r=M(s.type),n=r.icon;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.color}`,children:e.jsx(n,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:s.description})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:A(s.status)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.totalProducts}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Products"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.activeProducts}),e.jsx("div",{className:"text-xs text-gray-600",children:"Active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:r.label}),e.jsx("div",{className:"text-xs text-gray-600",children:(o=s.source)==null?void 0:o.sourceSystem})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Currency:"})," ",(w=s.settings)==null?void 0:w.defaultCurrency]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Auto Sync:"})," ",(S=s.settings)!=null&&S.autoSync?"Enabled":"Disabled"]}),s.lastSyncedAt&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Last Synced:"})," ",new Date(s.lastSyncedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200",children:[e.jsxs(g,{to:`/admin/catalogs/${s.id}`,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>L(s.id),disabled:N===s.id,className:`flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-colors ${x===s.id?"bg-red-600 text-white hover:bg-red-700":"bg-red-50 text-red-700 hover:bg-red-100"}`,children:[e.jsx(B,{className:"w-4 h-4"}),N===s.id?"Deleting...":x===s.id?"Confirm Delete":"Delete"]})]})]},s.id)})})}),!c&&d.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:m.length})," of"," ",e.jsx("span",{className:"font-semibold",children:d.length})," catalogs shown"]}),(i||a||l)&&e.jsx("button",{onClick:()=>{b(""),j(""),y("")},className:"text-blue-700 hover:text-blue-900 font-medium",children:"Clear Filters"})]})})]})}export{X as default};
