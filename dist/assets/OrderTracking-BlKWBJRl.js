import{a as C,u as D,c as k,r as l,j as e,n as A,y as S,L,H as g,t as u,g as O,k as B,l as E}from"./index-C7jV57L-.js";import{L as T}from"./Logo-DZGWE0S1.js";import{C as P}from"./circle-alert-LytUjhL9.js";import{C as $}from"./clock-IpOWLfyH.js";import{C as I}from"./calendar-Gocszv99.js";import{C as j}from"./circle-check-big-DXQHMGWC.js";import{P as d}from"./package-sL0K4R_A.js";import{M as U}from"./map-pin-BehCdzck.js";import{T as F}from"./truck-DCjUdp_E.js";function _(){const{orderId:n,siteId:Y}=C(),i=D(),{t:H}=k(),[t,f]=l.useState(null),[b,c]=l.useState(!0),[o,m]=l.useState(null);l.useEffect(()=>{(async()=>{if(!n){i("../gift-selection");return}c(!0),m(null);try{const r=sessionStorage.getItem("employee_session");if(!r){u.error("Session expired. Please log in again."),i("../access");return}const a=O(),w=B(a),h=await fetch(`${w}/public/orders/${n}`,{headers:{Authorization:`Bearer ${a.supabaseAnonKey}`,"X-Environment-ID":a.id,"X-Session-Token":r}}),p=await h.json();if(!h.ok)throw new Error(p.error||"Failed to load order");f(p.order)}catch(r){E.error("Failed to load order:",r),m(r.message||"Failed to load order details"),u.error(r.message||"Failed to load order")}finally{c(!1)}})()},[n,i]);const N=s=>{const r=new Date(s),a=new Date(r);return a.setDate(a.getDate()+7),a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},y=s=>[{key:"pending",label:"Order Placed",description:"Your order has been received",icon:d,completed:!0,active:s.status==="pending",date:s.createdAt},{key:"confirmed",label:"Order Confirmed",description:"Your order has been confirmed",icon:j,completed:["confirmed","shipped","delivered"].includes(s.status),active:s.status==="confirmed",date:s.updatedAt},{key:"shipped",label:"Shipped",description:"Your order is on the way",icon:F,completed:["shipped","delivered"].includes(s.status),active:s.status==="shipped",date:s.shippedAt},{key:"delivered",label:"Delivered",description:"Your order has been delivered",icon:g,completed:s.status==="delivered",active:s.status==="delivered",date:s.deliveredAt}];if(b)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#D91C81] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})});if(o||!t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-500 text-lg font-bold mb-4",children:o||"Order not found"}),e.jsx("button",{onClick:()=>i("/"),className:"text-[#D91C81] hover:text-[#B71569] font-medium",children:"Return Home"})]})});const x=y(t),v=N(t.createdAt);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Back",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsx("div",{className:"h-8 w-[88px]",children:e.jsx(T,{})})]}),e.jsx(S,{})]})})}),e.jsx("div",{className:"py-8 sm:py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Track Your Order"}),e.jsxs("p",{className:"text-lg text-gray-600 mb-4",children:["Order Number: ",e.jsx("span",{className:"font-mono font-bold text-[#D91C81]",children:t.orderNumber})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Placed on ",new Date(t.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Status"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-8 bottom-8 w-0.5 bg-gray-200",children:e.jsx("div",{className:"bg-gradient-to-b from-[#D91C81] to-[#00B4CC] transition-all duration-500",style:{height:`${(x.filter(s=>s.completed).length-1)*33.33}%`,width:"100%"}})}),e.jsx("div",{className:"space-y-8 relative",children:x.map((s,r)=>{const a=s.icon;return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`
                        w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 relative z-10
                        transition-all duration-300
                        ${s.completed?"bg-gradient-to-br from-[#D91C81] to-[#B71569] text-white shadow-lg":s.active?"bg-white border-4 border-[#D91C81] text-[#D91C81] animate-pulse":"bg-gray-100 text-gray-400"}
                      `,children:e.jsx(a,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 pt-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-lg ${s.completed||s.active?"text-gray-900":"text-gray-400"}`,children:s.label}),e.jsx("p",{className:`text-sm ${s.completed||s.active?"text-gray-600":"text-gray-400"}`,children:s.description}),s.date&&s.completed&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]}),s.active&&e.jsx("span",{className:"bg-[#D91C81] text-white text-xs px-3 py-1 rounded-full font-medium",children:"Current"})]}),s.key==="shipped"&&t.trackingNumber&&s.completed&&e.jsxs("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-blue-900 font-medium mb-1",children:"Tracking Number"}),e.jsx("p",{className:"font-mono text-blue-700 font-semibold",children:t.trackingNumber}),e.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800 font-medium mt-2 underline",children:"Track with carrier"})]})]})]},s.key)})})]}),t.status!=="delivered"&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-[#00B4CC]/10 to-[#00E5A0]/10 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-6 h-6 text-[#00B4CC]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Delivery"}),e.jsx("p",{className:"font-bold text-gray-900",children:v})]})]}),t.status==="shipped"&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-medium",children:"On Time"})]})}),t.status==="delivered"&&t.deliveredAt&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:"Delivered Successfully!"}),e.jsx("p",{className:"text-sm text-green-700",children:new Date(t.deliveredAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})})]})]})})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 text-[#D91C81]"}),"Gift Details"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:t.giftImageUrl,alt:t.giftName,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.giftName}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.giftCategory}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Quantity:"})," ",t.quantity]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Value:"})," $",t.totalValue.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-[#00B4CC]"}),"Shipping Address"]}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.shippingAddress.fullName}),e.jsx("p",{children:t.shippingAddress.addressLine1}),t.shippingAddress.addressLine2&&e.jsx("p",{children:t.shippingAddress.addressLine2}),e.jsxs("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," ",t.shippingAddress.postalCode]}),e.jsx("p",{children:t.shippingAddress.country}),t.shippingAddress.phone&&e.jsxs("p",{className:"mt-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",t.shippingAddress.phone]})]})]})]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(L,{to:"/",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#D91C81] to-[#B71569] text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition-all",children:[e.jsx(g,{className:"w-5 h-5"}),"Return Home"]}),e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center justify-center gap-2 bg-white text-gray-700 px-6 py-3 rounded-lg font-semibold border-2 border-gray-200 hover:border-gray-300 transition-all",children:[e.jsx(d,{className:"w-5 h-5"}),"Print Order Details"]})]}),e.jsxs("div",{className:"mt-8 text-center text-gray-600 text-sm",children:[e.jsx("p",{children:"Need help with your order?"}),e.jsxs("p",{className:"mt-1",children:["Contact support with order number"," ",e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:t.orderNumber})]})]})]})})]})}export{_ as OrderTracking};
