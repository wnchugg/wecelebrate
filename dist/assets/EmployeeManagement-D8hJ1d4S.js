import{r as d,j as e,C as y,X as G,a4 as F,l as le,a5 as O,t as $,B as V,q as re,D as ne,S as ie}from"./index-CYlZQa06.js";import{C as p,d as u}from"./card-BPM0EqmW.js";import{B as f}from"./badge-9JH8fCUp.js";import{a as B,s as U}from"./errorHandling-D2BSKzOh.js";import{F as Z}from"./file-text-DqnWOcoQ.js";import{D as ee}from"./download-ZW2Pjxq0.js";import{U as H}from"./upload-CdAUSXem.js";import{C as z}from"./circle-check-big-CFCg4-e0.js";import{C as se}from"./circle-alert-cB5UyqMQ.js";import{I as A}from"./input-BGLnrYUB.js";import{L as j}from"./label-BhePNVd4.js";import{S as W}from"./switch-DC7AB-3t.js";import{S as te}from"./server-CljMEZvi.js";import{T as ce}from"./test-tube-CgPYbdXF.js";import{C as de}from"./circle-x-DjoPwhUG.js";import{F as oe}from"./folder-open-CUWH_rsD.js";import{C as xe}from"./clock-BC21cGpU.js";import{S as ae}from"./save-D8WLhVRq.js";import{H as me}from"./HRISIntegrationTab-DgprCls8.js";import{D as he,a as pe,b as ue,c as ge,e as je}from"./dialog-1O3AYBWx.js";import{M as J}from"./map-pin-BqsePYUO.js";import{P as K}from"./plus-h30B0z77.js";import{S as ye}from"./square-pen-B4MK_S3Q.js";import{T as fe}from"./trash-2-PDg71LeD.js";import{U as _}from"./users-0-HXAxu8.js";import"./index-BXDtpjth.js";import"./index-DFx17Zj6.js";import"./index-Bsi2C2ro.js";import"./index-PH4xDfdt.js";import"./activity-B7tbWUwn.js";import"./calendar-7hHGKC7X.js";import"./index-CPBgqh-3.js";import"./index-DLAEm9rO.js";import"./index-DW32q5jf.js";function Ne({client:r,onUploadComplete:g}){var R,b;const[a,i]=d.useState(!1),[N,E]=d.useState(null),[S,L]=d.useState(null),D=d.useRef(null),m=()=>{const t=["email,employeeId,name,department,country,region,location,serialCard","john.doe@company.com,EMP001,John Doe,Engineering,USA,West,San Francisco,CARD12345","jane.smith@company.com,EMP002,Jane Smith,Marketing,USA,East,New York,CARD12346","alex.johnson@company.com,EMP003,Alex Johnson,Sales,Canada,Central,Toronto,CARD12347"].join(`
`),c=new Blob([t],{type:"text/csv"}),x=URL.createObjectURL(c),P=document.createElement("a");P.href=x,P.download="employee_import_template.csv",P.click(),URL.revokeObjectURL(x),B("Template downloaded successfully")},v=t=>{const c=t.split(`
`).filter(w=>w.trim());if(c.length===0)return[];const x=c[0].split(",").map(w=>w.trim().toLowerCase()),P=[];for(let w=1;w<c.length;w++){if(!c[w].trim())continue;const q=c[w].split(",").map(k=>k.trim()),s={};x.forEach((k,I)=>{q[I]&&(s[k]=q[I])}),s.employeeid&&!s.employeeId&&(s.employeeId=s.employeeid),s.serialcard&&!s.serialCard&&(s.serialCard=s.serialcard),P.push(s)}return P},T=t=>{var x;const c=(x=t.target.files)==null?void 0:x[0];c&&(L(c),E(null))},M=async()=>{if(S){i(!0),E(null);try{const t=await S.text(),c=v(t);if(c.length===0){U("No valid employees found in CSV","Please check the file format");return}const x=await F(`/clients/${r.id}/employees/import`,{method:"POST",body:JSON.stringify({employees:c})});E(x),x.errors&&x.errors.length>0?U(`Imported ${x.imported} employees with ${x.errors.length} errors`,"Check the results below"):B(`Successfully imported ${x.imported} employees`),g()}catch(t){U("Import failed",t instanceof Error?t.message:"Unknown error")}finally{i(!1)}}},h=()=>{L(null),E(null),D.current&&(D.current.value="")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(Z,{className:"w-5 h-5 text-[#D91C81] mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"How to Upload Employee Data"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"Download the CSV template below"}),e.jsx("li",{children:"Fill in your employee data following the template format"}),e.jsx("li",{children:"Include these required fields: email, employeeId, name"}),e.jsx("li",{children:"Optional fields for site mapping: department, country, region, location"}),e.jsx("li",{children:"Upload the completed CSV file"}),e.jsx("li",{children:"Review the import results and configure site mapping rules if needed"})]})]})]}),e.jsxs(y,{onClick:m,variant:"outline",className:"gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"Download CSV Template"]})]})}),e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Upload Employee CSV File"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-[#D91C81] transition-colors",children:[e.jsx("input",{ref:D,type:"file",accept:".csv",onChange:T,className:"hidden",id:"employee-csv-upload"}),e.jsxs("label",{htmlFor:"employee-csv-upload",className:"cursor-pointer",children:[e.jsx(H,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-600",children:"CSV files only (Max 10MB)"})]})]}),S&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[(S.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsx(y,{onClick:M,disabled:!S||a,className:"w-full bg-[#D91C81] hover:bg-[#B01669] text-white",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Import Employees"]})})]})]})}),N&&e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Import Results"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-900",children:"Imported"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:N.imported})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(z,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-900",children:"Updated"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:N.updated})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(se,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Skipped"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.skipped})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(G,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-xs font-medium text-red-900",children:"Errors"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:((R=N.errors)==null?void 0:R.length)||0})]})]}),N.errors&&N.errors.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Error Details:"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:N.errors.map((t,c)=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm",children:[e.jsxs("span",{className:"font-medium text-red-900",children:["Row ",t.row,":"]})," ",e.jsxs("span",{className:"text-red-700",children:[t.field," - ",t.message]})]},c))})]}),N.success&&!((b=N.errors)!=null&&b.length)&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Import completed successfully!"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"All employees have been imported. You can now configure site mapping rules to automatically assign employees to sites."})]})]})})]})}),e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"CSV Field Reference"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700",children:"Field Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700",children:"Required"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700",children:"Example"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"email"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-red-100 text-red-800 text-xs",children:"Required"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Employee email address"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"john.doe@company.com"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"employeeId"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-red-100 text-red-800 text-xs",children:"Required"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Unique employee identifier"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"EMP001"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"name"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-red-100 text-red-800 text-xs",children:"Required"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Full name"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"John Doe"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"department"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-blue-100 text-blue-800 text-xs",children:"Optional"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Department name (for mapping)"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Engineering"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"country"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-blue-100 text-blue-800 text-xs",children:"Optional"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Country (for mapping)"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"USA"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"region"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-blue-100 text-blue-800 text-xs",children:"Optional"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Region (for mapping)"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"West"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"location"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-blue-100 text-blue-800 text-xs",children:"Optional"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Office location (for mapping)"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"San Francisco"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:"serialCard"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(f,{className:"bg-blue-100 text-blue-800 text-xs",children:"Optional"})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"Serial card number for validation"}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:"CARD12345"})]})]})]})})]})})]})}function ve({client:r,onConfigUpdated:g}){const[a,i]=d.useState({clientId:r.id,enabled:!1,host:"",port:22,username:"",authMethod:"password",remotePath:"/employee-data",filePattern:"employees-*.csv",schedule:{enabled:!1,frequency:"daily",time:"02:00"},processing:{archivePath:"/employee-data/archive",deleteAfterImport:!1,notifyOnSuccess:!0,notifyOnFailure:!0},status:"inactive"}),[N,E]=d.useState(!0),[S,L]=d.useState(!1),[D,m]=d.useState(!1),[v,T]=d.useState(null);d.useEffect(()=>{M()},[r.id]);const M=async()=>{E(!0);try{const t=await F(`/clients/${r.id}/sftp-config`);t.config&&i(t.config)}catch{le.log("No SFTP config found, using defaults")}finally{E(!1)}},h=async()=>{try{L(!0),await F(`/erp/connections/${r.id}/sftp-config`,{method:"PUT",body:JSON.stringify(a)}),$.success("SFTP configuration saved successfully"),g(),M()}catch(t){$.error(`Failed to save configuration: ${t instanceof Error?t.message:"Unknown error"}`)}finally{L(!1)}},R=async()=>{try{m(!0),T(null);const t=await F(`/erp/connections/${r.id}/sftp-test`,{method:"POST"});T(t),t.success?$.success("SFTP connection successful!"):$.error(`Connection failed: ${t.message}`)}catch(t){T({success:!1,message:t instanceof Error?t.message:"Unknown error"}),$.error(`Test failed: ${t instanceof Error?t.message:"Unknown error"}`)}finally{m(!1)}},b=async()=>{try{$.info("Starting SFTP sync..."),await F(`/erp/connections/${r.id}/sync`,{method:"POST",body:JSON.stringify({method:"sftp"})}),g()}catch(t){$.error(`Sync failed: ${t instanceof Error?t.message:"Unknown error"}`)}};return N?e.jsx(p,{children:e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(O,{className:"w-8 h-8 animate-spin text-[#D91C81] mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(te,{className:"w-6 h-6 text-[#D91C81] mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"SFTP Automated Import"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure automated employee data imports from your SFTP server"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{checked:a.enabled,onCheckedChange:t=>i({...a,enabled:t})}),e.jsx(f,{className:a.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:a.enabled?"Enabled":"Disabled"})]})]})})}),e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Connection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"host",children:"SFTP Host"}),e.jsx(A,{id:"host",value:a.host,onChange:t=>i({...a,host:t.target.value}),placeholder:"sftp.example.com"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"port",children:"Port"}),e.jsx(A,{id:"port",type:"number",value:a.port,onChange:t=>i({...a,port:parseInt(t.target.value)||22})})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"username",children:"Username"}),e.jsx(A,{id:"username",value:a.username,onChange:t=>i({...a,username:t.target.value}),placeholder:"sftp-user"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"authMethod",children:"Authentication Method"}),e.jsxs("select",{id:"authMethod",value:a.authMethod,onChange:t=>i({...a,authMethod:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"password",children:"Password"}),e.jsx("option",{value:"key",children:"Private Key"})]})]}),a.authMethod==="password"?e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsx(A,{id:"password",type:"password",value:a.password||"",onChange:t=>i({...a,password:t.target.value}),placeholder:"••••••••"})]}):e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(j,{htmlFor:"privateKey",children:"Private Key"}),e.jsx("textarea",{id:"privateKey",value:a.privateKey||"",onChange:t=>i({...a,privateKey:t.target.value}),placeholder:"-----BEGIN RSA PRIVATE KEY-----",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none font-mono text-sm",rows:6})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(y,{onClick:R,variant:"outline",disabled:D||!a.host||!a.username,className:"gap-2",children:D?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4"}),"Test Connection"]})})}),v&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${v.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[v.success?e.jsx(z,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(de,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${v.success?"text-green-900":"text-red-900"}`,children:v.success?"Connection Successful":"Connection Failed"}),e.jsx("p",{className:`text-xs mt-1 ${v.success?"text-green-700":"text-red-700"}`,children:v.message})]})]})]})}),e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"File Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"remotePath",children:"Remote Path"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(A,{id:"remotePath",value:a.remotePath,onChange:t=>i({...a,remotePath:t.target.value}),placeholder:"/employee-data",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"filePattern",children:"File Pattern"}),e.jsx(A,{id:"filePattern",value:a.filePattern,onChange:t=>i({...a,filePattern:t.target.value}),placeholder:"employees-*.csv"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Use * as wildcard (e.g., employees-*.csv)"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"archivePath",children:"Archive Path"}),e.jsx(A,{id:"archivePath",value:a.processing.archivePath,onChange:t=>i({...a,processing:{...a.processing,archivePath:t.target.value}}),placeholder:"/employee-data/archive"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx(W,{checked:a.processing.deleteAfterImport,onCheckedChange:t=>i({...a,processing:{...a.processing,deleteAfterImport:t}})}),e.jsx(j,{children:"Delete files after import"})]})]})]})}),e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Sync Schedule"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{checked:a.schedule.enabled,onCheckedChange:t=>i({...a,schedule:{...a.schedule,enabled:t}})}),e.jsx("span",{className:"text-sm text-gray-600",children:a.schedule.enabled?"Enabled":"Disabled"})]})]}),a.schedule.enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"frequency",children:"Frequency"}),e.jsxs("select",{id:"frequency",value:a.schedule.frequency,onChange:t=>i({...a,schedule:{...a.schedule,frequency:t.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"})]})]}),a.schedule.frequency!=="hourly"&&e.jsxs("div",{children:[e.jsx(j,{htmlFor:"time",children:"Time"}),e.jsx(A,{id:"time",type:"time",value:a.schedule.time||"",onChange:t=>i({...a,schedule:{...a.schedule,time:t.target.value}})})]}),a.schedule.frequency==="weekly"&&e.jsxs("div",{children:[e.jsx(j,{htmlFor:"dayOfWeek",children:"Day of Week"}),e.jsxs("select",{id:"dayOfWeek",value:a.schedule.dayOfWeek||1,onChange:t=>i({...a,schedule:{...a.schedule,dayOfWeek:parseInt(t.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:1,children:"Monday"}),e.jsx("option",{value:2,children:"Tuesday"}),e.jsx("option",{value:3,children:"Wednesday"}),e.jsx("option",{value:4,children:"Thursday"}),e.jsx("option",{value:5,children:"Friday"}),e.jsx("option",{value:6,children:"Saturday"}),e.jsx("option",{value:0,children:"Sunday"})]})]})]}),a.lastSync&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-900",children:["Last sync: ",new Date(a.lastSync).toLocaleString()]})]})]})}),e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{children:"Notify on successful sync"}),e.jsx(W,{checked:a.processing.notifyOnSuccess,onCheckedChange:t=>i({...a,processing:{...a.processing,notifyOnSuccess:t}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{children:"Notify on sync failure"}),e.jsx(W,{checked:a.processing.notifyOnFailure,onCheckedChange:t=>i({...a,processing:{...a.processing,notifyOnFailure:t}})})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{onClick:h,disabled:S,className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:S?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})}),e.jsxs(y,{onClick:b,variant:"outline",disabled:!a.enabled||!(v!=null&&v.success),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Run Manual Sync"]})]})]})}const Y={async set(r,g){await F("/kv",{method:"PUT",body:JSON.stringify({key:r,value:g})})},async get(r){try{return(await F(`/kv/${encodeURIComponent(r)}`)).value??null}catch{return null}},async del(r){await F(`/kv/${encodeURIComponent(r)}`,{method:"DELETE"})}},be={async get(r){return F(r)},async post(r,g){return F(r,{method:"POST",body:g?JSON.stringify(g):void 0})},async put(r,g){return F(r,{method:"PUT",body:g?JSON.stringify(g):void 0})},async del(r){return F(r,{method:"DELETE"})}};function we({client:r,sites:g,onRulesUpdated:a}){const[i,N]=d.useState([]),[E,S]=d.useState(!0),[L,D]=d.useState(!1),[m,v]=d.useState(null),[T,M]=d.useState(!1),[h,R]=d.useState({clientId:r.id,siteId:"",priority:1,conditions:[{field:"country",operator:"equals",value:""}],isActive:!0});d.useEffect(()=>{b()},[r.id]);const b=async()=>{S(!0);try{const{rules:l}=await F(`/clients/${r.id}/mapping-rules`);N(l)}catch(l){U("Failed to load mapping rules",l instanceof Error?l.message:"Unknown error")}finally{S(!1)}},t=()=>{R({clientId:r.id,siteId:"",priority:i.length+1,conditions:[{field:"country",operator:"equals",value:""}],isActive:!0}),v(null),D(!0)},c=l=>{R(l),v(l),D(!0)},x=async()=>{if(m)try{const l=m.id?`site_mapping_rule:${m.id}`:`site_mapping_rule:${Date.now()}`,n={...m,id:m.id||`rule_${Date.now()}`,updatedAt:new Date().toISOString()};await Y.set(l,n),B(m.id?"Rule updated":"Rule created","Site mapping rule saved successfully"),b(),D(!1)}catch(l){U("Failed to save rule",l instanceof Error?l.message:"Unknown error")}},P=async l=>{if(window.confirm("Are you sure you want to delete this mapping rule?"))try{await Y.del(`site_mapping_rule:${l}`),B("Mapping rule deleted successfully"),b()}catch(n){U("Failed to delete rule",n instanceof Error?n.message:"Unknown error")}},w=async l=>{try{const n={...l,isActive:!l.isActive};await Y.set(`site_mapping_rule:${l.id}`,n),B(`Rule ${l.isActive?"disabled":"enabled"}`),b()}catch(n){U("Failed to update rule",n instanceof Error?n.message:"Unknown error")}},q=async()=>{try{M(!0),await be.post("erp/site-mappings/apply-rules",{erpConnectionId:r.id}),a()}catch(l){U("Failed to apply rules",l instanceof Error?l.message:"Unknown error")}finally{M(!1)}},s=()=>{R({...h,conditions:[...h.conditions,{field:"country",operator:"equals",value:""}]})},k=l=>{R({...h,conditions:h.conditions.filter((n,o)=>o!==l)})},I=(l,n)=>{R({...h,conditions:h.conditions.map((o,C)=>C===l?{...o,...n}:o)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J,{className:"w-6 h-6 text-[#D91C81] mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Site Mapping Rules"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically assign employees to sites based on their attributes like country, department, or region"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:q,disabled:T||i.length===0,variant:"outline",size:"sm",children:T?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2 animate-spin"}),"Applying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Apply Rules"]})}),e.jsxs(y,{onClick:t,className:"bg-[#D91C81] hover:bg-[#B01669] text-white",size:"sm",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Add Rule"]})]})]})})}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-3",children:[e.jsx(se,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"How Mapping Rules Work"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[e.jsx("li",{children:"Rules are evaluated in priority order (lower numbers first)"}),e.jsx("li",{children:"All conditions in a rule must match for an employee to be mapped"}),e.jsx("li",{children:"Once an employee matches a rule, they are assigned to that site"}),e.jsx("li",{children:'Click "Apply Rules" to run the mapping process on all employees'})]})]})]}),E?e.jsx(p,{children:e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(O,{className:"w-8 h-8 animate-spin text-[#D91C81] mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading mapping rules..."})]})}):i.length===0?e.jsx(p,{children:e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(J,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Mapping Rules"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first mapping rule to automatically assign employees to sites"}),e.jsxs(y,{onClick:t,className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Create First Rule"]})]})}):e.jsx("div",{className:"space-y-3",children:i.sort((l,n)=>l.priority-n.priority).map(l=>{const n=g.find(o=>o.id===l.siteId);return e.jsx(p,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(f,{className:"bg-gray-100 text-gray-700 text-xs",children:["Priority ",l.priority]}),e.jsx(f,{className:l.isActive?"bg-green-100 text-green-800 text-xs":"bg-gray-100 text-gray-600 text-xs",children:l.isActive?"Active":"Inactive"}),n&&e.jsxs(f,{className:"bg-blue-100 text-blue-800 text-xs",children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),n.name]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Map employees to ",e.jsx("span",{className:"text-[#D91C81]",children:(n==null?void 0:n.name)||"Unknown Site"})," when:"]}),l.conditions.map((o,C)=>e.jsxs("div",{className:"text-sm text-gray-600 ml-4",children:[C>0&&e.jsx("span",{className:"font-semibold text-gray-900",children:"AND "}),e.jsx("span",{className:"font-medium",children:o.field})," ",e.jsx("span",{className:"text-gray-500",children:o.operator})," ",e.jsxs("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:['"',o.value,'"']})]},C))]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(y,{onClick:()=>w(l),variant:"outline",size:"sm",children:l.isActive?"Disable":"Enable"}),e.jsx(y,{onClick:()=>c(l),variant:"outline",size:"sm",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(y,{onClick:()=>l.id&&P(l.id),variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",children:e.jsx(fe,{className:"w-4 h-4"})})]})]})})},l.id)})}),e.jsx(he,{open:L,onOpenChange:D,children:e.jsxs(pe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ue,{children:e.jsx(ge,{children:m?"Edit Mapping Rule":"Create Mapping Rule"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteId",children:"Target Site *"}),e.jsxs("select",{id:"siteId",value:h.siteId,onChange:l=>R({...h,siteId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"",children:"Select a site..."}),g.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"priority",children:"Priority"}),e.jsx(A,{id:"priority",type:"number",min:1,value:h.priority,onChange:l=>R({...h,priority:parseInt(l.target.value)||1})}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Lower numbers = higher priority"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(j,{children:"Conditions (All must match)"}),e.jsxs(y,{onClick:s,variant:"outline",size:"sm",type:"button",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Add Condition"]})]}),e.jsx("div",{className:"space-y-2",children:h.conditions.map((l,n)=>e.jsxs("div",{className:"flex gap-2 items-start p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[e.jsx("div",{children:e.jsxs("select",{value:l.field,onChange:o=>I(n,{field:o.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:border-[#D91C81] outline-none",children:[e.jsx("option",{value:"country",children:"Country"}),e.jsx("option",{value:"region",children:"Region"}),e.jsx("option",{value:"department",children:"Department"}),e.jsx("option",{value:"location",children:"Location"})]})}),e.jsx("div",{children:e.jsxs("select",{value:l.operator,onChange:o=>I(n,{operator:o.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:border-[#D91C81] outline-none",children:[e.jsx("option",{value:"equals",children:"Equals"}),e.jsx("option",{value:"contains",children:"Contains"}),e.jsx("option",{value:"startsWith",children:"Starts With"}),e.jsx("option",{value:"endsWith",children:"Ends With"})]})}),e.jsx("div",{children:e.jsx(A,{value:l.value,onChange:o=>I(n,{value:o.target.value}),placeholder:"Value",className:"text-sm"})})]}),h.conditions.length>1&&e.jsx(y,{onClick:()=>k(n),variant:"outline",size:"sm",type:"button",className:"text-red-600 hover:bg-red-50",children:e.jsx(G,{className:"w-4 h-4"})})]},n))})]})]}),e.jsxs(je,{children:[e.jsx(y,{onClick:()=>D(!1),variant:"outline",children:"Cancel"}),e.jsxs(y,{onClick:x,className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Save Rule"]})]})]})})]})}function ls(){const{currentClient:r,sites:g,isLoading:a}=re(),[i,N]=d.useState("employees"),[E,S]=d.useState([]),[L,D]=d.useState(!1),[m,v]=d.useState(""),[T,M]=d.useState("all"),[h,R]=d.useState("all"),[b,t]=d.useState({total:0,active:0,inactive:0,mapped:0,unmapped:0}),c=r?g.filter(s=>s.clientId===r.id):g;d.useEffect(()=>{r?x():S([])},[r]);const x=async()=>{if(r){D(!0);try{const{employees:s}=await F(`/clients/${r.id}/employees`);S(s);const k=s.length,I=s.filter(C=>C.status==="active").length,l=s.filter(C=>C.status==="inactive").length,n=s.filter(C=>C.siteId).length,o=s.filter(C=>!C.siteId).length;t({total:k,active:I,inactive:l,mapped:n,unmapped:o})}catch(s){U("Failed to load employees",s instanceof Error?s.message:"Unknown error"),S([])}finally{D(!1)}}},P=()=>{if(w.length===0){U("No employees to export","");return}const s=[["Name","Email","Employee ID","Serial Card","Department","Country","Region","Location","Site","Status"].join(","),...w.map(n=>{var o;return[n.name||"",n.email||"",n.employeeId||"",n.serialCard||"",n.department||"",n.country||"",n.region||"",n.location||"",n.siteId?((o=c.find(C=>C.id===n.siteId))==null?void 0:o.name)||"Unknown":"Not Mapped",n.status].join(",")})].join(`
`),k=new Blob([s],{type:"text/csv"}),I=URL.createObjectURL(k),l=document.createElement("a");l.href=I,l.download=`employees-${r==null?void 0:r.name}-${new Date().toISOString().split("T")[0]}.csv`,l.click(),URL.revokeObjectURL(I),B("Employees exported successfully")},w=E.filter(s=>{var n,o,C,X,Q;const k=((n=s.name)==null?void 0:n.toLowerCase().includes(m.toLowerCase()))||((o=s.email)==null?void 0:o.toLowerCase().includes(m.toLowerCase()))||((C=s.employeeId)==null?void 0:C.toLowerCase().includes(m.toLowerCase()))||((X=s.department)==null?void 0:X.toLowerCase().includes(m.toLowerCase()))||((Q=s.country)==null?void 0:Q.toLowerCase().includes(m.toLowerCase())),I=T==="all"||s.status===T,l=h==="all"||h==="unmapped"&&!s.siteId||s.siteId===h;return k&&I&&l}),q=[{id:"employees",label:"All Employees",icon:_,count:b.total},{id:"mapping",label:"Site Mapping Rules",icon:J,badge:`${b.unmapped} unmapped`},{id:"manual",label:"Manual Upload",icon:H},{id:"sftp",label:"SFTP Integration",icon:te},{id:"hris",label:"HRIS Integration",icon:ne}];return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Employee Management"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Manage employee data and site assignments"}),r&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(f,{className:"bg-[#D91C81] text-white px-3 py-1",children:[e.jsx(V,{className:"w-3 h-3 mr-1.5"}),r.name]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[c.length," ",c.length===1?"site":"sites"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{variant:"outline",size:"sm",onClick:x,className:"gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(y,{onClick:P,variant:"outline",size:"sm",className:"gap-2",disabled:E.length===0,children:[e.jsx(ee,{className:"w-4 h-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(p,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.total}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Employees"})]})]})})}),e.jsx(p,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.active}),e.jsx("div",{className:"text-xs text-gray-600",children:"Active"})]})]})})}),e.jsx(p,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.inactive}),e.jsx("div",{className:"text-xs text-gray-600",children:"Inactive"})]})]})})}),e.jsx(p,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(J,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.mapped}),e.jsx("div",{className:"text-xs text-gray-600",children:"Mapped to Sites"})]})]})})}),e.jsx(p,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(J,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.unmapped}),e.jsx("div",{className:"text-xs text-gray-600",children:"Unmapped"})]})]})})})]}),e.jsx(p,{className:"p-1",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:q.map(s=>{const k=s.icon;return e.jsxs("button",{onClick:()=>N(s.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-md transition-all ${i===s.id?"bg-[#D91C81] text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:s.label}),s.count!==void 0&&e.jsx(f,{className:i===s.id?"bg-white text-[#D91C81]":"bg-gray-200 text-gray-700",children:s.count}),s.badge&&e.jsx(f,{className:i===s.id?"bg-white text-[#D91C81]":"bg-orange-100 text-orange-700",children:s.badge})]},s.id)})})}),i==="employees"&&e.jsx(p,{children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, employee ID, department, or country...",value:m,onChange:s=>v(s.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:T,onChange:s=>M(s.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:h,onChange:s=>R(s.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",children:[e.jsx("option",{value:"all",children:"All Sites"}),e.jsx("option",{value:"unmapped",children:"Unmapped"}),c.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),L?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-8 h-8 animate-spin text-[#D91C81] mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading employees..."})]}):w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m?"Try adjusting your search or filters":"Get started by uploading employee data"}),!m&&e.jsxs(y,{onClick:()=>N("manual"),className:"bg-[#D91C81] hover:bg-[#B01669] text-white",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Upload Employees"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Employee ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Site Assignment"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(s=>{const k=s.siteId?c.find(I=>I.id===s.siteId):null;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.email})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-900",children:s.employeeId})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm text-gray-900",children:s.department||"-"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-900",children:s.country||"-"}),s.region&&e.jsx("div",{className:"text-gray-600 text-xs",children:s.region})]})}),e.jsx("td",{className:"px-4 py-4",children:k?e.jsxs(f,{className:"bg-green-100 text-green-800",children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),k.name]}):e.jsx(f,{className:"bg-orange-100 text-orange-800",children:"Not Mapped"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx(f,{className:s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:s.status})})]},s.id)})})]})}),w.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",w.length," of ",E.length," employees"]})]})}),i==="mapping"&&e.jsx(we,{client:r,sites:c,onRulesUpdated:x}),i==="manual"&&e.jsx(Ne,{client:r,onUploadComplete:x}),i==="sftp"&&e.jsx(ve,{client:r,onConfigUpdated:x}),i==="hris"&&e.jsx(me,{client:r,sites:c.map(s=>({...s,isActive:s.status==="active"})),onSyncComplete:x})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(V,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Client Selected"}),e.jsx("p",{className:"text-gray-600",children:"Please select a client to manage employees"})]})})}export{ls as EmployeeManagement};
