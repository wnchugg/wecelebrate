import{u as b,r as i,j as e,D as x,g as p,k as j}from"./index-C7jV57L-.js";import{C as f}from"./circle-check-big-DXQHMGWC.js";import{C as u}from"./circle-alert-LytUjhL9.js";import{L as N}from"./loader-circle-B_Aj62vu.js";function D(){const t=b(),[o,d]=i.useState(!1),[s,c]=i.useState(null),[r,n]=i.useState(null),h=async()=>{d(!0),n(null),c(null);try{const a=p(),g=j(a);console.log("Calling initial seed endpoint...");const m=await fetch(`${g}/dev/initial-seed`,{method:"POST",headers:{Authorization:`Bearer ${a.supabaseAnonKey}`,"X-Environment-ID":a.id,"Content-Type":"application/json"}}),l=await m.json();m.ok&&l.success?(c(l),console.log("Database seeded successfully:",l)):(n(l.error||"Failed to seed database"),console.error("Seed failed:",l))}catch(a){n(a.message||"Network error occurred"),console.error("Seed error:",a)}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-[#D91C81] to-[#B71569] rounded-2xl mb-4",children:e.jsx(x,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Initialize Database"}),e.jsx("p",{className:"text-gray-600",children:"Set up your JALA 2 platform with demo data and admin account"})]}),s&&s.success&&e.jsx("div",{className:"mb-6 p-6 bg-green-50 border-2 border-green-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Database Initialized Successfully!"}),e.jsx("p",{className:"text-green-700 text-sm mb-4",children:s.message}),s.credentials&&e.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-2",children:"Admin Credentials:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded font-mono text-gray-900",children:s.credentials.email})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Password:"}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded font-mono text-gray-900",children:s.credentials.password})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:s.credentials.note})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx("button",{onClick:()=>t("/admin"),className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Go to Admin Login"}),e.jsx("button",{onClick:()=>t("/"),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Go to Homepage"})]})]})]})}),r&&e.jsx("div",{className:"mb-6 p-6 bg-amber-50 border-2 border-amber-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:"Already Initialized"}),e.jsx("p",{className:"text-amber-700 text-sm mb-3",children:r}),e.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"If you need to reset the database, please login as admin and use the reseed functionality."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t("/admin"),className:"flex-1 bg-amber-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-amber-700 transition-colors",children:"Go to Admin Login"}),e.jsx("button",{onClick:()=>t("/"),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Go to Homepage"})]})]})]})}),!s&&!r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"What will be created:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#D91C81] font-bold",children:"•"}),e.jsx("span",{children:"Admin account (admin@example.com / Admin123!)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#D91C81] font-bold",children:"•"}),e.jsx("span",{children:"Demo stakeholder client with 3 use-case sites"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#D91C81] font-bold",children:"•"}),e.jsx("span",{children:"15 sample gifts across multiple categories"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#D91C81] font-bold",children:"•"}),e.jsx("span",{children:"Demo employees with validation credentials"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#D91C81] font-bold",children:"•"}),e.jsx("span",{children:"Gift assignments to all demo sites"})]})]})]}),e.jsx("button",{onClick:h,disabled:o,className:"w-full bg-gradient-to-r from-[#D91C81] to-[#B71569] text-white px-6 py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-5 h-5 animate-spin"}),"Initializing Database..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-5 h-5"}),"Initialize Database Now"]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>t("/"),className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:"← Back to Homepage"})})]})]}),e.jsx("div",{className:"mt-6 bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-600 text-center",children:[e.jsx("strong",{children:"Note:"})," This endpoint can only be used once when the database is empty. After initialization, use the admin panel to manage data."]})})]})})}export{D as InitializeDatabase};
