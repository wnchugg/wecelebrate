import{u as N,r as a,j as e,s as x,w as C,p as A}from"./index-BKvtyMRF.js";import{a as k}from"./errorHandling-D_CdsDrI.js";function S(){const c=N(),[i,p]=a.useState(""),[l,b]=a.useState(""),[o,h]=a.useState(""),[d,g]=a.useState(""),[r,m]=a.useState(!1),[u,n]=a.useState(""),f=async s=>{if(s.preventDefault(),n(""),!i||!l||!o||!d){n("All fields are required");return}if(o!==d){n("Passwords do not match");return}if(o.length<8){n("Password must be at least 8 characters");return}const j=x(i.toLowerCase().trim()),w=x(l.trim()),y=o;m(!0);try{const t=await fetch(`https://${C}.supabase.co/functions/v1/make-server-6fcaeea3/bootstrap/create-admin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`,"X-Environment-ID":"development"},body:JSON.stringify({email:j,username:w,password:y})}),v=await t.json();if(!t.ok)throw new Error(v.error||"Failed to create admin user");k("Admin user created successfully!"),setTimeout(()=>{c("/admin/login")},1e3)}catch(t){console.error("Bootstrap error:",t),n(t instanceof Error?t.message:"Failed to create admin user")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1B2A5E] via-[#2A3F7E] to-[#D91C81] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-block p-3 bg-[#D91C81] bg-opacity-10 rounded-full mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-[#D91C81]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h1",{className:"text-3xl font-bold text-[#1B2A5E] mb-2",children:"Create First Admin Account"}),e.jsx("p",{className:"text-gray-600",children:"Bootstrap your wecelebrate platform by creating the first admin user"})]}),u&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-800 text-sm",children:u})}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:i,onChange:s=>p(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"admin@example.com",required:!0,disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:l,onChange:s=>b(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"admin",required:!0,disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:s=>h(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"••••••••",required:!0,disabled:r,minLength:8}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:d,onChange:s=>g(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",placeholder:"••••••••",required:!0,disabled:r,minLength:8})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-[#D91C81] text-white py-3 rounded-lg font-medium hover:bg-[#B71569] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating Admin...":"Create Admin Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>c("/admin/login"),className:"text-[#D91C81] hover:text-[#B71569] text-sm font-medium",children:"← Back to Login"})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-xs",children:[e.jsx("strong",{children:"Note:"})," This creates the first super admin account with full access to the platform. You'll be able to create additional users after logging in."]})})]})})}export{S as BootstrapAdmin,S as default};
