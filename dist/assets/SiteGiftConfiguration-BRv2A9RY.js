import{n as Ne,j as e,T as Ce,r as g,l as m,X as q,w as Se,am as Pe,a3 as ae,C as D,J as Z,af as we,S as De,t as te}from"./index-o4gpx1In.js";import{u as ke,a as Le,D as Ge,H as Ie}from"./index-D5cVdKFk.js";import{C as L,d as G,a as E,b as R,c as F}from"./card-DDEBIrtV.js";import{I as K}from"./input-BLpjjWZ_.js";import{Z as Ee}from"./zap-4fobd8Mo.js";import{I as me}from"./info-CRJhujo5.js";import{B as W}from"./badge-C5gk6m_5.js";import{G as Re}from"./grip-vertical-CGTxkKJR.js";import{P as J}from"./package-DfTbr66P.js";import{E as re}from"./eye-DVmOJ1xJ.js";import{F as ie,R as le}from"./rocket-BJJ3Gxu3.js";import{P as $e}from"./plus-Dfsll2s7.js";import{P as Ae}from"./pen-CHPRf3yI.js";import{T as ne}from"./trash-2-BSQpo9Z7.js";import{A as Te}from"./arrow-up-down-TL84CSqf.js";import{G as Fe,L as Ke}from"./list-CJv9LLbF.js";import{C as Me}from"./circle-alert-Bm1NT70L.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Be=Ne("shield-alert",Ue),oe={USD:{code:"USD",symbol:"$",name:"US Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},EUR:{code:"EUR",symbol:"â‚¬",name:"Euro",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:".",decimalSeparator:","},GBP:{code:"GBP",symbol:"Â£",name:"British Pound",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},CAD:{code:"CAD",symbol:"C$",name:"Canadian Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},AUD:{code:"AUD",symbol:"A$",name:"Australian Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},JPY:{code:"JPY",symbol:"Â¥",name:"Japanese Yen",decimalPlaces:0,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},CNY:{code:"CNY",symbol:"Â¥",name:"Chinese Yuan",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},CHF:{code:"CHF",symbol:"CHF",name:"Swiss Franc",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:"'",decimalSeparator:"."},SEK:{code:"SEK",symbol:"kr",name:"Swedish Krona",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:" ",decimalSeparator:","},NOK:{code:"NOK",symbol:"kr",name:"Norwegian Krone",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:" ",decimalSeparator:","},DKK:{code:"DKK",symbol:"kr",name:"Danish Krone",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:".",decimalSeparator:","},INR:{code:"INR",symbol:"â‚¹",name:"Indian Rupee",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},MXN:{code:"MXN",symbol:"$",name:"Mexican Peso",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},BRL:{code:"BRL",symbol:"R$",name:"Brazilian Real",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:".",decimalSeparator:","},ZAR:{code:"ZAR",symbol:"R",name:"South African Rand",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},SGD:{code:"SGD",symbol:"S$",name:"Singapore Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},HKD:{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},NZD:{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},KRW:{code:"KRW",symbol:"â‚©",name:"South Korean Won",decimalPlaces:0,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},PLN:{code:"PLN",symbol:"zÅ‚",name:"Polish ZÅ‚oty",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:" ",decimalSeparator:","},THB:{code:"THB",symbol:"à¸¿",name:"Thai Baht",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."}};function xe(r){return oe[r.toUpperCase()]||oe.USD}function $(r,d,A){const I=xe(d),{symbol:n,decimalPlaces:c,symbolPosition:b,thousandsSeparator:N,decimalSeparator:y}=I,x=Math.round(r*Math.pow(10,c))/Math.pow(10,c),[h,a]=x.toFixed(c).split(".");let u=h.replace(/\B(?=(\d{3})+(?!\d))/g,N);return c>0&&(u+=y+a),b==="before"?`${n}${u}`:`${u} ${n}`}function He(r){return xe(r).symbol}function ce({gift:r,size:d="sm",orientation:A="horizontal",showDetails:I=!1}){var l,u,j,p,C,P,k,f,v;const{compliance:n}=r;if(!n)return null;const c=(l=n.prop65)==null?void 0:l.required,b=(u=n.pfas)==null?void 0:u.containsPFAS,N=(j=n.energyCompliance)==null?void 0:j.regulationRequired,y=n.restrictedStates&&n.restrictedStates.length>0;if(!c&&!b&&!N&&!y)return null;const x={sm:"text-xs px-1.5 py-0.5",md:"text-sm px-2 py-1",lg:"text-base px-3 py-1.5"},h={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},a=A==="horizontal"?"flex flex-wrap gap-1.5 items-center":"flex flex-col gap-1.5";return e.jsxs("div",{className:a,children:[c&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-amber-100 text-amber-900 border border-amber-300 rounded font-semibold ${x[d]}`,title:((p=n.prop65)==null?void 0:p.customWarning)||"California Proposition 65 Warning",children:[e.jsx(Ce,{className:h[d]}),e.jsx("span",{children:"PROP 65"})]}),b&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-red-100 text-red-900 border border-red-300 rounded font-semibold ${x[d]}`,title:((C=n.pfas)==null?void 0:C.warningMessage)||"Contains PFAS (Per- and Polyfluoroalkyl Substances)",children:[e.jsx(Be,{className:h[d]}),e.jsx("span",{children:"PFAS"}),((P=n.pfas)==null?void 0:P.pfasLevel)&&d!=="sm"&&e.jsxs("span",{className:"text-xs opacity-80",children:["(",n.pfas.pfasLevel.toUpperCase(),")"]})]}),N&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-green-100 text-green-900 border border-green-300 rounded font-semibold ${x[d]}`,title:`California Energy Compliance${(k=n.energyCompliance)!=null&&k.energyRating?`: ${n.energyCompliance.energyRating}`:""}`,children:[e.jsx(Ee,{className:h[d]}),e.jsx("span",{children:((f=n.energyCompliance)==null?void 0:f.energyRating)||"CEC"})]}),y&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-purple-100 text-purple-900 border border-purple-300 rounded font-semibold ${x[d]}`,title:`Restricted in: ${(v=n.restrictedStates)==null?void 0:v.join(", ")}`,children:[e.jsx(me,{className:h[d]}),e.jsx("span",{children:"RESTRICTED"})]}),n.certifications&&n.certifications.length>0&&I&&e.jsx("div",{className:`inline-flex items-center gap-1 bg-blue-100 text-blue-900 border border-blue-300 rounded font-semibold ${x[d]}`,children:e.jsx("span",{children:n.certifications.join(", ")})})]})}const de="GIFT_CARD";function _e({gift:r,index:d,moveGift:A,onEdit:I,onDelete:n,onPreview:c}){const b=g.useRef(null);m.debug("[DraggableGiftCard] Rendering card",{giftName:r.name,index:d});const[{handlerId:N},y]=ke({accept:de,collect(l){return{handlerId:l.getHandlerId()}},hover(l,u){var v;if(!b.current)return;const j=l.index,p=d;if(j===p)return;const C=(v=b.current)==null?void 0:v.getBoundingClientRect(),P=(C.bottom-C.top)/2,f=u.getClientOffset().y-C.top;j<p&&f<P||j>p&&f>P||(A(j,p),l.index=p)}}),[{isDragging:x},h]=Le({type:de,item:()=>(m.debug("[DraggableGiftCard] Starting drag",{giftName:r.name,index:d}),{id:r.id,index:d}),collect:l=>({isDragging:l.isDragging()}),end:(l,u)=>{m.debug("[DraggableGiftCard] Drag ended",{giftName:r.name})}}),a=x?.4:1;return h(y(b)),e.jsx("div",{ref:b,"data-handler-id":N,style:{opacity:a},className:"bg-white p-4 rounded-lg border-2 border-gray-200 hover:border-[#D91C81] transition-all group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"cursor-move text-gray-400 hover:text-[#D91C81] transition-colors mt-1",children:e.jsx(Re,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm truncate",children:r.name}),n&&e.jsx("button",{onClick:()=>n(r.id),className:"text-gray-400 hover:text-red-600 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{variant:"outline",className:"text-xs",children:r.category}),e.jsx("span",{className:"text-xs font-mono text-gray-500",children:r.sku}),e.jsxs("span",{className:"text-sm font-semibold text-[#D91C81]",children:["$",r.price.toFixed(2)]})]})]})]})})}function ds(){var se;const{currentSite:r}=Se(),{gifts:d,getSiteConfiguration:A,updateSiteConfiguration:I,getGiftsBySite:n}=Pe(),[c,b]=g.useState("draft"),[N,y]=g.useState(null),[x,h]=g.useState({siteId:(r==null?void 0:r.id)||"",assignmentStrategy:"all"}),a=c==="live"&&N||x,l=s=>{c==="draft"&&h(s)},[u,j]=g.useState("grid"),[p,C]=g.useState(""),[P,k]=g.useState(null),[f,v]=g.useState({id:"",name:"",minPrice:0,maxPrice:0}),[ge,V]=g.useState([]),[ze,Ye]=g.useState(!1),[X,Q]=g.useState(!1);g.useEffect(()=>{r&&ee()},[r]),g.useEffect(()=>{if(c==="draft"&&r){const s=setTimeout(()=>{he()},1e3);return()=>clearTimeout(s)}},[x,c]);const ee=async()=>{if(r)try{m.info("[SiteGiftConfiguration] Loading configuration",{siteId:r.id});const s=await ae(`/sites/${r.id}/gift-config`);if(m.debug("[SiteGiftConfiguration] Config response received",{hasConfig:!!s.config}),s.config)y(s.config),h(s.config),m.info("[SiteGiftConfiguration] Configuration loaded successfully");else{const t={siteId:r.id,assignmentStrategy:"all"};y(t),h(t),m.info("[SiteGiftConfiguration] No config found, using default")}}catch(s){m.error("[SiteGiftConfiguration] Error loading config",{error:s});const t={siteId:r.id,assignmentStrategy:"all"};y(t),h(t),m.info("[SiteGiftConfiguration] Error occurred, using default")}};g.useEffect(()=>{r&&n(r.id).then(V)},[r,n]);const he=async()=>{if(!(!r||!x))try{m.debug("[SiteGiftConfiguration] Auto-saving draft"),localStorage.setItem(`draft_config_${r.id}`,JSON.stringify(x))}catch(s){m.error("[SiteGiftConfiguration] Error auto-saving draft",{error:s})}},ue=async()=>{if(r){Q(!0);try{m.info("[SiteGiftConfiguration] Publishing configuration",{siteId:r.id});const s=await ae(`/sites/${r.id}/gift-config`,{method:"PUT",body:JSON.stringify(a)});m.info("[SiteGiftConfiguration] Publish successful"),I(a),await ee();const t=await n(r.id);V(t),m.debug("[SiteGiftConfiguration] Updated gifts",{count:t.length}),te.success("Site gift configuration published successfully")}catch(s){m.error("[SiteGiftConfiguration] Error publishing configuration",{error:s}),te.error("Failed to publish configuration. Check console for details.")}finally{Q(!1)}}},pe=()=>{const s={id:`level-${Date.now()}`,name:"New Level",minPrice:0,maxPrice:100};l({...a,priceLevels:[...a.priceLevels||[],s]})},fe=s=>{k(s.id),v(s)},be=()=>{if(!a.priceLevels)return;const s=a.priceLevels.map(t=>t.id===P?f:t);l({...a,priceLevels:s}),k(null)},je=s=>{if(!a.priceLevels)return;const t=a.priceLevels.filter(i=>i.id!==s);l({...a,priceLevels:t}),a.selectedLevelId===s&&l({...a,selectedLevelId:void 0,priceLevels:t})},M=s=>{const t=a.includedGiftIds||[];t.includes(s)?l({...a,includedGiftIds:t.filter(i=>i!==s)}):l({...a,includedGiftIds:[...t,s]})},ye=(s,t)=>{m.debug("[SiteGiftConfiguration] moveGift called",{dragIndex:s,hoverIndex:t});const i=[...a.includedGiftIds||[]];m.debug("[SiteGiftConfiguration] Before move",{giftIds:i});const[o]=i.splice(s,1);i.splice(t,0,o),m.debug("[SiteGiftConfiguration] After move",{giftIds:i}),l({...a,includedGiftIds:i})};if(!r)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(J,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Please select a site to configure gifts"})]});const w=r.settings.defaultCurrency||"USD",U=He(w),S=d.filter(s=>s.status==="active"),B=S.filter(s=>{if(!p)return!0;const t=p.toLowerCase().trim(),i=s.name.toLowerCase().includes(t)||s.sku.toLowerCase().includes(t)||s.category.toLowerCase().includes(t);let o=!1;const T=t.match(/^(\d+(?:\.\d+)?)\s*-\s*(\d+(?:\.\d+)?)$/);if(T){const[,Y,O]=T;o=s.price>=parseFloat(Y)&&s.price<=parseFloat(O)}const _=t.match(/^<\s*(\d+(?:\.\d+)?)$/);_&&(o=s.price<parseFloat(_[1]));const z=t.match(/^>\s*(\d+(?:\.\d+)?)$/);if(z&&(o=s.price>parseFloat(z[1])),!T&&!_&&!z){const Y=s.price.toFixed(2),O=$(s.price,w).toLowerCase();o=Y.includes(t)||O.includes(t)}return i||o});S.filter(s=>{var t;return(t=a.includedGiftIds)==null?void 0:t.includes(s.id)});const H=(a.includedGiftIds||[]).map(s=>S.find(t=>t.id===s)).filter(s=>s!==void 0),ve=(()=>{var s;switch(a.assignmentStrategy){case"all":return S.length;case"price_levels":if(a.selectedLevelId&&a.priceLevels){const t=a.priceLevels.find(i=>i.id===a.selectedLevelId);if(t)return S.filter(i=>i.price>=t.minPrice&&i.price<t.maxPrice).length}return 0;case"exclusions":return S.filter(t=>{var i,o;return!((i=a.excludedSkus)!=null&&i.includes(t.sku)||(o=a.excludedCategories)!=null&&o.includes(t.category))}).length;case"explicit":return((s=a.includedGiftIds)==null?void 0:s.length)||0;default:return 0}})();return m.debug("[SiteGiftConfiguration] Rendering",{configMode:c,hasLiveConfig:!!N,hasDraftConfig:!!x}),e.jsx(Ge,{backend:Ie,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{className:c==="draft"?"border-2 border-amber-400":"border-2 border-green-600",children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>b("live"),className:`flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all ${c==="live"?"bg-green-600 text-white shadow-md":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(re,{className:"w-4 h-4"}),"Live Site"]}),e.jsxs("button",{onClick:()=>b("draft"),className:`flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all ${c==="draft"?"bg-amber-500 text-white shadow-md":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(ie,{className:"w-4 h-4"}),"Draft Mode"]})]}),c==="live"&&e.jsxs(W,{className:"bg-green-100 text-green-800 border-green-300",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),"Viewing Live Configuration"]}),c==="draft"&&e.jsxs(W,{className:"bg-amber-100 text-amber-800 border-amber-300",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Editing Draft"]})]}),c==="draft"&&e.jsx(D,{onClick:ue,className:"bg-green-600 hover:bg-green-700 text-white",disabled:X,children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2",children:e.jsx(le,{className:"w-4 h-4"})}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Publish to Live"]})})]}),e.jsx("div",{className:"mt-3 text-sm text-gray-600",children:c==="live"?e.jsxs("p",{children:["ðŸ‘ï¸ You are viewing the ",e.jsx("strong",{children:"live configuration"})," that is currently active on the site. Switch to Draft Mode to make changes."]}):e.jsxs("p",{children:["âœï¸ You are editing the ",e.jsx("strong",{children:"draft configuration"}),". Changes are auto-saved but won't affect the live site until you publish."]})})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[e.jsx(me,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Product Catalog System"}),e.jsx("p",{children:"Configure which products from your global ERP catalog are available for this site. You can assign all products, filter by price levels, exclude specific SKUs/categories, or manually select specific products."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Site Currency:"})," ",w," (",U,")"]})]})]}),e.jsxs(L,{children:[e.jsxs(E,{children:[e.jsx(R,{children:"Assignment Strategy"}),e.jsx(F,{children:"Choose how products are assigned to this site"})]}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="all"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"all",checked:a.assignmentStrategy==="all",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"All Products"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Include all active products from the global catalog"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="price_levels"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"price_levels",checked:a.assignmentStrategy==="price_levels",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Price Levels"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Group products into price levels (e.g., Bronze, Silver, Gold) and assign a specific level to this site"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="exclusions"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"exclusions",checked:a.assignmentStrategy==="exclusions",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Exclusions"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Include all products EXCEPT specific SKUs or categories"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="explicit"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"explicit",checked:a.assignmentStrategy==="explicit",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Explicit Selection"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manually select specific products to include"})]})]})]})})]}),a.assignmentStrategy==="price_levels"&&e.jsxs(L,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Price Level Configuration"}),e.jsx(F,{children:"Create and manage price levels for product grouping"})]}),e.jsxs(D,{onClick:pe,className:"bg-[#D91C81] hover:bg-[#B71569] text-white",children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),"Add Level"]})]})}),e.jsxs(G,{className:"space-y-4",children:[(!a.priceLevels||a.priceLevels.length===0)&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[e.jsx(J,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No price levels configured"}),e.jsx(D,{onClick:()=>{l({...a,priceLevels:[{id:"bronze",name:"Bronze Level",minPrice:0,maxPrice:50},{id:"silver",name:"Silver Level",minPrice:50,maxPrice:100},{id:"gold",name:"Gold Level",minPrice:100,maxPrice:300}],selectedLevelId:"silver"})},variant:"outline",children:"Set Up Default Price Levels"})]}),a.priceLevels&&a.priceLevels.map(s=>{const t=S.filter(o=>o.price>=s.minPrice&&o.price<s.maxPrice),i=P===s.id;return e.jsx("div",{className:`p-4 border-2 rounded-lg transition-all ${a.selectedLevelId===s.id?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:i?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Level Name"}),e.jsx(K,{type:"text",value:f.name,onChange:o=>v({...f,name:o.target.value}),placeholder:"e.g., Gold Level"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Min Price (",U,")"]}),e.jsx(K,{type:"number",value:f.minPrice,onChange:o=>v({...f,minPrice:parseFloat(o.target.value)}),min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Max Price (",U,")"]}),e.jsx(K,{type:"number",value:f.maxPrice,onChange:o=>v({...f,maxPrice:parseFloat(o.target.value)}),min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:be,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsxs(D,{onClick:()=>k(null),size:"sm",variant:"outline",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("input",{type:"radio",name:"level",value:s.id,checked:a.selectedLevelId===s.id,onChange:()=>l({...a,selectedLevelId:s.id}),className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[$(s.minPrice,w)," - ",$(s.maxPrice,w)," â€¢ ",t.length," products"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:()=>fe(s),size:"sm",variant:"ghost",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx(D,{onClick:()=>je(s.id),size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ne,{className:"w-4 h-4"})})]})]})},s.id)})]})]}),a.assignmentStrategy==="exclusions"&&e.jsxs(L,{children:[e.jsxs(E,{children:[e.jsx(R,{children:"Exclusion Rules"}),e.jsx(F,{children:"Exclude specific categories or SKUs from this site"})]}),e.jsxs(G,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Excluded Categories"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:we.map(s=>{var t;return e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"checkbox",checked:(t=a.excludedCategories)==null?void 0:t.includes(s),onChange:i=>{const o=a.excludedCategories||[];i.target.checked?l({...a,excludedCategories:[...o,s]}):l({...a,excludedCategories:o.filter(T=>T!==s)})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:s})]},s)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Excluded SKUs"}),e.jsx("select",{multiple:!0,className:"w-full h-48 px-4 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",value:a.excludedSkus||[],onChange:s=>{const t=Array.from(s.target.selectedOptions,i=>i.value);l({...a,excludedSkus:t})},children:S.map(s=>e.jsxs("option",{value:s.sku,children:[s.sku," - ",s.name," (",$(s.price,w),")"]},s.id))}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Hold Ctrl/Cmd to select multiple SKUs"})]})]})]}),a.assignmentStrategy==="explicit"&&e.jsxs(e.Fragment,{children:[H.length>0&&e.jsxs(L,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5 text-[#D91C81]"}),"Selected Products (",H.length,")"]}),e.jsx(F,{children:"Drag to reorder â€¢ Click Ã— to remove"})]}),e.jsxs(D,{onClick:()=>l({...a,includedGiftIds:[]}),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),e.jsxs(G,{children:[e.jsx("div",{className:"space-y-3",children:H.map((s,t)=>e.jsx(_e,{gift:s,index:t,moveGift:ye,onRemove:M,showRemove:!0},s.id))}),e.jsx("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-900",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Click and drag any gift card to reorder. The order you set here is the order gifts will appear to users on the site."]})})]})]}),e.jsxs(L,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Product Catalog"}),e.jsx(F,{children:"Click on products to add them to your selection"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(K,{type:"text",placeholder:"Search by name, SKU, category, or price...",value:p,onChange:s=>C(s.target.value),className:"pl-10 w-80"}),p&&e.jsx("button",{onClick:()=>C(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1 border border-gray-200 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>j("grid"),className:`p-2 rounded ${u==="grid"?"bg-[#D91C81] text-white":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j("list"),className:`p-2 rounded ${u==="list"?"bg-[#D91C81] text-white":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Ke,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600 bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Search tips:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("span",{children:["â€¢ Name, SKU, or Category: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"wireless"})]}),e.jsxs("span",{children:["â€¢ Exact price: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"25.99"})]}),e.jsxs("span",{children:["â€¢ Price range: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"20-50"})]}),e.jsxs("span",{children:["â€¢ Less than: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"<50"})]}),e.jsxs("span",{children:["â€¢ Greater than: ",e.jsx("code",{className:"bg-white px-1 rounded",children:">100"})]})]})]})]}),e.jsxs(G,{children:[u==="grid"?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:B.map(s=>{var i;const t=(i=a.includedGiftIds)==null?void 0:i.includes(s.id);return e.jsxs("button",{onClick:()=>M(s.id),className:`group relative bg-white border-2 rounded-lg overflow-hidden hover:shadow-lg transition-all text-left ${t?"border-[#D91C81] ring-2 ring-pink-100":"border-gray-200 hover:border-[#D91C81]"}`,children:[t&&e.jsx("div",{className:"absolute top-2 right-2 z-10 bg-[#D91C81] text-white p-1 rounded-full",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm line-clamp-2 mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s.sku}),e.jsx("p",{className:"text-sm font-bold text-[#D91C81]",children:$(s.price,w)})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s.category}),e.jsx(ce,{gift:s,size:"sm",orientation:"horizontal"})]})]},s.id)})}):e.jsx("div",{className:"space-y-2",children:B.map(s=>{var i;const t=(i=a.includedGiftIds)==null?void 0:i.includes(s.id);return e.jsxs("button",{onClick:()=>M(s.id),className:`w-full flex items-center gap-4 p-4 border-2 rounded-lg hover:shadow-md transition-all text-left ${t?"border-[#D91C81] bg-pink-50":"border-gray-200 hover:border-[#D91C81]"}`,children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.sku," â€¢ ",s.category]}),e.jsx("div",{className:"mt-2",children:e.jsx(ce,{gift:s,size:"sm",orientation:"horizontal"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-lg font-bold text-[#D91C81]",children:$(s.price,w)}),e.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${t?"bg-[#D91C81] border-[#D91C81]":"border-gray-300"}`,children:t&&e.jsx(Z,{className:"w-4 h-4 text-white"})})]})]},s.id)})}),B.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(J,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No products found"})]})]})]})]}),e.jsxs(L,{children:[e.jsx(E,{children:e.jsx(R,{children:"Configuration Summary"})}),e.jsxs(G,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Catalog Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Assigned to This Site"}),e.jsx("p",{className:"text-2xl font-bold text-[#D91C81]",children:ve})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Assignment Strategy"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:((se=a.assignmentStrategy)==null?void 0:se.replace("_"," "))||"All Products"})]})]}),ge.length===0&&a.assignmentStrategy!=="all"&&e.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex gap-3",children:[e.jsx(Me,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-900",children:[e.jsx("p",{className:"font-semibold",children:"No products assigned"}),e.jsx("p",{children:"This site currently has no products assigned based on your configuration."})]})]})]})]})]})})}export{ds as SiteGiftConfiguration,ds as default};
