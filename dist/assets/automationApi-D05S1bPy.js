import{w as i,ak as c,g as u,p as d}from"./index-DHDOl0g2.js";const a=`https://${i}.supabase.co/functions/v1/make-server-6fcaeea3`;function n(){const e=c(),t=u();if(!e)throw new Error("Authentication required");return{Authorization:`Bearer ${d}`,"X-Access-Token":e,"X-Environment-ID":t.id,"Content-Type":"application/json"}}async function l(e){const t=await fetch(`${a}/automation-rules?siteId=${e}`,{headers:n()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to fetch automation rules")}return(await t.json()).rules||[]}async function f(e){const t=await fetch(`${a}/automation-rules`,{method:"POST",headers:n(),body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create automation rule")}return(await t.json()).rule}async function w(e,t){const o=await fetch(`${a}/automation-rules/${e}`,{method:"PUT",headers:n(),body:JSON.stringify(t)});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to update automation rule")}return(await o.json()).rule}async function m(e){const t=await fetch(`${a}/automation-rules/${e}`,{method:"DELETE",headers:n()});if(!t.ok){const o=await t.json();throw new Error(o.error||"Failed to delete automation rule")}}async function p(e,t=50){const o=await fetch(`${a}/email-history?siteId=${e}&limit=${t}`,{headers:n()});if(!o.ok){const r=await o.json();throw new Error(r.error||"Failed to fetch email history")}return o.json()}export{p as a,f as c,m as d,l as f,w as u};
