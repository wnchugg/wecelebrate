import{a as w,u as C,I as D,c as A,r as l,j as e,y as k,L as c,H as E,t as u,g as L,k as S,l as O}from"./index-dV4Uttrq.js";import{L as I}from"./Logo-CiJj3CqM.js";import{u as B}from"./useDateFormat-DXMDXoB8.js";import{t as F}from"./translationHelpers-Cxf8i38r.js";import{L as P}from"./loader-circle-BpaB5MSO.js";import{S as T}from"./sparkles-ClEZgAbI.js";import{C as H}from"./circle-check-big-BTbhA0uw.js";import{C as $}from"./calendar-BSj-0Q_N.js";import{P as d}from"./package-x6dzX_nl.js";function _(){const{orderId:i,siteId:R}=w(),n=C(),{clearOrder:o}=D(),{t:r}=A(),{formatDate:j}=B(),[s,N]=l.useState(null),[b,m]=l.useState(!0),[x,g]=l.useState(null);l.useEffect(()=>{(async()=>{if(!i){n("../gift-selection");return}m(!0),g(null);try{const t=sessionStorage.getItem("employee_session");if(!t){u.error("Session expired. Please log in again."),n("../access");return}const a=L(),v=S(a),f=await fetch(`${v}/public/orders/${i}`,{headers:{Authorization:`Bearer ${a.supabaseAnonKey}`,"X-Environment-ID":a.id,"X-Session-Token":t}}),p=await f.json();if(!f.ok)throw new Error(p.error||"Failed to load order");N(p.order),o()}catch(t){O.error("Failed to load order:",t),g(t instanceof Error?t.message:"Failed to load order details"),u.error(t instanceof Error?t.message:"Failed to load order")}finally{m(!1)}})()},[i,n,o]);const y=h=>{const t=new Date(h),a=new Date(t);return a.setDate(a.getDate()+7),j(a)};return b?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"w-12 h-12 text-[#D91C81] animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})}):x||!s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 text-lg font-bold mb-4",children:x||"Order not found"}),e.jsx("button",{onClick:()=>n("../gift-selection"),className:"text-[#D91C81] hover:text-[#B71569] font-medium",children:"Return to Gift Selection"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-8 w-[88px]",children:e.jsx(I,{})}),e.jsx(k,{})]})})}),e.jsx("div",{className:"py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20",children:e.jsx(T,{className:"w-32 h-32 text-[#D91C81] animate-pulse"})}),e.jsx("div",{className:"relative inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-green-400 to-green-600 rounded-full mb-6 shadow-2xl animate-bounce",children:e.jsx(H,{className:"w-14 h-14 text-white"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:r("confirmation.title")}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:r("confirmation.successMessage")}),e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-[#00B4CC] to-[#00E5A0] text-white px-6 py-3 rounded-full shadow-lg",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"text-sm font-bold",children:F(r,"shipping.estimatedDelivery",{date:y(s.createdAt)})})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-6",children:[e.jsxs("div",{className:"text-center pb-6 mb-6 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:r("confirmation.orderNumber")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 font-mono",children:s.orderNumber})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 text-blue-600"}),r("confirmation.yourGift")]}),e.jsxs("div",{className:"flex gap-4 bg-gray-50 rounded-xl p-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:s.giftImageUrl,alt:s.giftName,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:s.giftName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.giftCategory}),e.jsxs("p",{className:"text-sm text-gray-700 font-medium mt-2",children:[r("confirmation.quantity")," ",s.quantity]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 text-blue-600"}),r("confirmation.shippingTo")]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.shippingAddress.fullName}),e.jsx("p",{className:"text-gray-700 text-sm mt-1",children:s.shippingAddress.addressLine1}),e.jsxs("p",{className:"text-gray-700 text-sm",children:[s.shippingAddress.city,", ",s.shippingAddress.state," ",s.shippingAddress.postalCode]}),e.jsx("p",{className:"text-gray-700 text-sm",children:s.shippingAddress.country}),e.jsx("p",{className:"text-gray-700 text-sm mt-2",children:s.shippingAddress.phone})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[e.jsxs(c,{to:`/order-tracking/${i}`,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#00B4CC] to-[#00E5A0] text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition-all",children:[e.jsx(d,{className:"w-5 h-5"}),"Track This Order"]}),e.jsx(c,{to:"/my-orders",className:"flex items-center justify-center gap-2 bg-white text-gray-700 px-6 py-3 rounded-lg font-semibold border-2 border-gray-200 hover:border-gray-300 transition-all",children:"View All Orders"}),e.jsxs(c,{to:"/",onClick:()=>o(),className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#D91C81] to-[#B71569] text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition-all",children:[e.jsx(E,{className:"w-5 h-5"}),"Return Home"]})]}),e.jsxs("div",{className:"mt-8 text-center text-gray-600 text-sm",children:[e.jsx("p",{children:r("confirmation.needHelp")}),e.jsxs("p",{className:"mt-1",children:[r("confirmation.contactSupportWithOrder")," ",e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:i})]})]})]})})]})}export{_ as Confirmation};
