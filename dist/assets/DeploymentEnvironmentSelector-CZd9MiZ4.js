import{g as y,a2 as j,r as o,j as e,Y as f,T as h,K as p,a3 as N}from"./index-C7jV57L-.js";import{S as b}from"./server-Cvrr7ndX.js";function D({variant:g="login",className:i=""}){const r=y(),d=j(),[s,n]=o.useState(!1),l=o.useRef(null),[c,w]=o.useState(!1),[v,m]=o.useState(!1);o.useEffect(()=>{function t(a){l.current&&!l.current.contains(a.target)&&n(!1)}return s?(document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)):()=>{}},[s]),o.useEffect(()=>{function t(a){a.key==="Escape"&&n(!1)}return s?(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)):()=>{}},[s]),o.useEffect(()=>(r&&w(!0),()=>{}),[r]),o.useEffect(()=>{if(!c)return m(!0),()=>{};const t=setTimeout(()=>{m(!1)},1e4);return()=>clearTimeout(t)},[c]);const x=t=>{if(t!==r.id){const a=sessionStorage.getItem("jala_access_token");if(t==="production"){const u=a?`⚠️ You are switching to PRODUCTION environment.

This will connect to live data and you will need to log in again. Are you sure?`:`⚠️ You are switching to PRODUCTION environment.

This will connect to live data. Are you sure?`;if(!window.confirm(u)){n(!1);return}}else if(a&&!window.confirm(`You are switching to ${t.toUpperCase()} environment.

You will need to log in again with credentials for the ${t} environment. Continue?`)){n(!1);return}N(t)}else n(!1)};return g==="login"?e.jsxs("div",{className:`relative ${i}`,ref:l,children:[e.jsxs("button",{type:"button",onClick:()=>n(!s),className:"w-full bg-gradient-to-r from-[#1B2A5E] to-[#2A3A7E] text-white px-4 py-3 rounded-xl font-semibold text-sm hover:shadow-lg transition-all flex items-center justify-between gap-2 border border-white/20","aria-expanded":s,"aria-haspopup":"true",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Environment:"}),e.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-bold border",style:{backgroundColor:r.color+"20",color:r.color,borderColor:r.color},children:r.label})]}),e.jsx(f,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),s&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden z-50",children:[e.jsx("div",{className:"p-2 bg-gray-50 border-b border-gray-200",children:e.jsx("p",{className:"text-xs font-semibold text-gray-600 px-2",children:"Select Deployment Environment"})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:d.map(t=>e.jsxs("button",{type:"button",onClick:()=>x(t.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center justify-between gap-3 ${t.id===r.id?"bg-pink-50":""}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold border",style:{backgroundColor:t.color+"20",color:t.color,borderColor:t.color},children:t.label}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.name}),t.id==="production"&&e.jsx(h,{className:"w-4 h-4 text-red-500"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.description})]}),t.id===r.id&&e.jsx(p,{className:"w-5 h-5 text-[#D91C81] flex-shrink-0"})]},t.id))}),e.jsx("div",{className:"p-3 bg-yellow-50 border-t border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Changing the environment will reload the page and connect to a different backend."]})})]})]}):e.jsxs("div",{className:`relative ${i}`,ref:l,children:[e.jsxs("button",{type:"button",onClick:()=>n(!s),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border-2 transition-all text-sm font-bold shadow-sm hover:shadow-md",style:{backgroundColor:r.color+"20",color:r.color,borderColor:r.color},"aria-expanded":s,"aria-haspopup":"true",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:r.label}),e.jsx(f,{className:`w-3 h-3 transition-transform ${s?"rotate-180":""}`})]}),s&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-72 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden z-50",children:[e.jsx("div",{className:"p-2 bg-gray-50 border-b border-gray-200",children:e.jsx("p",{className:"text-xs font-semibold text-gray-600 px-2",children:"Deployment Environment"})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:d.map(t=>e.jsxs("button",{type:"button",onClick:()=>x(t.id),className:"w-full px-3 py-2 text-left hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold border",style:{backgroundColor:t.color+"20",color:t.color,borderColor:t.color},children:t.label}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.name}),t.id==="production"&&e.jsx(h,{className:"w-4 h-4 text-red-500"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.description})]}),t.id===r.id&&e.jsx(p,{className:"w-5 h-5 text-[#D91C81] flex-shrink-0"})]},t.id))})]})]})}export{D};
