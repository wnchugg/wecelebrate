import{c as A,u as E,a as L,r,z as _,l as B,j as e,y as I,B as D,C as u,G as $}from"./index-C7jV57L-.js";import{L as P}from"./Logo-DZGWE0S1.js";import{C as T,a as z,b as F,c as G,d as H}from"./card-CQ5EBDNi.js";import{B as n}from"./badge-CGH-d9UP.js";import{A as j,a as p,b as N}from"./alert-DMZQrU-Y.js";import{L as M}from"./loader-circle-B_Aj62vu.js";import{C as w}from"./circle-alert-LytUjhL9.js";import{E as O}from"./external-link-GR7KY2hY.js";function X(){var b;const{t}=A(),f=E(),{siteId:d}=L(),[l,v]=r.useState([]),[S,m]=r.useState(!0),[c,x]=r.useState(null),[o,h]=r.useState(null),C=d?`/access/${d}`:"/access";r.useEffect(()=>{y()},[]);const y=async()=>{m(!0),x(null);try{const{sites:s}=await _.getActiveSites();v(s.filter(i=>i.status==="active"));const a=sessionStorage.getItem("selected_site_id");a&&s.find(i=>i.id===a)&&h(a)}catch(s){B.error("Failed to load sites:",s),x(s.message||"Failed to load available sites")}finally{m(!1)}},g=s=>{sessionStorage.setItem("selected_site_id",s);const a=l.find(i=>i.id===s);a&&sessionStorage.setItem("selected_site_data",JSON.stringify(a)),f(C)},k=()=>{sessionStorage.removeItem("selected_site_id"),sessionStorage.removeItem("selected_site_data"),h(null)};return S?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#00E5A0] via-[#0066CC] via-[#D91C81] to-[#1B2A5E] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"w-12 h-12 text-white animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:t("common.loading")})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#00E5A0] via-[#0066CC] via-[#D91C81] to-[#1B2A5E]",children:[e.jsx("header",{className:"px-4 sm:px-6 lg:px-8 py-6",role:"banner",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"h-10 w-[110px]",style:{filter:"brightness(0) invert(1)"},role:"img","aria-label":"HALO Logo",children:e.jsx(P,{})})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg",children:e.jsx(I,{})})]})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full mb-6",children:e.jsx(D,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:t("siteSelection.title")}),e.jsx("p",{className:"text-lg sm:text-xl text-white/90 max-w-2xl mx-auto",children:t("siteSelection.subtitle")})]}),c&&e.jsxs(j,{variant:"destructive",className:"mb-8 bg-red-500/20 border-red-500/50 backdrop-blur-sm",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(p,{className:"text-white",children:"Error"}),e.jsx(N,{className:"text-white/90",children:c})]}),l.length===0&&!c&&e.jsxs(j,{className:"mb-8 bg-white/10 border-white/30 backdrop-blur-sm",children:[e.jsx(w,{className:"h-4 w-4 text-white"}),e.jsx(p,{className:"text-white",children:t("siteSelection.noSitesTitle")}),e.jsx(N,{className:"text-white/90",children:t("siteSelection.noSitesDescription")})]}),o&&e.jsxs("div",{className:"mb-8 bg-white/10 backdrop-blur-sm rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{variant:"secondary",className:"bg-green-500/20 text-white border-green-500/50",children:t("siteSelection.currentSelection")}),e.jsx("span",{className:"text-white font-medium",children:(b=l.find(s=>s.id===o))==null?void 0:b.name})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:k,className:"text-white hover:bg-white/20",children:t("common.change")})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:l.map(s=>e.jsxs(T,{className:`bg-white/10 backdrop-blur-sm border-white/20 transition-all hover:bg-white/20 hover:scale-105 cursor-pointer ${o===s.id?"ring-2 ring-white ring-offset-2 ring-offset-transparent":""}`,onClick:()=>g(s.id),children:[e.jsx(z,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(F,{className:"text-white text-xl mb-2",children:s.name}),e.jsx(G,{className:"text-white/70",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),s.domain]})})]}),e.jsx(n,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-500/20 text-white border-green-500/50":"bg-gray-500/20 text-white border-gray-500/50",children:s.status})]})}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[t("siteSelection.branding"),":"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/30",style:{backgroundColor:s.branding.primaryColor},title:`Primary: ${s.branding.primaryColor}`}),e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/30",style:{backgroundColor:s.branding.secondaryColor},title:`Secondary: ${s.branding.secondaryColor}`}),s.branding.accentColor&&e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/30",style:{backgroundColor:s.branding.accentColor},title:`Accent: ${s.branding.accentColor}`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[t("siteSelection.validationMethod"),":"]}),e.jsx(n,{variant:"outline",className:"text-white border-white/30",children:s.settings.validationMethod})]}),s.settings.languages&&s.settings.languages.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[t("siteSelection.languages"),":"]}),e.jsx("div",{className:"flex gap-1",children:s.settings.languages.map(a=>e.jsx(n,{variant:"outline",className:"text-xs text-white border-white/30",children:a.toUpperCase()},a))})]}),e.jsxs(u,{className:"w-full mt-4 bg-white text-[#D91C81] hover:bg-white/90",onClick:a=>{a.stopPropagation(),g(s.id)},children:[t("siteSelection.selectSite"),e.jsx(O,{className:"w-4 h-4 ml-2"})]})]})})]},s.id))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("p",{className:"text-white/60 text-sm",children:t("siteSelection.footerNote")})})]})})]})}export{X as SiteSelection};
