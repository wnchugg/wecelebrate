import{l as n,r as m,j as e,a7 as V,T as w,D as v,t as g}from"./index-dV4Uttrq.js";import{A as x}from"./activity-C1_kJN04.js";import{Z as z}from"./zap-FLYJ60Bz.js";import{T as C}from"./trending-up-C-v-0ueb.js";import{C as I}from"./code-Bj0v6G56.js";import{C as O}from"./circle-x-CrdKUO8e.js";import{C as $}from"./circle-check-big-BTbhA0uw.js";class F{constructor(){this.metrics=[],this.webVitals={},this.enabled=localStorage.getItem("PERFORMANCE_MONITORING")==="true",this.enabled&&this.initializeWebVitals()}initializeWebVitals(){if(!(typeof window>"u")){try{new PerformanceObserver(r=>{const s=r.getEntries(),a=s[s.length-1];this.recordWebVital("LCP",a.renderTime||a.loadTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{n.warn("LCP observer not supported")}try{new PerformanceObserver(r=>{r.getEntries().forEach(a=>{this.recordWebVital("FID",a.processingStart-a.startTime)})}).observe({type:"first-input",buffered:!0})}catch{n.warn("FID observer not supported")}try{let t=0;new PerformanceObserver(s=>{s.getEntries().forEach(i=>{i.hadRecentInput||(t+=i.value)}),this.recordWebVital("CLS",t)}).observe({type:"layout-shift",buffered:!0})}catch{n.warn("CLS observer not supported")}window.performance&&window.performance.getEntriesByType&&window.addEventListener("load",()=>{setTimeout(()=>{const t=performance.getEntriesByType("navigation")[0];t&&this.recordWebVital("TTFB",t.responseStart-t.requestStart);const s=performance.getEntriesByType("paint").find(a=>a.name==="first-contentful-paint");s&&this.recordWebVital("FCP",s.startTime)},0)})}}recordWebVital(t,r){const s=this.getRating(t,r),a={name:t,value:Math.round(r),rating:s,timestamp:Date.now()};this.webVitals[t]=a,this.metrics.push(a),this.enabled&&n.log(`[Performance] ${t}: ${a.value}ms (${s})`)}getRating(t,r){const a={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800}}[t];return!a||r<=a.good?"good":r<=a.poor?"needs-improvement":"poor"}recordMetric(t,r){if(!this.enabled)return;const s={name:t,value:Math.round(r),rating:"good",timestamp:Date.now()};this.metrics.push(s),n.log(`[Performance] ${t}: ${r}ms`)}async measureAsync(t,r){const s=performance.now();try{const a=await r(),i=performance.now()-s;return this.recordMetric(t,i),a}catch(a){const i=performance.now()-s;throw this.recordMetric(`${t} (error)`,i),a}}measure(t,r){const s=performance.now();try{const a=r(),i=performance.now()-s;return this.recordMetric(t,i),a}catch(a){const i=performance.now()-s;throw this.recordMetric(`${t} (error)`,i),a}}mark(t){this.enabled&&(performance.mark(t),n.log(`[Performance] Mark: ${t}`))}measureBetween(t,r,s){if(this.enabled)try{performance.measure(t,r,s);const a=performance.getEntriesByName(t);if(a.length>0){const i=a[a.length-1].duration;this.recordMetric(t,i)}}catch{n.warn(`Failed to measure between marks: ${r} -> ${s}`)}}getMetrics(){return[...this.metrics]}getWebVitals(){return{...this.webVitals}}getSummary(){const t=this.getWebVitals(),r=this.metrics.filter(s=>!["LCP","FID","CLS","FCP","TTFB"].includes(s.name));return{webVitals:t,customMetrics:r.slice(-20),timestamp:Date.now()}}logSummary(){if(!this.enabled)return;const t=this.getSummary();n.group("Performance Summary"),n.log("Web Vitals:",t.webVitals),n.log("Custom Metrics:",t.customMetrics),n.groupEnd()}enable(){this.enabled=!0,localStorage.setItem("PERFORMANCE_MONITORING","true"),n.log("[Performance] Monitoring enabled")}disable(){this.enabled=!1,localStorage.removeItem("PERFORMANCE_MONITORING"),n.log("[Performance] Monitoring disabled")}isEnabled(){return this.enabled}clear(){this.metrics=[],this.webVitals={},n.log("[Performance] Metrics cleared")}}const d=new F,{recordMetric:U,measureAsync:q,measure:H,mark:J,measureBetween:X,getMetrics:Q,getWebVitals:Y,getSummary:ee,logSummary:te,enable:se,disable:re}=d;class f{constructor(t){this.cache=new Map,this.config={defaultTTL:300*1e3,maxSize:100,enableLogging:!1,...t}}generateKey(t,r){const s=r?JSON.stringify(r):"";return`${t}:${s}`}isExpired(t){return Date.now()-t.timestamp>t.ttl}evictOldest(){if(this.cache.size<this.config.maxSize)return;let t=null,r=1/0;this.cache.forEach((s,a)=>{s.timestamp<r&&(r=s.timestamp,t=a)}),t&&(this.cache.delete(t),this.config.enableLogging&&n.log(`[Cache] Evicted oldest entry: ${t}`))}set(t,r,s,a){const i=this.generateKey(t,s);this.evictOldest();const o={data:r,timestamp:Date.now(),ttl:a||this.config.defaultTTL,key:i};this.cache.set(i,o),this.config.enableLogging&&n.log(`[Cache] Set: ${i} (TTL: ${o.ttl}ms)`)}get(t,r){const s=this.generateKey(t,r),a=this.cache.get(s);if(!a){this.config.enableLogging&&n.log(`[Cache] Miss: ${s}`);return}if(this.isExpired(a)){this.cache.delete(s),this.config.enableLogging&&n.log(`[Cache] Expired: ${s}`);return}return this.config.enableLogging&&n.log(`[Cache] Hit: ${s}`),a.data}has(t,r){return this.get(t,r)!==void 0}invalidate(t,r){const s=this.generateKey(t,r);this.cache.delete(s)&&this.config.enableLogging&&n.log(`[Cache] Invalidated: ${s}`)}invalidatePattern(t){let r=0;const s=[];return this.cache.forEach((a,i)=>{(typeof t=="string"?i.includes(t):t.test(i))&&s.push(i)}),s.forEach(a=>{this.cache.delete(a),r++}),r>0&&this.config.enableLogging&&n.log(`[Cache] Invalidated ${r} entries matching pattern: ${t}`),r}clear(){const t=this.cache.size;this.cache.clear(),this.config.enableLogging&&n.log(`[Cache] Cleared ${t} entries`)}getStats(){const t=Array.from(this.cache.values()),r=Date.now();return{size:this.cache.size,maxSize:this.config.maxSize,usage:this.cache.size/this.config.maxSize*100,entries:t.map(s=>({key:s.key,age:r-s.timestamp,ttl:s.ttl,timeRemaining:Math.max(0,s.ttl-(r-s.timestamp))}))}}cleanup(){let t=0;const r=[];return this.cache.forEach((s,a)=>{this.isExpired(s)&&r.push(a)}),r.forEach(s=>{this.cache.delete(s),t++}),t>0&&this.config.enableLogging&&n.log(`[Cache] Cleaned up ${t} expired entries`),t}async cached(t,r,s){const a=this.get(t);if(a!=null)return a;const i=await r();return this.set(t,i,void 0,s),i}}const p=new f({defaultTTL:300*1e3,maxSize:100}),b=new f({defaultTTL:1800*1e3,maxSize:50}),y=new f({defaultTTL:120*1e3,maxSize:50});typeof window<"u"&&setInterval(()=>{p.cleanup(),b.cleanup(),y.cleanup()},300*1e3);const R=()=>{p.clear(),b.clear(),y.clear(),n.log("[Cache] All caches cleared")},W=()=>({api:p.getStats(),staticData:b.getStats(),userData:y.getStats()});function ae(){const[h,t]=m.useState(null),[r,s]=m.useState(null),[a,i]=m.useState([]),[o,j]=m.useState(d.isEnabled()),[M,S]=m.useState(0),u=()=>{t(d.getWebVitals()),s(W());const c=d.getSummary();i(c.customMetrics||[]),j(d.isEnabled()),n.log("[PerformanceDashboard] Data refreshed")};m.useEffect(()=>{u()},[M]);const T=()=>{o?(d.disable(),g.success("Performance monitoring disabled")):(d.enable(),g.success("Performance monitoring enabled")),j(!o)},P=()=>{R(),g.success("All caches cleared"),u()},E=()=>{d.clear(),g.success("Performance metrics cleared"),u()},D=c=>{switch(c){case"good":return"text-green-600 bg-green-50";case"needs-improvement":return"text-yellow-600 bg-yellow-50";case"poor":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},L=c=>{switch(c){case"good":return e.jsx($,{className:"w-5 h-5"});case"needs-improvement":return e.jsx(w,{className:"w-5 h-5"});case"poor":return e.jsx(O,{className:"w-5 h-5"});default:return e.jsx(x,{className:"w-5 h-5"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-[#D91C81]"}),"Performance Dashboard"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor application performance and Web Vitals"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>S(c=>c+1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:T,className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${o?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(x,{className:"w-4 h-4"}),o?"Monitoring On":"Monitoring Off"]})]})]}),!o&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Performance monitoring is disabled"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Enable monitoring to track Web Vitals and custom metrics. Monitoring is automatically disabled in production for performance."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-[#D91C81]"}),"Web Vitals"]}),h&&Object.keys(h).length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["LCP","FID","CLS","FCP","TTFB"].map(c=>{const l=h[c];return l?e.jsxs("div",{className:`p-4 rounded-lg border-2 ${D(l.rating)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:c}),L(l.rating)]}),e.jsxs("div",{className:"text-2xl font-bold mb-1",children:[l.value,c==="CLS"?"":"ms"]}),e.jsx("div",{className:"text-xs capitalize",children:l.rating.replace("-"," ")})]},c):null})}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No Web Vitals data available yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Data will appear after page interactions"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"What are Web Vitals?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"LCP (Largest Contentful Paint):"}),e.jsx("p",{className:"text-gray-600",children:"Time to render largest element (Good: <2.5s)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"FID (First Input Delay):"}),e.jsx("p",{className:"text-gray-600",children:"Time to first user interaction (Good: <100ms)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"CLS (Cumulative Layout Shift):"}),e.jsx("p",{className:"text-gray-600",children:"Visual stability score (Good: <0.1)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"FCP (First Contentful Paint):"}),e.jsx("p",{className:"text-gray-600",children:"Time to first content render (Good: <1.8s)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"TTFB (Time to First Byte):"}),e.jsx("p",{className:"text-gray-600",children:"Server response time (Good: <800ms)"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-[#D91C81]"}),"Cache Statistics"]}),e.jsx("button",{onClick:P,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm",children:"Clear All Caches"})]}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["api","staticData","userData"].map(c=>{const l=r[c],N=(l.size/l.maxSize*100).toFixed(1);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 capitalize mb-3",children:[c.replace(/([A-Z])/g," $1").trim()," Cache"]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Usage"}),e.jsxs("span",{className:"font-medium",children:[l.size," / ",l.maxSize]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#D91C81] h-2 rounded-full transition-all",style:{width:`${N}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[N,"% full"]})]}),e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Entries:"}),e.jsx("span",{className:"font-medium",children:l.entries.length})]})})]},c)})}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No cache data available"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-[#D91C81]"}),"Custom Metrics"]}),e.jsx("button",{onClick:E,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Clear Metrics"})]}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-gray-700",children:"Metric Name"}),e.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold text-gray-700",children:"Value"}),e.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold text-gray-700",children:"Timestamp"})]})}),e.jsx("tbody",{children:a.slice().reverse().map((c,l)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 text-sm text-gray-900",children:c.name}),e.jsxs("td",{className:"py-2 px-3 text-sm text-right font-mono",children:[c.value,"ms"]}),e.jsx("td",{className:"py-2 px-3 text-sm text-right text-gray-600",children:new Date(c.timestamp).toLocaleTimeString()})]},l))})]})}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No custom metrics recorded yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Metrics will appear as you use the application"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-blue-50 rounded-lg p-6 border border-pink-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-[#D91C81]"}),"Performance Optimization Tips"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"âœ… Implemented"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Route-based code splitting"}),e.jsx("li",{children:"â€¢ API response caching"}),e.jsx("li",{children:"â€¢ Virtual scrolling for large lists"}),e.jsx("li",{children:"â€¢ Lazy image loading"}),e.jsx("li",{children:"â€¢ Performance monitoring"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"ðŸ’¡ Best Practices"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Use React.memo for pure components"}),e.jsx("li",{children:"â€¢ Debounce search inputs"}),e.jsx("li",{children:"â€¢ Optimize images (size & format)"}),e.jsx("li",{children:"â€¢ Minimize bundle size"}),e.jsx("li",{children:"â€¢ Monitor Web Vitals regularly"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"ðŸ“š Documentation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"For detailed performance optimization guidelines, see:"}),e.jsx("code",{className:"text-sm bg-gray-100 px-3 py-1 rounded text-[#D91C81]",children:"/PERFORMANCE_OPTIMIZATION.md"})]})]})}export{ae as PerformanceDashboard};
