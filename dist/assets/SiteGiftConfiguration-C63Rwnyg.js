import{m as me,j as e,T as Ce,r as u,l as d,X as J,q as Se,an as Pe,a4 as te,C,K as Z,ag as we,S as ke,t as re}from"./index-CYlZQa06.js";import{u as De,a as Le,D as Ge,H as Ie}from"./index-CXwbod-I.js";import{C as G,a as I,b as E,c as M,d as R}from"./card-BPM0EqmW.js";import{I as F}from"./input-BGLnrYUB.js";import{Z as Ee}from"./zap-kwd8ATq6.js";import{I as xe}from"./info-fdOvzK5N.js";import{B as Re}from"./badge-9JH8fCUp.js";import{G as $e}from"./grip-vertical-D4c7DC0O.js";import{P as q}from"./package-CPx7D2LU.js";import{E as ie}from"./eye-B1mcq7YE.js";import{R as le}from"./rocket-CHXduwHk.js";import{P as Ae}from"./plus-h30B0z77.js";import{P as Te}from"./pen-DJH1vlEG.js";import{T as ne}from"./trash-2-PDg71LeD.js";import{A as Me}from"./arrow-up-down-iw6dFPdp.js";import{G as Fe,L as Ke}from"./list-D3HKi3_v.js";import{C as Ue}from"./circle-alert-cB5UyqMQ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],oe=me("file-pen",Be);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],He=me("shield-alert",ze),V={USD:{code:"USD",symbol:"$",name:"US Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},EUR:{code:"EUR",symbol:"â‚¬",name:"Euro",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:".",decimalSeparator:","},GBP:{code:"GBP",symbol:"Â£",name:"British Pound",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},CAD:{code:"CAD",symbol:"C$",name:"Canadian Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},AUD:{code:"AUD",symbol:"A$",name:"Australian Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},JPY:{code:"JPY",symbol:"Â¥",name:"Japanese Yen",decimalPlaces:0,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},CNY:{code:"CNY",symbol:"Â¥",name:"Chinese Yuan",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},CHF:{code:"CHF",symbol:"CHF",name:"Swiss Franc",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:"'",decimalSeparator:"."},SEK:{code:"SEK",symbol:"kr",name:"Swedish Krona",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:" ",decimalSeparator:","},NOK:{code:"NOK",symbol:"kr",name:"Norwegian Krone",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:" ",decimalSeparator:","},DKK:{code:"DKK",symbol:"kr",name:"Danish Krone",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:".",decimalSeparator:","},INR:{code:"INR",symbol:"â‚¹",name:"Indian Rupee",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},MXN:{code:"MXN",symbol:"$",name:"Mexican Peso",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},BRL:{code:"BRL",symbol:"R$",name:"Brazilian Real",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:".",decimalSeparator:","},ZAR:{code:"ZAR",symbol:"R",name:"South African Rand",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},SGD:{code:"SGD",symbol:"S$",name:"Singapore Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},HKD:{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},NZD:{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},KRW:{code:"KRW",symbol:"â‚©",name:"South Korean Won",decimalPlaces:0,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."},PLN:{code:"PLN",symbol:"zÅ‚",name:"Polish ZÅ‚oty",decimalPlaces:2,symbolPosition:"after",thousandsSeparator:" ",decimalSeparator:","},THB:{code:"THB",symbol:"à¸¿",name:"Thai Baht",decimalPlaces:2,symbolPosition:"before",thousandsSeparator:",",decimalSeparator:"."}};function ge(r){return r&&V[r.toUpperCase()]||V.USD}function $(r,c,A){const L=ge(c),{symbol:n,decimalPlaces:x,symbolPosition:b,thousandsSeparator:S,decimalSeparator:v}=L,g=r<0,h=Math.abs(r),a=Math.round(h*Math.pow(10,x))/Math.pow(10,x),[l,j]=a.toFixed(x).split(".");let m=l.replace(/\B(?=(\d{3})+(?!\d))/g,S);x>0&&(m+=v+j);let p=b==="before"?`${n}${m}`:`${m} ${n}`;return g&&(p=`-${p}`),p}function _e(r){return ge(r).symbol}function ce({gift:r,size:c="sm",orientation:A="horizontal",showDetails:L=!1}){var l,j,y,m,p,w,D,f,N;const{compliance:n}=r;if(!n)return null;const x=(l=n.prop65)==null?void 0:l.required,b=(j=n.pfas)==null?void 0:j.containsPFAS,S=(y=n.energyCompliance)==null?void 0:y.regulationRequired,v=n.restrictedStates&&n.restrictedStates.length>0;if(!x&&!b&&!S&&!v)return null;const g={sm:"text-xs px-1.5 py-0.5",md:"text-sm px-2 py-1",lg:"text-base px-3 py-1.5"},h={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},a=A==="horizontal"?"flex flex-wrap gap-1.5 items-center":"flex flex-col gap-1.5";return e.jsxs("div",{className:a,children:[x&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-amber-100 text-amber-900 border border-amber-300 rounded font-semibold ${g[c]}`,title:((m=n.prop65)==null?void 0:m.customWarning)||"California Proposition 65 Warning",children:[e.jsx(Ce,{className:h[c]}),e.jsx("span",{children:"PROP 65"})]}),b&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-red-100 text-red-900 border border-red-300 rounded font-semibold ${g[c]}`,title:((p=n.pfas)==null?void 0:p.warningMessage)||"Contains PFAS (Per- and Polyfluoroalkyl Substances)",children:[e.jsx(He,{className:h[c]}),e.jsx("span",{children:"PFAS"}),((w=n.pfas)==null?void 0:w.pfasLevel)&&c!=="sm"&&e.jsxs("span",{className:"text-xs opacity-80",children:["(",n.pfas.pfasLevel.toUpperCase(),")"]})]}),S&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-green-100 text-green-900 border border-green-300 rounded font-semibold ${g[c]}`,title:`California Energy Compliance${(D=n.energyCompliance)!=null&&D.energyRating?`: ${n.energyCompliance.energyRating}`:""}`,children:[e.jsx(Ee,{className:h[c]}),e.jsx("span",{children:((f=n.energyCompliance)==null?void 0:f.energyRating)||"CEC"})]}),v&&e.jsxs("div",{className:`inline-flex items-center gap-1 bg-purple-100 text-purple-900 border border-purple-300 rounded font-semibold ${g[c]}`,title:`Restricted in: ${(N=n.restrictedStates)==null?void 0:N.join(", ")}`,children:[e.jsx(xe,{className:h[c]}),e.jsx("span",{children:"RESTRICTED"})]}),n.certifications&&n.certifications.length>0&&L&&e.jsx("div",{className:`inline-flex items-center gap-1 bg-blue-100 text-blue-900 border border-blue-300 rounded font-semibold ${g[c]}`,children:e.jsx("span",{children:n.certifications.join(", ")})})]})}const de="GIFT_CARD";function Oe({gift:r,index:c,moveGift:A,onEdit:L,onDelete:n,onPreview:x}){const b=u.useRef(null);d.debug("[DraggableGiftCard] Rendering card",{giftName:r.name,index:c});const[{handlerId:S},v]=De({accept:de,collect(l){return{handlerId:l.getHandlerId()}},hover(l,j){var N;if(!b.current)return;const y=l.index,m=c;if(y===m)return;const p=(N=b.current)==null?void 0:N.getBoundingClientRect(),w=(p.bottom-p.top)/2,f=j.getClientOffset().y-p.top;y<m&&f<w||y>m&&f>w||(A(y,m),l.index=m)}}),[{isDragging:g},h]=Le({type:de,item:()=>(d.debug("[DraggableGiftCard] Starting drag",{giftName:r.name,index:c}),{id:r.id,index:c}),collect:l=>({isDragging:l.isDragging()}),end:(l,j)=>{d.debug("[DraggableGiftCard] Drag ended",{giftName:r.name})}}),a=g?.4:1;return h(v(b)),e.jsx("div",{ref:b,"data-handler-id":S,style:{opacity:a},className:"bg-white p-4 rounded-lg border-2 border-gray-200 hover:border-[#D91C81] transition-all group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"cursor-move text-gray-400 hover:text-[#D91C81] transition-colors mt-1",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm truncate",children:r.name}),n&&e.jsx("button",{onClick:()=>n(r.id),className:"text-gray-400 hover:text-red-600 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Re,{variant:"outline",className:"text-xs",children:r.category}),e.jsx("span",{className:"text-xs font-mono text-gray-500",children:r.sku}),e.jsxs("span",{className:"text-sm font-semibold text-[#D91C81]",children:["$",r.price.toFixed(2)]})]})]})]})})}function xs(){var se,ae;const{currentSite:r}=Se(),{gifts:c,getSiteConfiguration:A,updateSiteConfiguration:L,getGiftsBySite:n}=Pe(),[x,b]=u.useState("draft"),[S,v]=u.useState(null),[g,h]=u.useState({siteId:(r==null?void 0:r.id)||"",assignmentStrategy:"all"}),a=x==="live"&&S||g,l=s=>{x==="draft"&&h(s)},[j,y]=u.useState("grid"),[m,p]=u.useState(""),[w,D]=u.useState(null),[f,N]=u.useState({id:"",name:"",minPrice:0,maxPrice:0}),[ue,W]=u.useState([]),[Ye,Ze]=u.useState(!1),[X,Q]=u.useState(!1);u.useEffect(()=>{r&&ee()},[r]),u.useEffect(()=>{if(x==="draft"&&r){const s=setTimeout(()=>{he()},1e3);return()=>clearTimeout(s)}},[g,x]);const ee=async()=>{if(r)try{d.info("[SiteGiftConfiguration] Loading configuration",{siteId:r.id});const s=await te(`/sites/${r.id}/gift-config`);if(d.debug("[SiteGiftConfiguration] Config response received",{hasConfig:!!s.config}),s.config)v(s.config),h(s.config),d.info("[SiteGiftConfiguration] Configuration loaded successfully");else{const t={siteId:r.id,assignmentStrategy:"all"};v(t),h(t),d.info("[SiteGiftConfiguration] No config found, using default")}}catch(s){d.error("[SiteGiftConfiguration] Error loading config",{error:s});const t={siteId:r.id,assignmentStrategy:"all"};v(t),h(t),d.info("[SiteGiftConfiguration] Error occurred, using default")}};u.useEffect(()=>{r&&n(r.id).then(W)},[r,n]);const he=async()=>{if(!(!r||!g))try{d.debug("[SiteGiftConfiguration] Auto-saving draft"),localStorage.setItem(`draft_config_${r.id}`,JSON.stringify(g))}catch(s){d.error("[SiteGiftConfiguration] Error auto-saving draft",{error:s})}},pe=async()=>{if(r){Q(!0);try{d.info("[SiteGiftConfiguration] Publishing configuration",{siteId:r.id});const s=await te(`/sites/${r.id}/gift-config`,{method:"PUT",body:JSON.stringify(a)});d.info("[SiteGiftConfiguration] Publish successful"),L(a),await ee();const t=await n(r.id);W(t),d.debug("[SiteGiftConfiguration] Updated gifts",{count:t.length}),re.success("Site gift configuration published successfully")}catch(s){d.error("[SiteGiftConfiguration] Error publishing configuration",{error:s}),re.error("Failed to publish configuration. Check console for details.")}finally{Q(!1)}}},fe=()=>{const s={id:`level-${Date.now()}`,name:"New Level",minPrice:0,maxPrice:100};l({...a,priceLevels:[...a.priceLevels||[],s]})},be=s=>{D(s.id),N(s)},je=()=>{if(!a.priceLevels)return;const s=a.priceLevels.map(t=>t.id===w?f:t);l({...a,priceLevels:s}),D(null)},ye=s=>{if(!a.priceLevels)return;const t=a.priceLevels.filter(i=>i.id!==s);l({...a,priceLevels:t}),a.selectedLevelId===s&&l({...a,selectedLevelId:void 0,priceLevels:t})},K=s=>{const t=a.includedGiftIds||[];t.includes(s)?l({...a,includedGiftIds:t.filter(i=>i!==s)}):l({...a,includedGiftIds:[...t,s]})},ve=(s,t)=>{d.debug("[SiteGiftConfiguration] moveGift called",{dragIndex:s,hoverIndex:t});const i=[...a.includedGiftIds||[]];d.debug("[SiteGiftConfiguration] Before move",{giftIds:i});const[o]=i.splice(s,1);i.splice(t,0,o),d.debug("[SiteGiftConfiguration] After move",{giftIds:i}),l({...a,includedGiftIds:i})};if(!r)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(q,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Please select a site to configure gifts"})]});const k=((se=r.settings)==null?void 0:se.defaultCurrency)||"USD",U=_e(k),P=c.filter(s=>s.status==="active"),B=P.filter(s=>{if(!m)return!0;const t=m.toLowerCase().trim(),i=s.name.toLowerCase().includes(t)||s.sku.toLowerCase().includes(t)||s.category.toLowerCase().includes(t);let o=!1;const T=t.match(/^(\d+(?:\.\d+)?)\s*-\s*(\d+(?:\.\d+)?)$/);if(T){const[,O,Y]=T;o=s.price>=parseFloat(O)&&s.price<=parseFloat(Y)}const H=t.match(/^<\s*(\d+(?:\.\d+)?)$/);H&&(o=s.price<parseFloat(H[1]));const _=t.match(/^>\s*(\d+(?:\.\d+)?)$/);if(_&&(o=s.price>parseFloat(_[1])),!T&&!H&&!_){const O=s.price.toFixed(2),Y=$(s.price,k).toLowerCase();o=O.includes(t)||Y.includes(t)}return i||o});P.filter(s=>{var t;return(t=a.includedGiftIds)==null?void 0:t.includes(s.id)});const z=(a.includedGiftIds||[]).map(s=>P.find(t=>t.id===s)).filter(s=>s!==void 0),Ne=(()=>{var s;switch(a.assignmentStrategy){case"all":return P.length;case"price_levels":if(a.selectedLevelId&&a.priceLevels){const t=a.priceLevels.find(i=>i.id===a.selectedLevelId);if(t)return P.filter(i=>i.price>=t.minPrice&&i.price<t.maxPrice).length}return 0;case"exclusions":return P.filter(t=>{var i,o;return!((i=a.excludedSkus)!=null&&i.includes(t.sku)||(o=a.excludedCategories)!=null&&o.includes(t.category))}).length;case"explicit":return((s=a.includedGiftIds)==null?void 0:s.length)||0;default:return 0}})();return d.debug("[SiteGiftConfiguration] Rendering",{configMode:x,hasLiveConfig:!!S,hasDraftConfig:!!g}),e.jsx(Ge,{backend:Ie,children:e.jsxs("div",{className:"space-y-6",children:[x==="live"&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ”’ Read-Only Mode"}),e.jsx("p",{children:'Viewing live configuration. Click "Edit" to make changes.'})]})]}),e.jsxs(C,{onClick:()=>b("draft"),variant:"outline",size:"sm",className:"border-blue-300 hover:bg-blue-100",children:[e.jsx(oe,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit Draft"]})]}),x==="draft"&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"w-5 h-5 text-amber-600 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-amber-900",children:[e.jsx("p",{className:"font-semibold",children:"âœï¸ Editing Draft"}),e.jsx("p",{children:"Changes are auto-saved but won't affect the live site until you publish."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(C,{onClick:()=>b("live"),variant:"outline",size:"sm",className:"border-amber-300 hover:bg-amber-100",children:[e.jsx(ie,{className:"w-3.5 h-3.5 mr-1.5"}),"View Live"]}),e.jsx(C,{onClick:pe,className:"bg-green-600 hover:bg-green-700 text-white",disabled:X,size:"sm",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-1.5",children:e.jsx(le,{className:"w-3.5 h-3.5"})}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-3.5 h-3.5 mr-1.5"}),"Publish"]})})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[e.jsx(xe,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Product Catalog System"}),e.jsx("p",{children:"Configure which products from your global ERP catalog are available for this site. You can assign all products, filter by price levels, exclude specific SKUs/categories, or manually select specific products."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Site Currency:"})," ",k," (",U,")"]})]})]}),e.jsxs(G,{children:[e.jsxs(I,{children:[e.jsx(E,{children:"Assignment Strategy"}),e.jsx(M,{children:"Choose how products are assigned to this site"})]}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="all"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"all",checked:a.assignmentStrategy==="all",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"All Products"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Include all active products from the global catalog"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="price_levels"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"price_levels",checked:a.assignmentStrategy==="price_levels",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Price Levels"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Group products into price levels (e.g., Bronze, Silver, Gold) and assign a specific level to this site"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="exclusions"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"exclusions",checked:a.assignmentStrategy==="exclusions",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Exclusions"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Include all products EXCEPT specific SKUs or categories"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-all ${a.assignmentStrategy==="explicit"?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:[e.jsx("input",{type:"radio",name:"strategy",value:"explicit",checked:a.assignmentStrategy==="explicit",onChange:s=>l({...a,assignmentStrategy:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Explicit Selection"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manually select specific products to include"})]})]})]})})]}),a.assignmentStrategy==="price_levels"&&e.jsxs(G,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Price Level Configuration"}),e.jsx(M,{children:"Create and manage price levels for product grouping"})]}),e.jsxs(C,{onClick:fe,className:"bg-[#D91C81] hover:bg-[#B71569] text-white",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Add Level"]})]})}),e.jsxs(R,{className:"space-y-4",children:[(!a.priceLevels||a.priceLevels.length===0)&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[e.jsx(q,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No price levels configured"}),e.jsx(C,{onClick:()=>{l({...a,priceLevels:[{id:"bronze",name:"Bronze Level",minPrice:0,maxPrice:50},{id:"silver",name:"Silver Level",minPrice:50,maxPrice:100},{id:"gold",name:"Gold Level",minPrice:100,maxPrice:300}],selectedLevelId:"silver"})},variant:"outline",children:"Set Up Default Price Levels"})]}),a.priceLevels&&a.priceLevels.map(s=>{const t=P.filter(o=>o.price>=s.minPrice&&o.price<s.maxPrice),i=w===s.id;return e.jsx("div",{className:`p-4 border-2 rounded-lg transition-all ${a.selectedLevelId===s.id?"border-[#D91C81] bg-pink-50":"border-gray-200"}`,children:i?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Level Name"}),e.jsx(F,{type:"text",value:f.name,onChange:o=>N({...f,name:o.target.value}),placeholder:"e.g., Gold Level"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Min Price (",U,")"]}),e.jsx(F,{type:"number",value:f.minPrice,onChange:o=>N({...f,minPrice:parseFloat(o.target.value)}),min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Max Price (",U,")"]}),e.jsx(F,{type:"number",value:f.maxPrice,onChange:o=>N({...f,maxPrice:parseFloat(o.target.value)}),min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{onClick:je,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsxs(C,{onClick:()=>D(null),size:"sm",variant:"outline",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("input",{type:"radio",name:"level",value:s.id,checked:a.selectedLevelId===s.id,onChange:()=>l({...a,selectedLevelId:s.id}),className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[$(s.minPrice,k)," - ",$(s.maxPrice,k)," â€¢ ",t.length," products"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{onClick:()=>be(s),size:"sm",variant:"ghost",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx(C,{onClick:()=>ye(s.id),size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ne,{className:"w-4 h-4"})})]})]})},s.id)})]})]}),a.assignmentStrategy==="exclusions"&&e.jsxs(G,{children:[e.jsxs(I,{children:[e.jsx(E,{children:"Exclusion Rules"}),e.jsx(M,{children:"Exclude specific categories or SKUs from this site"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Excluded Categories"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:we.map(s=>{var t;return e.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"checkbox",checked:(t=a.excludedCategories)==null?void 0:t.includes(s),onChange:i=>{const o=a.excludedCategories||[];i.target.checked?l({...a,excludedCategories:[...o,s]}):l({...a,excludedCategories:o.filter(T=>T!==s)})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:s})]},s)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Excluded SKUs"}),e.jsx("select",{multiple:!0,className:"w-full h-48 px-4 py-2 border border-gray-300 rounded-lg focus:border-[#D91C81] focus:ring-2 focus:ring-pink-100 outline-none",value:a.excludedSkus||[],onChange:s=>{const t=Array.from(s.target.selectedOptions,i=>i.value);l({...a,excludedSkus:t})},children:P.map(s=>e.jsxs("option",{value:s.sku,children:[s.sku," - ",s.name," (",$(s.price,k),")"]},s.id))}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Hold Ctrl/Cmd to select multiple SKUs"})]})]})]}),a.assignmentStrategy==="explicit"&&e.jsxs(e.Fragment,{children:[z.length>0&&e.jsxs(G,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-[#D91C81]"}),"Selected Products (",z.length,")"]}),e.jsx(M,{children:"Drag to reorder â€¢ Click Ã— to remove"})]}),e.jsxs(C,{onClick:()=>l({...a,includedGiftIds:[]}),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),e.jsxs(R,{children:[e.jsx("div",{className:"space-y-3",children:z.map((s,t)=>e.jsx(Oe,{gift:s,index:t,moveGift:ve,onRemove:K,showRemove:!0},s.id))}),e.jsx("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-900",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Click and drag any gift card to reorder. The order you set here is the order gifts will appear to users on the site."]})})]})]}),e.jsxs(G,{children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Product Catalog"}),e.jsx(M,{children:"Click on products to add them to your selection"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(F,{type:"text",placeholder:"Search by name, SKU, category, or price...",value:m,onChange:s=>p(s.target.value),className:"pl-10 w-80"}),m&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1 border border-gray-200 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>y("grid"),className:`p-2 rounded ${j==="grid"?"bg-[#D91C81] text-white":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded ${j==="list"?"bg-[#D91C81] text-white":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Ke,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600 bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Search tips:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("span",{children:["â€¢ Name, SKU, or Category: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"wireless"})]}),e.jsxs("span",{children:["â€¢ Exact price: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"25.99"})]}),e.jsxs("span",{children:["â€¢ Price range: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"20-50"})]}),e.jsxs("span",{children:["â€¢ Less than: ",e.jsx("code",{className:"bg-white px-1 rounded",children:"<50"})]}),e.jsxs("span",{children:["â€¢ Greater than: ",e.jsx("code",{className:"bg-white px-1 rounded",children:">100"})]})]})]})]}),e.jsxs(R,{children:[j==="grid"?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:B.map(s=>{var i;const t=(i=a.includedGiftIds)==null?void 0:i.includes(s.id);return e.jsxs("button",{onClick:()=>K(s.id),className:`group relative bg-white border-2 rounded-lg overflow-hidden hover:shadow-lg transition-all text-left ${t?"border-[#D91C81] ring-2 ring-pink-100":"border-gray-200 hover:border-[#D91C81]"}`,children:[t&&e.jsx("div",{className:"absolute top-2 right-2 z-10 bg-[#D91C81] text-white p-1 rounded-full",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm line-clamp-2 mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s.sku}),e.jsx("p",{className:"text-sm font-bold text-[#D91C81]",children:$(s.price,k)})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s.category}),e.jsx(ce,{gift:s,size:"sm",orientation:"horizontal"})]})]},s.id)})}):e.jsx("div",{className:"space-y-2",children:B.map(s=>{var i;const t=(i=a.includedGiftIds)==null?void 0:i.includes(s.id);return e.jsxs("button",{onClick:()=>K(s.id),className:`w-full flex items-center gap-4 p-4 border-2 rounded-lg hover:shadow-md transition-all text-left ${t?"border-[#D91C81] bg-pink-50":"border-gray-200 hover:border-[#D91C81]"}`,children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.sku," â€¢ ",s.category]}),e.jsx("div",{className:"mt-2",children:e.jsx(ce,{gift:s,size:"sm",orientation:"horizontal"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-lg font-bold text-[#D91C81]",children:$(s.price,k)}),e.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${t?"bg-[#D91C81] border-[#D91C81]":"border-gray-300"}`,children:t&&e.jsx(Z,{className:"w-4 h-4 text-white"})})]})]},s.id)})}),B.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No products found"})]})]})]})]}),e.jsxs(G,{children:[e.jsx(I,{children:e.jsx(E,{children:"Configuration Summary"})}),e.jsxs(R,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Catalog Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Assigned to This Site"}),e.jsx("p",{className:"text-2xl font-bold text-[#D91C81]",children:Ne})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Assignment Strategy"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:((ae=a.assignmentStrategy)==null?void 0:ae.replace("_"," "))||"All Products"})]})]}),ue.length===0&&a.assignmentStrategy!=="all"&&e.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex gap-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-900",children:[e.jsx("p",{className:"font-semibold",children:"No products assigned"}),e.jsx("p",{children:"This site currently has no products assigned based on your configuration."})]})]})]})]})]})})}export{xs as SiteGiftConfiguration,xs as default};
