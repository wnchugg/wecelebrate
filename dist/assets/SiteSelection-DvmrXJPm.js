import{c as D,u as $,a as P,r as i,z as T,l as z,j as e,y as F,B as G,C as v,G as H}from"./index-DHDOl0g2.js";import{L as M}from"./Logo-iYHvapyw.js";import{C as O,a as J,b as R,c as U,d as q}from"./card-DAEfl5-S.js";import{B as c}from"./badge-SpbMApKn.js";import{A as S,a as C,b as y}from"./alert-BBS-OmT7.js";import{L as K}from"./loader-circle-CxhB-7Ws.js";import{C as k}from"./circle-alert-HchCeVzY.js";import{E as Q}from"./external-link-BXKPgQkd.js";function ae(){var u;const{t}=D(),A=$(),{siteId:m}=P(),[l,E]=i.useState([]),[L,x]=i.useState(!0),[o,h]=i.useState(null),[d,g]=i.useState(null),_=m?`/access/${m}`:"/access";i.useEffect(()=>{B()},[]);const B=async()=>{x(!0),h(null);try{const{sites:s}=await T.getActiveSites();E(s.filter(r=>r.status==="active"));const a=sessionStorage.getItem("selected_site_id");a&&s.find(r=>r.id===a)&&g(a)}catch(s){z.error("Failed to load sites:",s),h(s.message||"Failed to load available sites")}finally{x(!1)}},b=s=>{sessionStorage.setItem("selected_site_id",s);const a=l.find(r=>r.id===s);a&&sessionStorage.setItem("selected_site_data",JSON.stringify(a)),A(_)},I=()=>{sessionStorage.removeItem("selected_site_id"),sessionStorage.removeItem("selected_site_data"),g(null)};return L?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#00E5A0] via-[#0066CC] via-[#D91C81] to-[#1B2A5E] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-12 h-12 text-white animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:t("common.loading")})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#00E5A0] via-[#0066CC] via-[#D91C81] to-[#1B2A5E]",children:[e.jsx("header",{className:"px-4 sm:px-6 lg:px-8 py-6",role:"banner",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"h-10 w-[110px]",style:{filter:"brightness(0) invert(1)"},role:"img","aria-label":"HALO Logo",children:e.jsx(M,{})})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg",children:e.jsx(F,{})})]})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full mb-6",children:e.jsx(G,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:t("siteSelection.title")}),e.jsx("p",{className:"text-lg sm:text-xl text-white/90 max-w-2xl mx-auto",children:t("siteSelection.subtitle")})]}),o&&e.jsxs(S,{variant:"destructive",className:"mb-8 bg-red-500/20 border-red-500/50 backdrop-blur-sm",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(C,{className:"text-white",children:"Error"}),e.jsx(y,{className:"text-white/90",children:o})]}),l.length===0&&!o&&e.jsxs(S,{className:"mb-8 bg-white/10 border-white/30 backdrop-blur-sm",children:[e.jsx(k,{className:"h-4 w-4 text-white"}),e.jsx(C,{className:"text-white",children:t("siteSelection.noSitesTitle")}),e.jsx(y,{className:"text-white/90",children:t("siteSelection.noSitesDescription")})]}),d&&e.jsxs("div",{className:"mb-8 bg-white/10 backdrop-blur-sm rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{variant:"secondary",className:"bg-green-500/20 text-white border-green-500/50",children:t("siteSelection.currentSelection")}),e.jsx("span",{className:"text-white font-medium",children:(u=l.find(s=>s.id===d))==null?void 0:u.name})]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:I,className:"text-white hover:bg-white/20",children:t("common.change")})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:l.map(s=>{var a,r,j,p,N,w,f;return e.jsxs(O,{className:`bg-white/10 backdrop-blur-sm border-white/20 transition-all hover:bg-white/20 hover:scale-105 cursor-pointer ${d===s.id?"ring-2 ring-white ring-offset-2 ring-offset-transparent":""}`,onClick:()=>b(s.id),children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{className:"text-white text-xl mb-2",children:s.name}),e.jsx(U,{className:"text-white/70",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),s.domain]})})]}),e.jsx(c,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-500/20 text-white border-green-500/50":"bg-gray-500/20 text-white border-gray-500/50",children:s.status})]})}),e.jsx(q,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[t("siteSelection.branding"),":"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/30",style:{backgroundColor:(a=s==null?void 0:s.branding)==null?void 0:a.primaryColor},title:`Primary: ${(r=s==null?void 0:s.branding)==null?void 0:r.primaryColor}`}),e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/30",style:{backgroundColor:(j=s==null?void 0:s.branding)==null?void 0:j.secondaryColor},title:`Secondary: ${(p=s==null?void 0:s.branding)==null?void 0:p.secondaryColor}`}),((N=s==null?void 0:s.branding)==null?void 0:N.accentColor)&&e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/30",style:{backgroundColor:s.branding.accentColor},title:`Accent: ${s.branding.accentColor}`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[t("siteSelection.validationMethod"),":"]}),e.jsx(c,{variant:"outline",className:"text-white border-white/30",children:(w=s==null?void 0:s.settings)==null?void 0:w.validationMethod})]}),((f=s==null?void 0:s.settings)==null?void 0:f.languages)&&s.settings.languages.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[t("siteSelection.languages"),":"]}),e.jsx("div",{className:"flex gap-1",children:s.settings.languages.map(n=>e.jsx(c,{variant:"outline",className:"text-xs text-white border-white/30",children:n.toUpperCase()},n))})]}),e.jsxs(v,{className:"w-full mt-4 bg-white text-[#D91C81] hover:bg-white/90",onClick:n=>{n.stopPropagation(),b(s.id)},children:[t("siteSelection.selectSite"),e.jsx(Q,{className:"w-4 h-4 ml-2"})]})]})})]},s.id)})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("p",{className:"text-white/60 text-sm",children:t("siteSelection.footerNote")})})]})})]})}export{ae as SiteSelection};
