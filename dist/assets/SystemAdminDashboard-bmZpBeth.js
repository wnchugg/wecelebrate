import{r as i,g as J,j as e,a5 as T,T as I,C as E,Y as V,l as o,p as $,u as X,w as q,ad as Q,ae as Z,a1 as ee,q as se,L as N,x as te,D as F,G as Y}from"./index-C7jV57L-.js";import{B as z}from"./badge-CGH-d9UP.js";import{C as k}from"./circle-check-big-DXQHMGWC.js";import{C as M}from"./circle-x-Dhjl2Nc_.js";import{C as ae}from"./chevron-up-DD_9V56I.js";import{C as O}from"./circle-alert-LytUjhL9.js";import{T as ne}from"./terminal-C-iEeNTi.js";import{c as re,s as ie}from"./url-BcwXFdV5.js";import{I as oe}from"./input-69VmhYrO.js";import{a as K,s as G}from"./errorHandling-CC0wokWx.js";import{C as ce}from"./clock-IpOWLfyH.js";import{S as W}from"./shield-DTnCc7-I.js";import{S as H}from"./server-Cvrr7ndX.js";import{T as le}from"./trending-up-PJ1wCr55.js";import{T as de}from"./trending-down-DEth8QrM.js";import{K as me}from"./key-bPiMexfv.js";import{U as xe}from"./users-DPo0x8z0.js";import{A as B}from"./activity-D4RWSJ6u.js";import{P as he}from"./pen-BOSW2QU8.js";import{T as ge}from"./trash-2-BHjm95fn.js";import{E as pe}from"./external-link-GR7KY2hY.js";function ue(){const[s,u]=i.useState("checking"),[C,l]=i.useState("Checking connection..."),[n,b]=i.useState(null),[x,h]=i.useState(!1),[g,v]=i.useState(null),[f,S]=i.useState(!1),y=async()=>{h(!0),u("checking"),l("Checking connection...");const t=J(),w=t.supabaseUrl.match(/https:\/\/([^.]+)\.supabase\.co/),c=w?w[1]:"unknown";try{const r=`${t.supabaseUrl}/functions/v1/make-server-6fcaeea3/health`,D=`${t.supabaseUrl}/functions/v1/make-server-6fcaeea3/test-db`;o.log("[Backend Diagnostic] Checking connection..."),o.log("[Backend Diagnostic] Health URL:",r),o.log("[Backend Diagnostic] Test DB URL:",D),o.log("[Backend Diagnostic] Environment:",t.name,"("+t.id+")"),o.log("[Backend Diagnostic] Using anon key:",$?"YES":"NO");const A=t.anonKey||$,[d,m]=await Promise.all([fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`,"X-Environment-ID":t.id}}),fetch(D,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`,"X-Environment-ID":t.id}})]);o.log("[Backend Diagnostic] Health response status:",d.status),o.log("[Backend Diagnostic] Test DB response status:",m.status);const P=await d.text(),R=await m.text();o.log("[Backend Diagnostic] Health response body:",P),o.log("[Backend Diagnostic] Test DB response body:",R);let _=null,U=null;try{_=JSON.parse(P)}catch{o.warn("[Backend Diagnostic] Could not parse health response as JSON")}try{U=JSON.parse(R)}catch{o.warn("[Backend Diagnostic] Could not parse test-db response as JSON")}if(v({health:{status:d.status,statusText:d.statusText,headers:Object.fromEntries(d.headers.entries()),body:P,bodyParsed:_},testDb:{status:m.status,statusText:m.statusText,headers:Object.fromEntries(m.headers.entries()),body:R,bodyParsed:U}}),d.status===401&&m.status===401)u("error"),l("Authentication issue - 401 Unauthorized"),b({issue:"Unauthorized",explanation:"Both /health and /test-db endpoints returned 401 even though we sent the Supabase anon key. This indicates a backend authentication configuration problem.",healthStatus:d.status,testDbStatus:m.status,url:r,environment:t.name,projectId:c,anonKeyProvided:!!A,suggestion:"The backend middleware may be incorrectly requiring custom JWT tokens for public endpoints."});else if(d.ok||m.ok){const L=_||U||{status:"ok",message:"Backend is responding"};u("success"),l("Connected"),b({...L,healthStatus:d.status,testDbStatus:m.status})}else u("error"),l(`Backend errors (Health: ${d.status}, DB: ${m.status})`),b({healthStatus:d.status,healthStatusText:d.statusText,testDbStatus:m.status,testDbStatusText:m.statusText,url:r,environment:t.name,projectId:c})}catch(r){o.error("[Backend Diagnostic] Error:",r),u("error"),b({message:r instanceof Error?r.message:"Unknown error",hint:"The backend function may not be deployed. Run: ./deploy-backend.sh"}),v({error:r instanceof Error?r.message:"Unknown error",stack:r instanceof Error?r.stack:"No stack trace available"})}finally{h(!1)}};i.useEffect(()=>{y()},[]);const j=J(),a=j.supabaseUrl.match(/https:\/\/([^.]+)\.supabase\.co/),p=a?a[1]:"unknown";return e.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>S(!f),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s==="checking"&&e.jsx("div",{className:"animate-spin",children:e.jsx(T,{className:"w-5 h-5 text-blue-600"})}),s==="success"&&e.jsx(k,{className:"w-5 h-5 text-green-600"}),s==="warning"&&e.jsx(I,{className:"w-5 h-5 text-amber-600"}),s==="error"&&e.jsx(M,{className:"w-5 h-5 text-red-600"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Backend Status:"}),e.jsx("span",{className:`text-sm font-medium ${s==="success"?"text-green-600":s==="warning"?"text-amber-600":s==="error"?"text-red-600":"text-blue-600"}`,children:C}),e.jsx(z,{variant:"outline",className:"text-xs",children:j.name})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),y()},disabled:x,className:"h-8",children:e.jsx(T,{className:`w-4 h-4 ${x?"animate-spin":""}`})}),f?e.jsx(ae,{className:"w-5 h-5 text-gray-400"}):e.jsx(V,{className:"w-5 h-5 text-gray-400"})]})]}),f&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Project ID:"}),e.jsx("code",{className:"ml-2 bg-gray-50 px-2 py-1 rounded border border-gray-200 font-mono text-xs",children:p})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Environment:"}),e.jsx(z,{className:"ml-2",children:j.name})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Backend URL:"}),e.jsxs("code",{className:"ml-2 bg-gray-50 px-2 py-1 rounded border border-gray-200 font-mono text-xs break-all",children:[j.supabaseUrl,"/functions/v1/make-server-6fcaeea3"]})]})]})]}),s==="success"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-900 mb-1",children:"Backend Online"}),e.jsx("p",{className:"text-sm text-green-800",children:"Your backend is deployed and responding correctly. All features should work normally."}),(n==null?void 0:n.database)&&e.jsx("p",{className:"text-xs text-green-700 mt-2",children:"âœ“ Database connection verified"}),(n==null?void 0:n.environment)&&e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:["âœ“ Environment: ",n.environment]})]})]})}),s==="warning"&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-amber-900 mb-2",children:"Configuration Issue"}),e.jsx("p",{className:"text-sm text-amber-800 mb-3",children:"The backend is responding but returning a 401 Unauthorized error."}),e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Good news:"})," Backend is deployed and running. The middleware may need adjustment."]})]})]})}),s==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-red-900 mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-sm text-red-800 mb-2",children:(n==null?void 0:n.explanation)||"The backend Edge Function is not responding properly."}),(n==null?void 0:n.suggestion)&&e.jsxs("p",{className:"text-xs text-red-700 mt-2",children:["ðŸ’¡ ",n.suggestion]})]})]})}),n&&e.jsxs("details",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("summary",{className:"p-3 cursor-pointer hover:bg-gray-50 text-sm font-semibold text-gray-900",children:"Response Details"}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded border border-gray-200 overflow-auto max-h-48 font-mono",children:JSON.stringify(n,null,2)})})]}),g&&e.jsxs("details",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("summary",{className:"p-3 cursor-pointer hover:bg-gray-50 text-sm font-semibold text-gray-900",children:"Raw Response (Debug)"}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded border border-gray-200 overflow-auto max-h-96 font-mono",children:JSON.stringify(g,null,2)})})]})]})]})}function be(){const[s,u]=i.useState(null),[C,l]=i.useState(!0),[n,b]=i.useState(!1),[x,h]=i.useState(!1);X();const g=async()=>{l(!0);const j=J().supabaseUrl.match(/https:\/\/([^.]+)\.supabase\.co/),p=`https://${j?j[1]:q}.supabase.co/functions/v1/make-server-6fcaeea3`,t={backendReachable:!1,jwtConfigLoaded:!1,hasExplicitSecret:!1,projectIdMatches:!1,tokenExists:!1},w=Q();if(t.tokenExists=!!w,w)try{const c=w.split(".");if(c.length===3){const r=JSON.parse(atob(c[0])),D=JSON.parse(atob(c[1]));t.tokenAlgorithm=r.alg,t.tokenExpired=D.exp?Date.now()>D.exp*1e3:!1}}catch(c){o.error("Failed to decode token:",c)}try{const c=await fetch(`${p}/debug-jwt-config`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},signal:AbortSignal.timeout(5e3)});if(c.ok){t.backendReachable=!0;const r=await c.json();r.jwtConfig&&(t.jwtConfigLoaded=!0,t.hasExplicitSecret=r.jwtConfig.hasExplicitSecret,t.projectIdMatches=r.jwtConfig.projectIdMatches,t.secretPreview=r.jwtConfig.secretPreview,t.backendProjectId=r.jwtConfig.projectId,t.expectedProjectId=r.jwtConfig.expectedProjectId)}}catch(c){o.error("Backend diagnostic failed:",c)}t.backendReachable?t.jwtConfigLoaded?t.projectIdMatches?t.hasExplicitSecret?t.tokenExists&&t.tokenAlgorithm!=="HS256"?(t.issue="token_mismatch",t.recommendation=`Token uses ${t.tokenAlgorithm} algorithm but backend expects HS256. Clear token and login again.`):t.tokenExists&&t.tokenExpired?(t.issue="token_expired",t.recommendation="Your session token has expired. Clear token and login again."):t.tokenExists?(t.issue="all_good",t.recommendation="JWT configuration looks good!"):(t.issue="no_token",t.recommendation="No authentication token found. Please login."):(t.issue="no_jwt_secret",t.recommendation="JWT_SECRET environment variable is not set. Secret is being derived from project ID. Set JWT_SECRET in Supabase secrets for stability."):(t.issue="project_mismatch",t.recommendation="Backend is deployed to wrong Supabase project. JWT tokens will always fail."):(t.issue="no_jwt_secret",t.recommendation="JWT configuration could not be loaded from backend."):(t.issue="no_backend",t.recommendation="Backend is not reachable. Check that the Edge Function is deployed and running."),u(t),l(!1)};i.useEffect(()=>{g()},[]);const v=async()=>{b(!0);try{Z(),await new Promise(y=>setTimeout(y,500)),await g()}finally{b(!1)}};if(C||!s||s.issue==="all_good"||s.issue==="no_token")return null;const f=()=>{switch(s.issue){case"no_backend":case"project_mismatch":return"bg-red-50 border-red-200 text-red-900";case"no_jwt_secret":case"token_mismatch":case"token_expired":return"bg-yellow-50 border-yellow-200 text-yellow-900";default:return"bg-blue-50 border-blue-200 text-blue-900"}},S=()=>{switch(s.issue){case"no_backend":case"project_mismatch":return e.jsx(M,{className:"w-5 h-5 text-red-600 flex-shrink-0"});case"token_expired":return e.jsx(I,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"});case"all_good":return e.jsx(k,{className:"w-5 h-5 text-green-600 flex-shrink-0"});default:return e.jsx(I,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"})}};return e.jsx("div",{className:`border rounded-lg p-4 ${f()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[S(),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsxs("h3",{className:"font-semibold text-sm",children:[s.issue==="no_backend"&&"Backend Not Reachable",s.issue==="project_mismatch"&&"Critical: Backend Project Mismatch",s.issue==="no_jwt_secret"&&"JWT Secret Not Configured",s.issue==="token_mismatch"&&"Token Algorithm Mismatch",s.issue==="token_expired"&&"Session Expired"]})}),e.jsx("p",{className:"text-sm opacity-90 mb-3",children:s.recommendation}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[(s.issue==="token_mismatch"||s.issue==="token_expired")&&e.jsx("button",{onClick:v,disabled:n,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white border border-current rounded text-sm font-medium hover:bg-opacity-90 transition-colors disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 animate-spin"}),"Clearing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4"}),"Clear Tokens & Retry"]})}),e.jsx("button",{onClick:()=>h(!x),className:"text-sm font-medium underline hover:no-underline",children:x?"Hide Details":"Show Details"}),e.jsxs("button",{onClick:g,className:"inline-flex items-center gap-1 text-sm font-medium underline hover:no-underline",children:[e.jsx(T,{className:"w-3 h-3"}),"Refresh"]})]}),x&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-current/20",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-xs font-mono",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Backend Reachable:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.backendReachable?"âœ“ Yes":"âœ— No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"JWT Config Loaded:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.jwtConfigLoaded?"âœ“ Yes":"âœ— No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Explicit JWT_SECRET:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.hasExplicitSecret?"âœ“ Yes":"âœ— No (derived)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Project ID Match:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.projectIdMatches?"âœ“ Yes":"âœ— No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Token Exists:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.tokenExists?"âœ“ Yes":"âœ— No"})]}),s.tokenAlgorithm&&e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Token Algorithm:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.tokenAlgorithm})]}),s.tokenExpired!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Token Expired:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.tokenExpired?"âœ— Yes":"âœ“ No"})]}),s.backendProjectId&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"opacity-70",children:"Backend Project ID:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.backendProjectId})]}),s.expectedProjectId&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"opacity-70",children:"Expected Project ID:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.expectedProjectId})]}),s.secretPreview&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"opacity-70",children:"Secret Preview:"}),e.jsx("span",{className:"ml-2 font-semibold break-all",children:s.secretPreview})]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-white/50 rounded text-xs",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Troubleshooting Steps:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 opacity-90",children:[s.issue==="no_jwt_secret"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Go to Supabase Dashboard â†’ Settings â†’ Edge Functions â†’ Secrets"}),e.jsxs("li",{children:["Add a new secret named ",e.jsx("code",{className:"px-1 py-0.5 bg-black/10 rounded",children:"JWT_SECRET"})]}),e.jsx("li",{children:"Use a strong random value (32+ characters)"}),e.jsx("li",{children:"Redeploy your Edge Function"}),e.jsx("li",{children:"Clear tokens and login again"})]}),s.issue==="project_mismatch"&&e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Backend is deployed to: ",e.jsx("code",{className:"px-1 py-0.5 bg-black/10 rounded",children:s.backendProjectId})]}),e.jsxs("li",{children:["Expected project: ",e.jsx("code",{className:"px-1 py-0.5 bg-black/10 rounded",children:s.expectedProjectId})]}),e.jsx("li",{children:"Redeploy Edge Function to the correct Supabase project"}),e.jsx("li",{children:"Or update frontend to use the correct backend URL"})]}),(s.issue==="token_mismatch"||s.issue==="token_expired")&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:'Click "Clear Tokens & Retry" button above'}),e.jsxs("li",{children:["Alternatively, open browser console and run: ",e.jsx("code",{className:"px-1 py-0.5 bg-black/10 rounded",children:"sessionStorage.clear()"})]}),e.jsx("li",{children:"Refresh the page"}),e.jsx("li",{children:"Login again to get a new token"})]})]})]})]})]})]})})}const je=[{name:"System Uptime",value:"99.9%",change:"+0.1%",trend:"up",icon:te,color:"bg-green-500"},{name:"Total Sites",value:"24",change:"+3",trend:"up",icon:F,color:"bg-blue-500"},{name:"Active Admins",value:"12",change:"+2",trend:"up",icon:W,color:"bg-[#D91C81]"},{name:"API Response Time",value:"145ms",change:"-12ms",trend:"up",icon:H,color:"bg-[#00B4CC]"}],fe=[{id:"1",action:"New site created",user:"admin@company.com",timestamp:"2 minutes ago",type:"success"},{id:"2",action:"Configuration updated",user:"manager@company.com",timestamp:"15 minutes ago",type:"info"},{id:"3",action:"Failed login attempt",user:"unknown@test.com",timestamp:"32 minutes ago",type:"warning"},{id:"4",action:"Database backup completed",user:"system",timestamp:"1 hour ago",type:"success"},{id:"5",action:"New admin user added",user:"superadmin@company.com",timestamp:"2 hours ago",type:"success"}],ye=[{name:"Database",status:"healthy",latency:"12ms",icon:F},{name:"API Server",status:"healthy",latency:"145ms",icon:H},{name:"Auth Service",status:"healthy",latency:"23ms",icon:W},{name:"Storage",status:"warning",latency:"289ms",icon:me}],Ne=s=>{switch(s){case"success":return e.jsx(k,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(O,{className:"w-5 h-5 text-amber-500"});case"error":return e.jsx(M,{className:"w-5 h-5 text-red-500"});default:return e.jsx(B,{className:"w-5 h-5 text-blue-500"})}},ve=s=>{switch(s){case"healthy":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-amber-100 text-amber-800 border-amber-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};function He(){const{adminUser:s}=ee(),{sites:u,clients:C}=se(),[l,n]=i.useState(""),[b,x]=i.useState(!1),[h,g]=i.useState(""),[v,f]=i.useState(!1),S=window.location.hostname.includes("-v2-figmaiframepreview.figma.site");i.useEffect(()=>{const a=localStorage.getItem("figma-public-site-domain");a&&(n(a),g(a))},[]);const y=()=>{if(!h.trim()){G(new Error("Please enter a valid domain"));return}try{const p=`https://${new URL(h.startsWith("http")?h:`https://${h}`).hostname}`;f(!0),ie(p),n(p),setTimeout(()=>{f(!1),x(!1),K("Deployment domain configured successfully!"),o.info("[SystemAdminDashboard] Deployment domain saved:",p)},500)}catch{G(new Error("Please enter a valid domain (e.g., https://your-site.figma.site or your-site.figma.site)"))}},j=()=>{re(),n(""),g(""),x(!1),K("Deployment domain cleared"),o.info("[SystemAdminDashboard] Deployment domain cleared")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor system health, performance, and activity"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(N,{to:"/admin/audit-logs",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ce,{className:"w-4 h-4"}),"Audit Logs"]}),e.jsxs(N,{to:"/admin/users",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#D91C81] to-[#B71569] text-white rounded-lg hover:shadow-lg transition-all",children:[e.jsx(W,{className:"w-4 h-4"}),"Admin Users"]})]})]}),e.jsx(ue,{}),e.jsx(be,{}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:je.map(a=>{const p=a.icon;return e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",style:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 ${a.color} rounded-lg flex items-center justify-center`,children:e.jsx(p,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${a.trend==="up"?"text-green-600":"text-red-600"}`,children:[a.trend==="up"?e.jsx(le,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:a.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:a.value}),e.jsx("p",{className:"text-sm text-gray-600",children:a.name})]},a.name)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",style:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"System Health"}),e.jsx(N,{to:"/admin/connection-test",className:"text-sm text-[#D91C81] hover:text-[#B71569] font-medium",children:"Run diagnostics â†’"})]})}),e.jsx("div",{className:"p-6 space-y-4",children:ye.map(a=>{const p=a.icon;return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(p,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Latency: ",a.latency]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${ve(a.status)}`,children:a.status})]},a.name)})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",style:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Recent Activity"}),e.jsx(N,{to:"/admin/audit-logs",className:"text-sm text-[#D91C81] hover:text-[#B71569] font-medium",children:"View all â†’"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:fe.map(a=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[Ne(a.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.action}),e.jsx("p",{className:"text-sm text-gray-600",children:a.user}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.timestamp})]})]})},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Y,{className:"w-8 h-8 opacity-80"}),e.jsx("span",{className:"text-sm font-medium opacity-80",children:"Total Sites"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:u.length}),e.jsxs("p",{className:"text-sm opacity-80",children:["Across ",C.length," clients"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#D91C81] to-[#B71569] rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(xe,{className:"w-8 h-8 opacity-80"}),e.jsx("span",{className:"text-sm font-medium opacity-80",children:"Active Sites"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:u.filter(a=>a.status==="active").length}),e.jsx("p",{className:"text-sm opacity-80",children:"Currently operational"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#00B4CC] to-[#0094A8] rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(B,{className:"w-8 h-8 opacity-80"}),e.jsx("span",{className:"text-sm font-medium opacity-80",children:"System Status"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:"Healthy"}),e.jsx("p",{className:"text-sm opacity-80",children:"All systems operational"})]})]}),S&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",style:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Deployment Configuration"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your deployed public site domain for correct link generation"})]}),e.jsx(Y,{className:"w-8 h-8 text-[#D91C81]"})]}),l&&!b?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Public site domain configured"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:e.jsx("span",{className:"font-mono bg-green-100 px-2 py-0.5 rounded",children:l})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>x(!0),className:"text-green-700 hover:text-green-900 hover:bg-green-100",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(E,{variant:"ghost",size:"sm",onClick:j,className:"text-red-700 hover:text-red-900 hover:bg-red-100",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-amber-900 font-medium mb-1",children:"Preview Environment Detected"}),e.jsx("p",{className:"text-sm text-amber-800",children:`You're running in Figma's preview environment. Configure your deployed site domain to ensure "View Public Site" links point to the correct URL.`})]})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"domain-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Deployed Site URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{id:"domain-input",type:"text",value:h,onChange:a=>g(a.target.value),placeholder:"https://your-site.figma.site",className:"flex-1",onKeyDown:a=>{a.key==="Enter"&&y()}}),e.jsx(E,{onClick:y,disabled:v||!h.trim(),className:"bg-[#D91C81] hover:bg-[#B71569] text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Save"]})}),l&&e.jsx(E,{onClick:()=>{x(!1),g(l)},variant:"outline",children:"Cancel"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Example: ",e.jsx("code",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:"https://top-brick-95471034.figma.site"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"How to find your deployed domain:"}),e.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 ml-4 list-decimal",children:[e.jsx("li",{children:"Open your Figma file in edit mode"}),e.jsx("li",{children:'Click the "Play" button (â–¶) in the top-right to preview'}),e.jsxs("li",{children:["Copy the URL from your browser (it will look like: ",e.jsx("code",{className:"font-mono text-xs bg-blue-100 px-1 py-0.5 rounded",children:"https://[name]-[id].figma.site"}),")"]}),e.jsx("li",{children:"Paste it here and save"})]})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",style:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Developer Tools"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(N,{to:"/admin/config-management",className:"flex items-center gap-3 p-4 rounded-lg border-2 border-gray-200 hover:border-[#D91C81] hover:bg-pink-50 transition-all group",children:[e.jsx(F,{className:"w-8 h-8 text-[#D91C81]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 group-hover:text-[#D91C81]",children:"Config Management"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View configurations"})]})]}),e.jsxs(N,{to:"/admin/environment-management",className:"flex items-center gap-3 p-4 rounded-lg border-2 border-gray-200 hover:border-[#00B4CC] hover:bg-cyan-50 transition-all group",children:[e.jsx(H,{className:"w-8 h-8 text-[#00B4CC]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 group-hover:text-[#00B4CC]",children:"Environment"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage environments"})]})]}),e.jsxs(N,{to:"/admin/connection-test",className:"flex items-center gap-3 p-4 rounded-lg border-2 border-gray-200 hover:border-[#1B2A5E] hover:bg-blue-50 transition-all group",children:[e.jsx(B,{className:"w-8 h-8 text-[#1B2A5E]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 group-hover:text-[#1B2A5E]",children:"Connection Test"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Test connectivity"})]})]}),e.jsxs(N,{to:"/admin/data-diagnostic",className:"flex items-center gap-3 p-4 rounded-lg border-2 border-gray-200 hover:border-amber-500 hover:bg-amber-50 transition-all group",children:[e.jsx(B,{className:"w-8 h-8 text-amber-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 group-hover:text-amber-500",children:"Data Diagnostic"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Check data health"})]})]})]})]})]})}export{He as SystemAdminDashboard};
