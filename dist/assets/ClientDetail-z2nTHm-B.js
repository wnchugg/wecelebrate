import{a as w,u as S,r as a,a6 as n,j as e,C as u,n as A,B,x as I,G as L}from"./index-DAep3-17.js";import{B as R}from"./badge-CKAfVDe6.js";import{s as D}from"./errorHandling-61HatLcx.js";import{L as E,C as k}from"./ClientConfiguration-D2nVVvNj.js";import{M as U}from"./map-pin-BnvXFQRp.js";import{U as P}from"./users-BInxthQ2.js";import{C as $}from"./credit-card-BMMipEi8.js";import{E as T}from"./external-link-BkWXEGDv.js";import"./input-E3LMlGJB.js";import"./card-D7HVS59i.js";import"./tabs-0I4LxGB_.js";import"./index-BBIAgE77.js";import"./index-b2qZ5oZ4.js";import"./index-Dxauqy8w.js";import"./index-GxwXKa5n.js";import"./index-CH-6Jnw9.js";import"./index-D_kBqr1b.js";import"./index-7D9TSwIG.js";import"./phone-input-DtvemTEQ.js";import"./address-input-BfGt3d3w.js";import"./label-D7rDMfrx.js";import"./select-Cs6HLM73.js";import"./index-BdQq_4o_.js";import"./index-NQBsc09o.js";import"./index-CE6KxwT7.js";import"./index-BxUISvPR.js";import"./index-CcwUd-PA.js";import"./index-C8gtVD-n.js";import"./chevron-up-DF2_RBoF.js";import"./loader-circle-DZ1z-CmB.js";import"./save-VFQGZXXm.js";import"./mail-BlQiYOtl.js";import"./package-BYXKoKMr.js";function he(){const{clientId:i}=w(),o=S(),[s,g]=a.useState(null),[f,v]=a.useState([]),[l,h]=a.useState("general"),[b,c]=a.useState(!0);a.useEffect(()=>{i&&d()},[i]);const d=async()=>{c(!0);try{let t=i;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i||""))try{console.log("Resolving client slug to ID:",i);const r=(await n("/v2/clients")).data.find(y=>{var x;return((x=y.clientCode)==null?void 0:x.toLowerCase())===(i==null?void 0:i.toLowerCase())});r?(console.log("Found client by slug:",r.name,r.id),t=r.id):(console.warn("No client found with slug:",i),t=i)}catch(p){console.error("Failed to resolve slug:",p)}const[C,N]=await Promise.all([n(`/v2/clients/${t}`),n(`/v2/sites?clientId=${t}`)]);g(C.data),v(N.data||[])}catch(t){D(t,{operation:"load client details"})}finally{c(!1)}};if(b)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D91C81] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading client details..."})]})});if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Client not found"}),e.jsx(u,{onClick:()=>o("/admin/clients"),className:"mt-4",children:"Back to Clients"})]})});const j=[{id:"general",label:"General",icon:B},{id:"address",label:"Address",icon:U},{id:"account",label:"Account Team",icon:P},{id:"app-settings",label:"App Settings",icon:I},{id:"billing",label:"Billing",icon:$},{id:"integrations",label:"Integrations",icon:E},{id:"portal",label:"Client Portal",icon:T},{id:"sites",label:"Sites",icon:L}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(u,{variant:"ghost",onClick:()=>o("/admin/clients"),className:"mt-1",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#1B2A5E]",children:s.name}),e.jsx(R,{className:`${s.status==="active"||s.status===void 0&&s.isActive?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"} border`,children:s.status==="active"||s.status===void 0&&s.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-gray-600",children:s.description||"No description provided"})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex gap-4",children:j.map(t=>{const m=t.icon;return e.jsxs("button",{onClick:()=>h(t.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors ${l===t.id?"border-[#D91C81] text-[#D91C81]":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(m,{className:"w-4 h-4"}),t.label]},t.id)})})}),e.jsx("div",{children:s&&e.jsx(k,{clientIdProp:s.id,embedded:!0,activeTab:l,onSaveSuccess:d,sites:f})})]})}export{he as ClientDetail,he as default};
