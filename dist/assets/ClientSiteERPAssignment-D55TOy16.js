import{r as l,j as e,B as S,a7 as v}from"./index-dV4Uttrq.js";import{s as u,a as Z}from"./errorHandling-CwdwM2Re.js";import{C as O}from"./circle-alert-DNo9lQw-.js";import{S as w}from"./save-D7hvH_Dw.js";import{M as J}from"./map-pin-RXUS_5Nj.js";import{C as R}from"./circle-check-big-BTbhA0uw.js";class T{constructor(){const n="your-project-id";this.baseUrl=`https://${n}.supabase.co/functions/v1/make-server-6fcaeea3`}async getERPConnections(){try{const n=await fetch(`${this.baseUrl}/erp/connections`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!n.ok)throw new Error("Failed to fetch ERP connections");return await n.json()}catch(n){return console.error("Error fetching ERP connections:",n),this.getMockERPConnections()}}async getERPConnection(n){try{const t=await fetch(`${this.baseUrl}/erp/connections/${n}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!t.ok)throw new Error("Failed to fetch ERP connection");return await t.json()}catch(t){throw console.error("Error fetching ERP connection:",t),t}}async createERPConnection(n){try{const t=await fetch(`${this.baseUrl}/erp/connections/enhanced`,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const i=await t.json().catch(()=>({}));throw new Error(i.error||"Failed to create ERP connection")}return await t.json()}catch(t){throw console.error("Error creating ERP connection:",t),t}}async updateERPConnection(n,t){try{const i=await fetch(`${this.baseUrl}/erp/connections/${n}`,{method:"PATCH",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw new Error("Failed to update ERP connection");return await i.json()}catch(i){throw console.error("Error updating ERP connection:",i),i}}async deleteERPConnection(n){try{if(!(await fetch(`${this.baseUrl}/erp/connections/${n}`,{method:"DELETE",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}})).ok)throw new Error("Failed to delete ERP connection")}catch(t){throw console.error("Error deleting ERP connection:",t),t}}async testERPConnection(n){try{const t=await fetch(`${this.baseUrl}/erp/connections/${n}/test`,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!t.ok)throw new Error("Failed to test ERP connection");return await t.json()}catch(t){return console.error("Error testing ERP connection:",t),{success:!1,message:"Connection test failed",errors:[t instanceof Error?t.message:"Unknown error"]}}}async getSyncConfigurations(n){try{const t=await fetch(`${this.baseUrl}/erp/connections/${n}/sync-configs`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!t.ok)throw new Error("Failed to fetch sync configurations");return await t.json()}catch(t){return console.error("Error fetching sync configurations:",t),this.getMockSyncConfigurations()}}async createSyncConfiguration(n){try{const t=await fetch(`${this.baseUrl}/erp/sync-configs`,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Failed to create sync configuration");return await t.json()}catch(t){throw console.error("Error creating sync configuration:",t),t}}async updateSyncConfiguration(n,t){try{const i=await fetch(`${this.baseUrl}/erp/sync-configs/${n}`,{method:"PATCH",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw new Error("Failed to update sync configuration");return await i.json()}catch(i){throw console.error("Error updating sync configuration:",i),i}}async triggerSync(n,t,i){try{const r=await fetch(`${this.baseUrl}/erp/connections/${n}/sync`,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify({dataType:t,direction:i})});if(!r.ok)throw new Error("Failed to trigger sync");return await r.json()}catch(r){throw console.error("Error triggering sync:",r),r}}async getSyncLogs(n,t,i=50){try{const r=new URLSearchParams;n&&r.append("erpConnectionId",n),t&&r.append("dataType",t),r.append("limit",i.toString());const p=await fetch(`${this.baseUrl}/erp/sync-logs?${r}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!p.ok)throw new Error("Failed to fetch sync logs");return await p.json()}catch(r){return console.error("Error fetching sync logs:",r),this.getMockSyncLogs()}}async getSyncStatistics(n){try{const t=await fetch(`${this.baseUrl}/erp/connections/${n}/statistics`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!t.ok)throw new Error("Failed to fetch sync statistics");return await t.json()}catch(t){return console.error("Error fetching sync statistics:",t),{totalSyncs:0,successfulSyncs:0,failedSyncs:0,avgSyncDuration:0,totalRecordsProcessed:0}}}async getClientERPAssignments(n){try{const t=await fetch(`${this.baseUrl}/clients/${n}/erp-assignments`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!t.ok)throw new Error("Failed to fetch client ERP assignments");return await t.json()}catch(t){return console.error("Error fetching client ERP assignments:",t),[]}}async assignERPToClient(n){try{const t=await fetch(`${this.baseUrl}/clients/${n.clientId}/erp-assignments`,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Failed to assign ERP to client");return await t.json()}catch(t){throw console.error("Error assigning ERP to client:",t),t}}async getSiteERPAssignments(n){try{const t=await fetch(`${this.baseUrl}/sites/${n}/erp-assignments`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec"}});if(!t.ok)throw new Error("Failed to fetch site ERP assignments");return await t.json()}catch(t){return console.error("Error fetching site ERP assignments:",t),[]}}async assignERPToSite(n){try{const t=await fetch(`${this.baseUrl}/sites/${n.siteId}/erp-assignments`,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqZmNxcXJsaHdkdnZqbWVmeGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ4NjgsImV4cCI6MjA4NTkzMDg2OH0.utZqFFSYWNkpiHsvU8qQbu4-abPZ41hAZhNL1XDv6ec","Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Failed to assign ERP to site");return await t.json()}catch(t){throw console.error("Error assigning ERP to site:",t),t}}getMockERPConnections(){return[{id:"erp_001",name:"SAP Production",provider:"SAP",connectionMethod:"api",status:"active",credentials:{apiUrl:"https://sap.example.com/api",apiKey:"***********"},settings:{timeout:3e4,retryAttempts:3,retryDelay:5e3,batchSize:100,syncSchedule:"0 */6 * * *",enabledDataTypes:["orders","products","inventory","employees"]},createdAt:"2026-01-15T10:00:00Z",updatedAt:"2026-02-12T08:30:00Z",lastSyncAt:"2026-02-12T14:00:00Z"},{id:"erp_002",name:"NetSuite Integration",provider:"NetSuite",connectionMethod:"doi",status:"active",credentials:{doiEndpoint:"https://netsuite.example.com/doi",doiUsername:"api_user"},settings:{timeout:45e3,retryAttempts:2,retryDelay:1e4,batchSize:50,enabledDataTypes:["orders","invoices"]},createdAt:"2026-01-20T09:00:00Z",updatedAt:"2026-02-10T11:15:00Z",lastSyncAt:"2026-02-12T12:00:00Z"},{id:"erp_003",name:"Legacy SFTP System",provider:"Custom",connectionMethod:"sftp",status:"active",credentials:{sftpHost:"ftp.example.com",sftpPort:22,sftpUsername:"erp_sync",sftpPath:"/data/export"},settings:{timeout:6e4,retryAttempts:3,retryDelay:15e3,syncSchedule:"0 2 * * *",enabledDataTypes:["products","inventory"]},createdAt:"2026-01-10T08:00:00Z",updatedAt:"2026-02-11T07:00:00Z",lastSyncAt:"2026-02-12T02:00:00Z"}]}getMockSyncConfigurations(){return[{id:"sync_001",erpConnectionId:"erp_001",dataType:"orders",direction:"bidirectional",schedule:"0 */2 * * *",enabled:!0,lastSyncAt:"2026-02-12T14:00:00Z",nextSyncAt:"2026-02-12T16:00:00Z",status:"idle",settings:{autoSync:!0,syncInterval:120,syncOnDemand:!0,conflictResolution:"newest_wins"}},{id:"sync_002",erpConnectionId:"erp_001",dataType:"products",direction:"pull",schedule:"0 6 * * *",enabled:!0,lastSyncAt:"2026-02-12T06:00:00Z",nextSyncAt:"2026-02-13T06:00:00Z",status:"idle",settings:{autoSync:!0,syncInterval:1440,syncOnDemand:!0,conflictResolution:"erp_wins"}}]}getMockSyncLogs(){return[{id:"log_001",erpConnectionId:"erp_001",dataType:"orders",syncConfigId:"sync_001",startedAt:"2026-02-12T14:00:00Z",completedAt:"2026-02-12T14:02:30Z",status:"success",recordsProcessed:156,recordsSuccess:156,recordsFailed:0,duration:150},{id:"log_002",erpConnectionId:"erp_001",dataType:"products",syncConfigId:"sync_002",startedAt:"2026-02-12T06:00:00Z",completedAt:"2026-02-12T06:05:15Z",status:"success",recordsProcessed:2450,recordsSuccess:2448,recordsFailed:2,errorMessage:"2 products failed validation",duration:315}]}}const g=new T;function Q(){const[b,n]=l.useState([]),[t,i]=l.useState(""),[r,p]=l.useState(""),[o,m]=l.useState(null),[c,d]=l.useState(null),[E,x]=l.useState(!0),[y,I]=l.useState(!1),k=[{id:"client_001",name:"Acme Corporation"},{id:"client_002",name:"Global Retail Co"},{id:"client_003",name:"Manufacturing Inc"}],N=[{id:"site_001",name:"Acme - North America",clientId:"client_001"},{id:"site_002",name:"Acme - Europe",clientId:"client_001"},{id:"site_003",name:"Global Retail - US West",clientId:"client_002"},{id:"site_004",name:"Global Retail - US East",clientId:"client_002"},{id:"site_005",name:"Manufacturing - Plant A",clientId:"client_003"}],f=[{id:"cat_001",name:"Standard Catalog"},{id:"cat_002",name:"Premium Catalog"},{id:"cat_003",name:"Executive Catalog"}];l.useEffect(()=>{z()},[]),l.useEffect(()=>{t&&C(t)},[t]),l.useEffect(()=>{r&&j(r)},[r]);const z=async()=>{try{x(!0);const s=await g.getERPConnections();n(s.filter(a=>a.status==="active"))}catch{u("Failed to load ERP connections")}finally{x(!1)}},C=async s=>{try{const a=await g.getClientERPAssignments(s);a.length>0?m(a[0]):m({clientId:s,erpConnectionId:"",catalogId:"",isDefault:!0,settings:{syncOrders:!0,syncProducts:!0,syncInventory:!0,syncEmployees:!1,syncInvoices:!1}})}catch(a){console.error("Failed to load client assignment:",a)}},j=async s=>{try{const a=await g.getSiteERPAssignments(s),h=N.find(F=>F.id===s);a.length>0?d(a[0]):h&&d({siteId:s,clientId:h.clientId,erpConnectionId:"",catalogId:"",overridesClient:!1,settings:{syncOrders:!0,syncProducts:!0,syncInventory:!0,syncEmployees:!1,syncInvoices:!1}})}catch(a){console.error("Failed to load site assignment:",a)}},A=async()=>{if(!o||!o.erpConnectionId){u("Please select an ERP connection");return}I(!0);try{await g.assignERPToClient(o),Z("Client ERP assignment saved successfully"),await C(t)}catch{u("Failed to save client assignment")}finally{I(!1)}},P=async()=>{if(!c||!c.erpConnectionId){u("Please select an ERP connection");return}I(!0);try{await g.assignERPToSite(c),Z("Site ERP assignment saved successfully"),await j(r)}catch{u("Failed to save site assignment")}finally{I(!1)}};return E?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client & Site ERP Assignment"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure which ERP connections and catalogs each client and site uses"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Configuration Hierarchy"}),e.jsx("p",{children:"Client-level settings apply to all sites by default. Site-level settings can override client settings when needed."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-[#D91C81] rounded-lg flex items-center justify-center",children:e.jsx(S,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Client Configuration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Default ERP for all sites"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Client *"}),e.jsxs("select",{value:t,onChange:s=>i(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose a client..."}),k.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),t&&o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ERP Connection *"}),e.jsxs("select",{value:o.erpConnectionId||"",onChange:s=>m({...o,erpConnectionId:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select ERP connection..."}),b.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.provider,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Catalog (Optional)"}),e.jsxs("select",{value:o.catalogId||"",onChange:s=>m({...o,catalogId:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"No catalog selected"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Data Sync Settings"}),e.jsx("div",{className:"space-y-2",children:[{key:"syncOrders",label:"Sync Orders"},{key:"syncProducts",label:"Sync Products"},{key:"syncInventory",label:"Sync Inventory"},{key:"syncEmployees",label:"Sync Employees"},{key:"syncInvoices",label:"Sync Invoices"}].map(s=>{var a;return e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((a=o.settings)==null?void 0:a[s.key])||!1,onChange:h=>m({...o,settings:{...o.settings,[s.key]:h.target.checked}}),className:"h-4 w-4 text-[#D91C81] focus:ring-[#D91C81] border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.label})]},s.key)})})]}),e.jsx("button",{onClick:A,disabled:y||!o.erpConnectionId,className:"w-full px-6 py-3 bg-[#D91C81] text-white rounded-lg hover:bg-[#B91670] transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:y?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5"}),"Save Client Configuration"]})})]}),!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Select a client to configure ERP settings"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-[#E94B9E] rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Site Configuration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Override client settings"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Site *"}),e.jsxs("select",{value:r,onChange:s=>p(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose a site..."}),N.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),r&&c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.overridesClient||!1,onChange:s=>d({...c,overridesClient:s.target.checked}),className:"mt-1 h-4 w-4 text-[#D91C81] focus:ring-[#D91C81] border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Override Client Settings"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Enable this to use different ERP settings for this site"})]})]})}),c.overridesClient&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ERP Connection *"}),e.jsxs("select",{value:c.erpConnectionId||"",onChange:s=>d({...c,erpConnectionId:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select ERP connection..."}),b.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.provider,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Catalog (Optional)"}),e.jsxs("select",{value:c.catalogId||"",onChange:s=>d({...c,catalogId:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D91C81] focus:border-transparent",children:[e.jsx("option",{value:"",children:"No catalog selected"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Data Sync Settings"}),e.jsx("div",{className:"space-y-2",children:[{key:"syncOrders",label:"Sync Orders"},{key:"syncProducts",label:"Sync Products"},{key:"syncInventory",label:"Sync Inventory"},{key:"syncEmployees",label:"Sync Employees"},{key:"syncInvoices",label:"Sync Invoices"}].map(s=>{var a;return e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((a=c.settings)==null?void 0:a[s.key])||!1,onChange:h=>d({...c,settings:{...c.settings,[s.key]:h.target.checked}}),className:"h-4 w-4 text-[#D91C81] focus:ring-[#D91C81] border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.label})]},s.key)})})]}),e.jsx("button",{onClick:P,disabled:y||!c.erpConnectionId,className:"w-full px-6 py-3 bg-[#D91C81] text-white rounded-lg hover:bg-[#B91670] transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:y?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5"}),"Save Site Configuration"]})})]}),!c.overridesClient&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-medium mb-2",children:"Using Client Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This site inherits ERP configuration from its client. Enable override to customize settings for this site."})]})]}),!r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(J,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Select a site to configure ERP settings"})]})]})]})]})}export{Q as ClientSiteERPAssignment,Q as default};
