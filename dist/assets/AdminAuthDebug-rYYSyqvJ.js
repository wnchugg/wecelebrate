import{a1 as j,u as N,r as t,ad as f,j as e,a5 as u}from"./index-C7jV57L-.js";import{C as n}from"./circle-check-big-DXQHMGWC.js";import{C as l}from"./circle-x-Dhjl2Nc_.js";import{C as r}from"./circle-alert-LytUjhL9.js";function v(){const s=j(),i=N(),[a,c]=t.useState(null),[d,m]=t.useState(0);t.useEffect(()=>{c(f())},[d]);const o=()=>{m(g=>g+1)},x=()=>{localStorage.removeItem("jala_access_token"),sessionStorage.removeItem("jala_access_token"),window.location.href="/admin/login"},h=()=>{i("/admin/dashboard")};return e.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Auth Debug"}),e.jsxs("button",{onClick:o,className:"px-4 py-2 bg-[#D91C81] text-white rounded-lg hover:bg-[#B71569] transition-colors flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Authentication Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Is Authenticated:"}),e.jsx("span",{className:"flex items-center gap-2",children:s.isAdminAuthenticated?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Yes"})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"No"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Is Loading:"}),e.jsx("span",{className:"flex items-center gap-2",children:s.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-yellow-600 font-medium",children:"Yes (This might cause refresh loop!)"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"No"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Has Token:"}),e.jsx("span",{className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Yes"})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"No"})]})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Information"}),s.adminUser?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Username:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.adminUser.username})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Email:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.adminUser.email})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Role:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.adminUser.role})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"User ID:"}),e.jsx("span",{className:"font-mono text-sm text-gray-900",children:s.adminUser.id})]})]}):e.jsx("p",{className:"text-gray-500",children:"No user data available"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Token Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Token in Storage:"}),e.jsx("span",{className:"font-medium text-gray-900",children:a?"Yes":"No"})]}),a&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-700 block mb-2",children:"Token Preview:"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200 font-mono text-xs text-gray-900 break-all",children:[a.substring(0,50),"..."]})]})]})]}),e.jsxs("div",{className:"border border-yellow-200 bg-yellow-50 rounded-lg p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5"}),"Common Issues"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-yellow-800",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Refresh Loop:"}),' If "Is Loading" stays "Yes", the AdminLayoutWrapper will keep showing loading screen']})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"No Token:"})," If token is missing but isAuthenticated is true, there's a state mismatch"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Token Present but Not Auth:"})," The session check might be failing"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:h,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Try Go To Dashboard"}),e.jsx("button",{onClick:x,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Clear Token & Reload"})]})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Raw State (JSON)"}),e.jsx("pre",{className:"text-green-400 font-mono text-xs overflow-auto max-h-96",children:JSON.stringify({adminUser:s.adminUser,isAdminAuthenticated:s.isAdminAuthenticated,isLoading:s.isLoading,accessToken:s.accessToken?"present":"null",tokenInStorage:a?"present":"null"},null,2)})]})]})})}export{v as AdminAuthDebug,v as default};
