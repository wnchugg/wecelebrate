import{a6 as d,r as p}from"./index-dV4Uttrq.js";const E={async list(a){const e=new URLSearchParams;a!=null&&a.status&&e.append("status",a.status),a!=null&&a.search&&e.append("search",a.search),a!=null&&a.limit&&e.append("limit",a.limit.toString()),a!=null&&a.offset&&e.append("offset",a.offset.toString());const n=e.toString()?`?${e.toString()}`:"";return d(`/v2/brands${n}`)},async get(a){return d(`/v2/brands/${a}`)},async create(a){return d("/v2/brands",{method:"POST",body:JSON.stringify(a)})},async update(a,e){return d(`/v2/brands/${a}`,{method:"PUT",body:JSON.stringify(e)})},async delete(a){return d(`/v2/brands/${a}`,{method:"DELETE"})}},v={async list(a){const e=new URLSearchParams;a!=null&&a.templateType&&e.append("templateType",a.templateType),a!=null&&a.eventType&&e.append("eventType",a.eventType),a!=null&&a.siteId&&e.append("siteId",a.siteId),a!=null&&a.clientId&&e.append("clientId",a.clientId),a!=null&&a.status&&e.append("status",a.status),a!=null&&a.limit&&e.append("limit",a.limit.toString()),a!=null&&a.offset&&e.append("offset",a.offset.toString());const n=e.toString()?`?${e.toString()}`:"";return d(`/v2/email-templates${n}`)},async get(a){return d(`/v2/email-templates/${a}`)},async create(a){return d("/v2/email-templates",{method:"POST",body:JSON.stringify(a)})},async update(a,e){return d(`/v2/email-templates/${a}`,{method:"PUT",body:JSON.stringify(e)})},async delete(a){return d(`/v2/email-templates/${a}`,{method:"DELETE"})}},$={async get(a){return d(`/v2/sites/${a}/gift-config`)},async update(a,e){return d(`/v2/sites/${a}/gift-config`,{method:"PUT",body:JSON.stringify(e)})},async getGifts(a,e){const n=new URLSearchParams;e!=null&&e.category&&n.append("category",e.category),e!=null&&e.minPrice&&n.append("minPrice",e.minPrice.toString()),e!=null&&e.maxPrice&&n.append("maxPrice",e.maxPrice.toString()),e!=null&&e.search&&n.append("search",e.search),e!=null&&e.limit&&n.append("limit",e.limit.toString()),e!=null&&e.offset&&n.append("offset",e.offset.toString());const r=n.toString()?`?${n.toString()}`:"";return d(`/v2/sites/${a}/gifts${r}`)}},m={brands:E,emailTemplates:v,siteGiftConfig:$};function B(a){const[e,n]=p.useState([]),[r,g]=p.useState(0),[h,s]=p.useState(!0),[S,y]=p.useState(null),c=p.useCallback(async()=>{try{s(!0),y(null);const t=await m.brands.list(a);n(t.data),g(t.total)}catch(t){y(t.message||"Failed to fetch brands"),console.error("Error fetching brands:",t)}finally{s(!1)}},[a==null?void 0:a.status,a==null?void 0:a.search,a==null?void 0:a.limit,a==null?void 0:a.offset]);return p.useEffect(()=>{c()},[c]),{brands:e,total:r,loading:h,error:S,refresh:c,createBrand:async t=>{try{const o=await m.brands.create(t);return await c(),o.data}catch(o){throw new Error(o.message||"Failed to create brand")}},updateBrand:async(t,o)=>{try{const u=await m.brands.update(t,o);return await c(),u.data}catch(u){throw new Error(u.message||"Failed to update brand")}},deleteBrand:async t=>{try{await m.brands.delete(t),await c()}catch(o){throw new Error(o.message||"Failed to delete brand")}}}}function F(a){const[e,n]=p.useState([]),[r,g]=p.useState(0),[h,s]=p.useState(!0),[S,y]=p.useState(null),c=p.useCallback(async()=>{try{s(!0),y(null);const t=await m.emailTemplates.list(a);n(t.data),g(t.total)}catch(t){y(t.message||"Failed to fetch email templates"),console.error("Error fetching email templates:",t)}finally{s(!1)}},[a==null?void 0:a.templateType,a==null?void 0:a.eventType,a==null?void 0:a.siteId,a==null?void 0:a.clientId,a==null?void 0:a.status,a==null?void 0:a.limit,a==null?void 0:a.offset]);return p.useEffect(()=>{c()},[c]),{templates:e,total:r,loading:h,error:S,refresh:c,createTemplate:async t=>{try{const o=await m.emailTemplates.create(t);return await c(),o.data}catch(o){throw new Error(o.message||"Failed to create email template")}},updateTemplate:async(t,o)=>{try{const u=await m.emailTemplates.update(t,o);return await c(),u.data}catch(u){throw new Error(u.message||"Failed to update email template")}},deleteTemplate:async t=>{try{await m.emailTemplates.delete(t),await c()}catch(o){throw new Error(o.message||"Failed to delete email template")}}}}export{F as a,B as u};
